<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Type-Safety Architectural Invariants - Iron Curtain — Design Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Design docs for a Rust-native Red Alert RTS engine">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon-de23e50b.svg">
        <link rel="shortcut icon" href="../favicon-8114d1fc.png">
        <link rel="stylesheet" href="../css/variables-8adf115d.css">
        <link rel="stylesheet" href="../css/general-2459343d.css">
        <link rel="stylesheet" href="../css/chrome-ae938929.css">
        <link rel="stylesheet" href="../css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="../highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="../tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="../ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex-61d2369b.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc-1553b04b.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">Iron Curtain — Design Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/DK26/iron-curtain-design-docs" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>
                        <a href="https://github.com/DK26/iron-curtain-design-docs/edit/main/src/architecture/type-safety.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <span class=fa-svg id="git-edit-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M421.7 220.3l-11.3 11.3-22.6 22.6-205 205c-6.6 6.6-14.8 11.5-23.8 14.1L30.8 511c-8.4 2.5-17.5 .2-23.7-6.1S-1.5 489.7 1 481.2L38.7 353.1c2.6-9 7.5-17.2 14.1-23.8l205-205 22.6-22.6 11.3-11.3 33.9 33.9 62.1 62.1 33.9 33.9zM96 353.9l-9.3 9.3c-.9 .9-1.6 2.1-2 3.4l-25.3 86 86-25.3c1.3-.4 2.5-1.1 3.4-2l9.3-9.3H112c-8.8 0-16-7.2-16-16V353.9zM453.3 19.3l39.4 39.4c25 25 25 65.5 0 90.5l-14.5 14.5-22.6 22.6-11.3 11.3-33.9-33.9-62.1-62.1L314.3 67.7l11.3-11.3 22.6-22.6 14.5-14.5c25-25 65.5-25 90.5 0z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h2 id="type-safety-architectural-invariants"><a class="header" href="#type-safety-architectural-invariants">Type-Safety Architectural Invariants</a></h2>
<p>The type system is the first line of defense against logic bugs. These rules are non-negotiable and enforced via <code>clippy::disallowed_types</code>, custom lints, and code review.</p>
<h3 id="newtype-policy-no-bare-integer-ids"><a class="header" href="#newtype-policy-no-bare-integer-ids">Newtype Policy: No Bare Integer IDs</a></h3>
<p>Every domain identifier uses a newtype wrapper. Bare <code>u32</code>, <code>u64</code>, or <code>usize</code> values must never be used as entity IDs, player IDs, slot indices, or any other domain concept.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// CORRECT — newtypes prevent ID confusion at compile time
pub struct PlayerId(u32);
pub struct SlotIndex(u8);
pub struct AccountId(u64);
pub struct UnitId(Entity);     // wraps Bevy Entity
pub struct BuildingId(Entity);
pub struct ProjectileId(Entity);
pub struct SimTick(u64);

// WRONG — bare integers allow passing a PlayerId where a SlotIndex is expected
fn apply_order(player: u32, slot: u32, tick: u64) { ... }
<span class="boring">}</span></code></pre>
<p><strong>Extended newtypes</strong> — the same policy applies to every domain identifier across all crates:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Simulation timing — NEVER confuse SubTickTimestamp with SimTick.
// SimTick counts whole ticks. SubTickTimestamp is a microsecond offset
// within a single tick window, used for sub-tick order fairness (D008).
pub struct SubTickTimestamp(u32);

// Campaign system (D021)
pub struct MissionId(u32);
pub struct OutcomeName(CompactString);  // validated: ASCII alphanumeric + underscore only

// Balance / AI / UI systems
pub struct PresetId(u32);       // balance preset (D019)
pub struct ThemeId(u32);        // UI theme (D032)
pub struct PersonalityId(u32);  // AI personality (D043)

// Workshop / packaging (D030)
pub struct PublisherId(u64);
pub struct PackageName(CompactString);  // validated: [a-z0-9-], 3-64 chars
pub struct PackageVersion(u32, u32, u32);  // Major.Minor.Patch — no string parsing at runtime

// WASM sandbox
pub struct WasmInstanceId(u32);

// Cryptographic identity — private field prevents construction with wrong hash
pub struct Fingerprint([u8; 32]);
<span class="boring">}</span></code></pre>
<p><strong><code>Fingerprint</code> is constructible only via its compute function:</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Fingerprint {
    /// Compute fingerprint from canonical byte representation.
    /// This is the ONLY way to create a Fingerprint.
    pub fn compute(data: &amp;[u8]) -&gt; Self {
        Self(sha256(data))
    }
    pub fn as_bytes(&amp;self) -&gt; &amp;[u8; 32] { &amp;self.0 }
}
<span class="boring">}</span></code></pre>
<p><strong><code>VersionConstraint</code> must be a parsed enum, not a string:</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// CORRECT — parsed at ingestion; invalid syntax is a type error thereafter
pub enum VersionConstraint {
    Exact(PackageVersion),
    Compatible(PackageVersion),            // ^1.2.3 = &gt;=1.2.3, &lt;2.0.0
    Range { min: PackageVersion, max: PackageVersion },
    GreaterOrEqual(PackageVersion),
}

// WRONG — string re-parsed everywhere; can silently contain invalid syntax
pub type VersionConstraint = String;
<span class="boring">}</span></code></pre>
<p><strong>Rationale:</strong> The audit identified <code>PlayerId</code> ↔ <code>SlotIndex</code> ↔ <code>AccountId</code> confusion as a critical bug class. A function accepting <code>(u32, u32, u64)</code> has no compile-time protection against argument swaps. Newtypes make this a type error. The extended set applies the same principle to timing (sub-tick vs tick), identity (fingerprints), content (versions, packages), and campaign structure (missions, outcomes).</p>
<p><strong>Enforcement:</strong> <code>clippy::disallowed_types</code> bans <code>u32</code> and <code>u64</code> in function signatures within <code>ic-sim</code> (exceptions via <code>#[allow]</code> with justification comment). See <code>16-CODING-STANDARDS.md</code> § “Type-Safety Coding Standards” for the full clippy configuration and code review checklists covering all newtypes listed here.</p>
<h3 id="fixed-point-math-policy-no-f32f64-in-ic-sim"><a class="header" href="#fixed-point-math-policy-no-f32f64-in-ic-sim">Fixed-Point Math Policy: No f32/f64 in ic-sim</a></h3>
<p>This is the project’s most fundamental type-safety invariant (Invariant #1). All game logic in <code>ic-sim</code> uses fixed-point math (<code>i32</code>/<code>i64</code> with known scale). IEEE 754 floats are banned from the simulation because they produce platform-dependent results (x87 vs SSE, FMA contraction, different rounding modes), making deterministic cross-platform replay impossible.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// CORRECT — fixed-point with known scale (e.g., 1024 = 1.0)
pub struct FixedPoint(i32);

// WRONG — float non-determinism breaks cross-platform replay
fn move_unit(pos: &amp;mut f32, speed: f32) { *pos += speed; }
<span class="boring">}</span></code></pre>
<p><strong>Scope:</strong> <code>f32</code> and <code>f64</code> are banned in <code>ic-sim</code> only. They are permitted in:</p>
<ul>
<li><code>ic-game</code> / <code>ic-audio</code> — rendering, interpolation, audio volume (presentation-only)</li>
<li><code>ic-ui</code> — UI layout, display values, diagnostic overlays</li>
<li>Server-side infrastructure — matchmaking ratings, telemetry aggregation</li>
</ul>
<p><strong>Enforcement:</strong> <code>clippy::disallowed_types</code> bans <code>f32</code> and <code>f64</code> in the <code>ic-sim</code> crate. CI blocks on violations. Exceptions require <code>#[allow]</code> with a justification comment explaining why the float does not affect determinism.</p>
<p><strong>Rationale:</strong> The Source SDK 2013 study (<code>research/source-sdk-2013-source-study.md</code>) documents Source Engine’s runtime <code>IS_NAN()</code> checks and bit-level float comparison (<code>NetworkParanoidUnequal</code>) as evidence that float-based determinism is fundamentally unreliable. IC eliminates this class of bug entirely.</p>
<h3 id="deterministic-collection-policy-no-hashsethashmap-in-ic-sim"><a class="header" href="#deterministic-collection-policy-no-hashsethashmap-in-ic-sim">Deterministic Collection Policy: No HashSet/HashMap in ic-sim</a></h3>
<p><code>std::collections::HashSet</code> and <code>std::collections::HashMap</code> use randomized hashing (<code>RandomState</code>). Iteration order varies between runs, breaking determinism (Invariant #1).</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// CORRECT — deterministic alternatives
use std::collections::BTreeSet;
use std::collections::BTreeMap;
use indexmap::IndexMap;  // insertion-order deterministic

// WRONG — non-deterministic iteration order
use std::collections::HashSet;
use std::collections::HashMap;
<span class="boring">}</span></code></pre>
<p><strong>Exceptions:</strong></p>
<ul>
<li><code>ic-game</code> (render-side) may use <code>HashMap</code>/<code>HashSet</code> where iteration order doesn’t affect sim state</li>
<li><code>ic-net</code> may use <code>HashMap</code> for connection lookup tables (not replicated to sim)</li>
<li><code>ic-sim</code> may use <code>HashSet</code>/<code>HashMap</code> <strong>only</strong> for membership tests where the set is never iterated (requires <code>#[allow]</code> with justification)</li>
</ul>
<p><strong>Enforcement:</strong> <code>clippy::disallowed_types</code> in <code>ic-sim</code> crate’s <code>clippy.toml</code>. CI blocks on violations.</p>
<h3 id="typestate-policy-state-machines-use-types-not-enums"><a class="header" href="#typestate-policy-state-machines-use-types-not-enums">Typestate Policy: State Machines Use Types, Not Enums</a></h3>
<p>Any system with distinct states and restricted transitions must use the typestate pattern. Runtime enum matching for state transitions is a bug waiting to happen.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// CORRECT — typestate enforces valid transitions at compile time
pub struct Connection&lt;S: ConnectionState&gt; {
    inner: ConnectionInner,
    _state: PhantomData&lt;S&gt;,
}

pub struct Disconnected;
pub struct Handshaking;
pub struct Authenticated;
pub struct InGame;

impl Connection&lt;Disconnected&gt; {
    pub fn begin_handshake(self) -&gt; Connection&lt;Handshaking&gt; { ... }
}
impl Connection&lt;Handshaking&gt; {
    pub fn authenticate(self, cred: &amp;Credential) -&gt; Result&lt;Connection&lt;Authenticated&gt;, AuthError&gt; { ... }
}
impl Connection&lt;Authenticated&gt; {
    pub fn join_game(self, lobby: LobbyId) -&gt; Connection&lt;InGame&gt; { ... }
}

// WRONG — runtime enum allows invalid transitions
pub enum ConnectionState { Disconnected, Handshaking, Authenticated, InGame }
impl Connection {
    pub fn transition(&amp;mut self, to: ConnectionState) { self.state = to; } // any transition allowed!
}
<span class="boring">}</span></code></pre>
<p><strong>Applies to:</strong> Connection lifecycle, lobby state machine, game phase transitions, install wizard steps, Workshop package lifecycle, mod loading pipeline, and the following subsystem-specific lifecycles:</p>
<p><strong>WASM Instance Lifecycle (D005):</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct WasmLoading;
pub struct WasmReady;
pub struct WasmExecuting;
pub struct WasmTerminated;

pub struct WasmSandbox&lt;S&gt; {
    instance_id: WasmInstanceId,
    inner: WasmInstanceInner,
    _state: PhantomData&lt;S&gt;,
}

impl WasmSandbox&lt;WasmLoading&gt; {
    pub fn initialize(self) -&gt; Result&lt;WasmSandbox&lt;WasmReady&gt;, WasmLoadError&gt; { ... }
}
impl WasmSandbox&lt;WasmReady&gt; {
    pub fn execute(self, entry: &amp;str) -&gt; WasmSandbox&lt;WasmExecuting&gt; { ... }
}
impl WasmSandbox&lt;WasmExecuting&gt; {
    pub fn complete(self) -&gt; WasmSandbox&lt;WasmTerminated&gt; { ... }
}
// Cannot call execute() on WasmTerminated — it's a compile error.
<span class="boring">}</span></code></pre>
<p><strong>Workshop Package Install Lifecycle (D030):</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct PkgQueued;
pub struct PkgDownloading;
pub struct PkgVerifying;
pub struct PkgExtracted;

pub struct PackageInstall&lt;S&gt; {
    manifest: PackageManifest,
    _state: PhantomData&lt;S&gt;,
}

impl PackageInstall&lt;PkgDownloading&gt; {
    pub fn verify(self) -&gt; Result&lt;PackageInstall&lt;PkgVerifying&gt;, IntegrityError&gt; { ... }
}
impl PackageInstall&lt;PkgVerifying&gt; {
    pub fn extract(self) -&gt; Result&lt;PackageInstall&lt;PkgExtracted&gt;, ExtractionError&gt; { ... }
}
// Cannot call extract() on PkgDownloading — hash must be verified first.
<span class="boring">}</span></code></pre>
<p><strong>Campaign Mission Execution (D021):</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct MissionLoading;
pub struct MissionActive;
pub struct MissionCompleted;
pub struct MissionTransitioned;

pub struct MissionExecution&lt;S&gt; {
    mission_id: MissionId,
    _state: PhantomData&lt;S&gt;,
}

impl MissionExecution&lt;MissionActive&gt; {
    pub fn complete(self, outcome: OutcomeName) -&gt; MissionExecution&lt;MissionCompleted&gt; { ... }
}
impl MissionExecution&lt;MissionCompleted&gt; {
    pub fn transition(self) -&gt; MissionExecution&lt;MissionTransitioned&gt; { ... }
}
// Cannot complete a mission that is still loading.
<span class="boring">}</span></code></pre>
<p><strong>Balance Patch Application (D019):</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct PatchPending;
pub struct PatchValidated;
pub struct PatchApplied;

pub struct BalancePatch&lt;S&gt; {
    preset_id: PresetId,
    _state: PhantomData&lt;S&gt;,
}

impl BalancePatch&lt;PatchPending&gt; {
    pub fn validate(self) -&gt; Result&lt;BalancePatch&lt;PatchValidated&gt;, PresetError&gt; { ... }
}
impl BalancePatch&lt;PatchValidated&gt; {
    pub fn apply(self) -&gt; BalancePatch&lt;PatchApplied&gt; { ... }
}
// Cannot apply an unvalidated patch.
<span class="boring">}</span></code></pre>
<h3 id="capability-token-policy-mod-sandbox-uses-unforgeable-tokens"><a class="header" href="#capability-token-policy-mod-sandbox-uses-unforgeable-tokens">Capability Token Policy: Mod Sandbox Uses Unforgeable Tokens</a></h3>
<p>WASM and Lua mods access engine APIs through capability tokens — unforgeable proof-of-authorization values that the host creates and the mod cannot construct.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// Capability token for filesystem read access. Only the host can create this.
pub struct FsReadCapability {
    allowed_path: StrictPath&lt;PathBoundary&gt;,
    _private: (),  // prevents construction outside this module
}

/// Mod API: read a file (requires capability token)
pub fn read_file(cap: &amp;FsReadCapability, relative: &amp;str) -&gt; Result&lt;Vec&lt;u8&gt;, SandboxError&gt; {
    let full = cap.allowed_path.join(relative)?; // strict-path enforces boundary
    std::fs::read(full.as_ref()).map_err(SandboxError::Io)
}
<span class="boring">}</span></code></pre>
<p><strong>Rationale:</strong> Without capability tokens, a compromised or malicious mod can call any host function. With tokens, the host controls exactly what each mod can access. Token types are zero-sized at runtime — no overhead.</p>
<h3 id="direction-branded-messages-network-message-origin"><a class="header" href="#direction-branded-messages-network-message-origin">Direction-Branded Messages: Network Message Origin</a></h3>
<p>Messages from the client and messages from the server must be distinct types, even if they carry the same payload. This prevents a client-originated message from being mistaken for a server-authoritative message.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct FromClient&lt;T&gt;(pub T);
pub struct FromServer&lt;T&gt;(pub T);

// Server code accepts only FromClient messages
fn handle_order(msg: FromClient&lt;PlayerOrder&gt;) { ... }

// Client code accepts only FromServer messages
fn handle_state_update(msg: FromServer&lt;SimSnapshot&gt;) { ... }
<span class="boring">}</span></code></pre>
<h3 id="bounded-collections-no-unbounded-growth-in-sim-state"><a class="header" href="#bounded-collections-no-unbounded-growth-in-sim-state">Bounded Collections: No Unbounded Growth in Sim State</a></h3>
<p>Any collection in <code>ic-sim</code> that grows based on player input must have a compile-time or construction-time bound. Unbounded collections are a denial-of-service vector.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct BoundedVec&lt;T, const N: usize&gt; {
    inner: Vec&lt;T&gt;,
}

impl&lt;T, const N: usize&gt; BoundedVec&lt;T, N&gt; {
    pub fn push(&amp;mut self, item: T) -&gt; Result&lt;(), CapacityExceeded&gt; {
        if self.inner.len() &gt;= N {
            return Err(CapacityExceeded);
        }
        self.inner.push(item);
        Ok(())
    }
}
<span class="boring">}</span></code></pre>
<p><strong>Applies to:</strong> Order queues, chat message buffers, marker lists, waypoint sequences, build queues, group assignments.</p>
<h3 id="hash-type-distinction-synchash-vs-statehash"><a class="header" href="#hash-type-distinction-synchash-vs-statehash">Hash Type Distinction: SyncHash vs StateHash</a></h3>
<p>The netcode uses two different hash widths for different purposes. Using the wrong one silently produces incorrect verification results.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// Fast sync hash: 64-bit truncation for per-tick live comparison.
/// Used in the desync detection hot path (every sync frame).
pub struct SyncHash(u64);

/// Full state hash: SHA-256 for replay signing, snapshot verification,
/// and Merkle tree leaves. Used in cold paths (save, replay, debug).
pub struct StateHash([u8; 32]);
<span class="boring">}</span></code></pre>
<p><strong>Rationale:</strong> The netcode defines a “fast sync hash” (<code>u64</code>) for per-tick RNG comparison and a “full SHA-256” for Merkle tree leaves and replay signing (see <code>03-NETCODE.md</code>). A bare <code>u64</code> where <code>[u8; 32]</code> was expected (or vice versa) silently produces incorrect verification. Distinct types prevent confusion.</p>
<p><strong>Enforcement:</strong> No implicit conversion between <code>SyncHash</code> and <code>StateHash</code>. Truncation or expansion requires an explicit, named function.</p>
<h3 id="verified-wrapper-policy-post-verification-data"><a class="header" href="#verified-wrapper-policy-post-verification-data">Verified Wrapper Policy: Post-Verification Data</a></h3>
<p>Many security bugs stem from processing data that was “supposed to” have been verified but was not. The <code>Verified&lt;T&gt;</code> wrapper makes verification status visible in the type system.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// Wrapper that proves data has passed a specific verification step.
/// Cannot be constructed without going through the verification function.
pub struct Verified&lt;T&gt; {
    inner: T,
    _private: (),
}

impl&lt;T&gt; Verified&lt;T&gt; {
    /// Only verification functions should call this.
    pub(crate) fn new_verified(inner: T) -&gt; Self {
        Self { inner, _private: () }
    }
    pub fn inner(&amp;self) -&gt; &amp;T { &amp;self.inner }
    pub fn into_inner(self) -&gt; T { self.inner }
}
<span class="boring">}</span></code></pre>
<p><strong>Applies to:</strong></p>
<ul>
<li><code>Verified&lt;SignedCredentialRecord&gt;</code> — an SCR whose Ed25519 signature has been checked (D052)</li>
<li><code>Verified&lt;ManifestHash&gt;</code> — a Workshop manifest whose content hash matches the declared hash (D030)</li>
<li><code>Verified&lt;ReplaySignature&gt;</code> — a replay whose signature chain has been validated</li>
<li><code>ValidatedOrder</code> (type alias for <code>Verified&lt;PlayerOrder&gt;</code>) — an order that passed all validation checks (D012)</li>
</ul>
<p><strong>Rationale:</strong> A function accepting <code>Verified&lt;SignedCredentialRecord&gt;</code> cannot receive an unverified SCR without a compile error. The <code>new_verified</code> constructor is <code>pub(crate)</code> to prevent external construction — only the actual verification function in the same crate can wrap a value.</p>
<p><strong>Enforcement:</strong> Functions in <code>ic-sim</code> that consume verified data must accept <code>Verified&lt;T&gt;</code>, not bare <code>T</code>. Code review must check that <code>new_verified()</code> is called only inside actual verification logic (see <code>16-CODING-STANDARDS.md</code> § “Verified Wrapper Review”).</p>
<h3 id="bounded-cvar-policy-console-variables-with-type-enforced-ranges"><a class="header" href="#bounded-cvar-policy-console-variables-with-type-enforced-ranges">Bounded Cvar Policy: Console Variables with Type-Enforced Ranges</a></h3>
<p>The console variable system (D058) allows runtime configuration within defined ranges. Without type enforcement, any code path that sets a cvar can bypass the range check.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// A console variable with compile-time or construction-time bounds.
/// Setting a value outside bounds clamps to the nearest bound.
pub struct BoundedCvar&lt;T: Ord + Copy&gt; {
    value: T,
    min: T,
    max: T,
    _private: (),
}

impl&lt;T: Ord + Copy&gt; BoundedCvar&lt;T&gt; {
    pub fn new(default: T, min: T, max: T) -&gt; Self {
        let clamped = default.max(min).min(max);
        Self { value: clamped, min, max, _private: () }
    }
    pub fn set(&amp;mut self, value: T) {
        self.value = value.max(self.min).min(self.max);
    }
    pub fn get(&amp;self) -&gt; T { self.value }
}
<span class="boring">}</span></code></pre>
<p><strong>Rationale:</strong> <code>BoundedCvar</code> makes out-of-range values unrepresentable after construction. All cvars with documented valid ranges (e.g., <code>net.simulate_latency</code> 0–500ms, <code>net.desync_debug_level</code> 0–2) must use this type.</p>
<h3 id="chat-message-scope-branding"><a class="header" href="#chat-message-scope-branding">Chat Message Scope Branding</a></h3>
<p>In RTS games, team chat vs all-chat is security-critical. A team message accidentally broadcast to all players leaks strategic information.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// Chat scope marker types (zero-sized).
pub struct TeamScope;
pub struct AllScope;
pub struct WhisperScope;

/// A chat message branded with its delivery scope.
pub struct ChatMessage&lt;S&gt; {
    pub sender: PlayerId,
    pub text: SanitizedString,
    _scope: PhantomData&lt;S&gt;,
}

// Team chat handler accepts ONLY team messages
fn handle_team_chat(msg: ChatMessage&lt;TeamScope&gt;) { ... }

// All-chat handler accepts ONLY all-chat messages
fn handle_all_chat(msg: ChatMessage&lt;AllScope&gt;) { ... }
<span class="boring">}</span></code></pre>
<p><strong>Rationale:</strong> Branding the message type with its scope makes routing errors a compile-time type mismatch. Conversion between scopes requires an explicit, auditable function call. This extends the direction-branded messages pattern (see <code>FromClient&lt;T&gt;</code> / <code>FromServer&lt;T&gt;</code> above) to chat delivery scope.</p>
<h3 id="validated-construction-policy-invariant-checked-types"><a class="header" href="#validated-construction-policy-invariant-checked-types">Validated Construction Policy: Invariant-Checked Types</a></h3>
<p>Some types have invariants that cannot be encoded in const generics but must hold for correctness. The “validated construction” pattern puts the check at the only place values are created, making invalid instances unconstructible.</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// A campaign graph that has been validated as a DAG at construction time.
/// Cannot be constructed without passing validation.
pub struct CampaignGraph {
    missions: BTreeMap&lt;MissionId, MissionDef&gt;,
    edges: Vec&lt;(MissionId, OutcomeName, MissionId)&gt;,
    _private: (),  // prevents construction outside this module
}

impl CampaignGraph {
    /// Validate and construct. Returns error if graph contains cycles,
    /// unreachable missions, or dangling outcome references.
    pub fn new(
        missions: BTreeMap&lt;MissionId, MissionDef&gt;,
        edges: Vec&lt;(MissionId, OutcomeName, MissionId)&gt;,
    ) -&gt; Result&lt;Self, CampaignGraphError&gt; {
        Self::validate_dag(&amp;missions, &amp;edges)?;
        Self::validate_reachability(&amp;missions, &amp;edges)?;
        Self::validate_references(&amp;missions, &amp;edges)?;
        Ok(Self { missions, edges, _private: () })
    }
}
<span class="boring">}</span></code></pre>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// An order budget with valid invariants (tokens &lt;= burst_cap, refill &gt; 0).
pub struct OrderBudget {
    tokens: u32,
    refill_per_tick: u32,
    burst_cap: u32,
    _private: (),
}

impl OrderBudget {
    pub fn new(refill_per_tick: u32, burst_cap: u32) -&gt; Result&lt;Self, InvalidBudget&gt; {
        if refill_per_tick == 0 || burst_cap == 0 {
            return Err(InvalidBudget);
        }
        Ok(Self { tokens: burst_cap, refill_per_tick, burst_cap, _private: () })
    }

    pub fn try_spend(&amp;mut self) -&gt; Result&lt;(), BudgetExhausted&gt; {
        if self.tokens == 0 { return Err(BudgetExhausted); }
        self.tokens -= 1;
        Ok(())
    }

    pub fn refill(&amp;mut self) {
        self.tokens = (self.tokens + self.refill_per_tick).min(self.burst_cap);
    }
}
<span class="boring">}</span></code></pre>
<p><strong>Rationale:</strong> <code>CampaignGraph</code> guarantees DAG structure, full reachability, and valid references at construction time — no downstream code needs to re-validate. <code>OrderBudget</code> guarantees <code>tokens &lt;= burst_cap</code> and <code>refill &gt; 0</code> — the rate limiter cannot be constructed in a broken state.</p>
<p><strong>Applies to:</strong> <code>CampaignGraph</code>, <code>OrderBudget</code>, <code>BalancePreset</code> (no circular inheritance), <code>WeatherSchedule</code> (non-empty cycle list, valid intensity ranges), <code>DependencyGraph</code> (no cycles, all references resolve).</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../architecture/multi-game.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="../03-NETCODE.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../architecture/multi-game.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="../03-NETCODE.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr-ef4e11c1.min.js"></script>
        <script src="../mark-09e88c2c.min.js"></script>
        <script src="../searcher-c2a407aa.js"></script>

        <script src="../clipboard-1626706a.min.js"></script>
        <script src="../highlight-abc7f01d.js"></script>
        <script src="../book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
