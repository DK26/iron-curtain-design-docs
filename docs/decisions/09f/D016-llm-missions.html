<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>D016 — LLM Missions - Iron Curtain — Design Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Design docs for a Rust-native Red Alert RTS engine">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon-de23e50b.svg">
        <link rel="shortcut icon" href="../../favicon-8114d1fc.png">
        <link rel="stylesheet" href="../../css/variables-8adf115d.css">
        <link rel="stylesheet" href="../../css/general-2459343d.css">
        <link rel="stylesheet" href="../../css/chrome-ae938929.css">
        <link rel="stylesheet" href="../../css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="../../highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="../../tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="../../ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../../searchindex-245f6587.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc-0698f107.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">Iron Curtain — Design Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/DK26/iron-curtain-design-docs" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>
                        <a href="https://github.com/DK26/iron-curtain-design-docs/edit/main/src/decisions/09f/D016-llm-missions.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <span class=fa-svg id="git-edit-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M421.7 220.3l-11.3 11.3-22.6 22.6-205 205c-6.6 6.6-14.8 11.5-23.8 14.1L30.8 511c-8.4 2.5-17.5 .2-23.7-6.1S-1.5 489.7 1 481.2L38.7 353.1c2.6-9 7.5-17.2 14.1-23.8l205-205 22.6-22.6 11.3-11.3 33.9 33.9 62.1 62.1 33.9 33.9zM96 353.9l-9.3 9.3c-.9 .9-1.6 2.1-2 3.4l-25.3 86 86-25.3c1.3-.4 2.5-1.1 3.4-2l9.3-9.3H112c-8.8 0-16-7.2-16-16V353.9zM453.3 19.3l39.4 39.4c25 25 25 65.5 0 90.5l-14.5 14.5-22.6 22.6-11.3 11.3-33.9-33.9-62.1-62.1L314.3 67.7l11.3-11.3 22.6-22.6 14.5-14.5c25-25 65.5-25 90.5 0z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h2 id="d016-llm-generated-missions-and-campaigns"><a class="header" href="#d016-llm-generated-missions-and-campaigns">D016: LLM-Generated Missions and Campaigns</a></h2>
<p><strong>Decision:</strong> Provide an optional LLM-powered mission generation system (Phase 7) via the <code>ic-llm</code> crate. Players bring their own LLM provider (BYOLLM) — the engine never ships or requires one. Every game feature works fully without an LLM configured.</p>
<p><strong>Rationale:</strong></p>
<ul>
<li>Transforms Red Alert from finite content to infinite content — for players who opt in</li>
<li>Generated output is standard YAML + Lua — fully editable, shareable, learnable</li>
<li>No other RTS (Red Alert or otherwise) offers this capability</li>
<li>LLM quality is sufficient for terrain layout, objective design, AI behavior scripting</li>
<li><strong>Strictly optional:</strong> <code>ic-llm</code> crate is optional, game works without it. No feature — campaigns, skirmish, multiplayer, modding, analytics — depends on LLM availability. The LLM enhances the experience; it never gates it</li>
</ul>
<p><strong>Scope:</strong></p>
<ul>
<li>Phase 7: single mission generation (terrain, objectives, enemy composition, triggers, briefing)</li>
<li>Phase 7: player-aware generation — LLM reads local SQLite (D034) for faction history, unit preferences, win rates, campaign roster state; injects player context into prompts for personalized missions, adaptive briefings, post-match commentary, coaching suggestions, and rivalry narratives</li>
<li>Phase 7: replay-to-scenario narrative generation — LLM reads gameplay event logs from replays to generate briefings, objectives, dialogue, and story context for scenarios extracted from real matches (see D038 § Replay-to-Scenario Pipeline)</li>
<li>Phase 7: <strong>generative campaigns</strong> — full multi-mission branching campaigns generated progressively as the player advances (see Generative Campaign Mode below)</li>
<li>Phase 7: <strong>generative media</strong> — AI-generated voice lines, music, sound FX for campaigns and missions via pluggable provider traits (see Generative Media Pipeline below)</li>
<li>Phase 7+ / Future: AI-generated cutscenes/video (depends on technology maturity)</li>
<li>Future: cooperative scenario design, community challenge campaigns</li>
</ul>
<blockquote>
<p><strong>Positioning note:</strong> LLM features are a quiet power-user capability, not a project headline. The primary single-player story is the hand-authored branching campaign system (D021), which requires no LLM and is genuinely excellent on its own merits. LLM generation is for players who want more content — it should never appear before D021 in marketing or documentation ordering. The word “AI” in gaming contexts attracts immediate hostility from a significant audience segment regardless of implementation quality. Lead with campaigns, reveal LLM as “also, modders and power users can use AI tools if they want.”</p>
</blockquote>
<blockquote>
<p><strong>Design goal — “One More Prompt.”</strong> The LLM features should create the same compulsion loop as Civilization’s “one more turn.” Every generated output — a mission debrief, a campaign twist, an exhibition match result — should leave the player wanting to try one more prompt to see what happens next. The generative campaign’s inspect-and-react loop (battle report → narrative hook → next mission) is the primary driver: the player doesn’t just want to play the next mission, they want to see what the LLM does with what just happened. The parameter space (faction, tone, story style, moral complexity, custom instructions) ensures that “one more prompt” also means “one more campaign” — each configuration produces a fundamentally different experience. This effect is the quiet retention engine for players who discover LLM features. See <code>01-VISION.md</code> § “The One More Prompt effect.”</p>
</blockquote>
<p><strong>Implementation approach:</strong></p>
<ul>
<li>LLM generates YAML map definition + Lua trigger scripts</li>
<li>Same format as hand-crafted missions — no special runtime</li>
<li>Validation pass ensures generated content is playable (valid unit types, reachable objectives)</li>
<li>Can use local models or API-based models (user choice)</li>
<li>Player data for personalization comes from local SQLite queries (read-only) — no data leaves the device unless the user’s LLM provider is cloud-based (BYOLLM architecture)</li>
</ul>
<p><strong>Bring-Your-Own-LLM (BYOLLM) architecture:</strong></p>
<ul>
<li><code>ic-llm</code> defines a <code>LlmProvider</code> trait — any backend that accepts a prompt and returns structured text</li>
<li>Built-in providers: OpenAI-compatible API, local Ollama/llama.cpp, Anthropic API</li>
<li>Users configure their provider in settings (API key, endpoint, model name)</li>
<li>The engine never ships or requires a specific model — the user chooses</li>
<li>Provider is a runtime setting, not a compile-time dependency</li>
<li>All prompts and responses are logged (opt-in) for debugging and sharing</li>
<li>Offline mode: pre-generated content works without any LLM connection</li>
</ul>
<p><strong>Prompt strategy is provider/model-specific (especially local vs cloud):</strong></p>
<ul>
<li>IC does <strong>not</strong> assume one universal prompt style works across all BYOLLM providers.</li>
<li>Local models (Ollama/llama.cpp and other self-hosted backends) often require different <strong>chat templates</strong>, tighter context budgets, simpler output schemas, and more staged task decomposition than frontier cloud APIs.</li>
<li>A “bad local model result” may actually be a <strong>prompt/template mismatch</strong> (wrong role formatting, unsupported tool-call pattern, too much context, overly complex schema).</li>
<li>D047 therefore introduces a provider/model-aware <strong>Prompt Strategy Profile</strong> system (auto-selected by capability probe, user-overridable) rather than a single hardcoded prompt preset for every backend.</li>
</ul>
<p><strong>Design rule:</strong> Prompt behavior = <code>provider transport + chat template + decoding settings + prompt strategy profile</code>, not just “the text of the prompt.”</p>
<h3 id="generative-campaign-mode"><a class="header" href="#generative-campaign-mode">Generative Campaign Mode</a></h3>
<p>The single biggest use of LLM generation: <strong>full branching campaigns created on the fly.</strong> The player picks a faction, adjusts parameters (or accepts defaults), and the LLM generates an entire campaign — backstory, missions, branching paths, persistent characters, and narrative arc — progressively as they play. Every generated campaign is a standard D021 campaign: YAML graph, Lua scripts, maps, briefings. Once generated, a campaign is <strong>fully playable without an LLM</strong> — generation is the creative act; playing is standard IC.</p>
<h4 id="how-it-works"><a class="header" href="#how-it-works">How It Works</a></h4>
<p><strong>Step 1 — Campaign Setup (one screen, defaults provided):</strong></p>
<p>The player opens “New Generative Campaign” from the main menu. If no LLM provider is configured, the button is still clickable — it opens a guidance panel: “Generative campaigns need an LLM provider to create missions. [Configure LLM Provider →] You can also browse pre-generated campaigns on the Workshop. [Browse Workshop →]” (see D033 § “UX Principle: No Dead-End Buttons”). Once an LLM is configured, the same button opens the configuration screen with defaults and an “Advanced” expander for fine-tuning:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Parameter</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><strong>Player faction</strong></td><td>(must pick)</td><td>Soviet, Allied, or a modded faction. Determines primary enemies and narrative allegiance.</td></tr>
<tr><td><strong>Campaign length</strong></td><td>24 missions</td><td>Total missions in the campaign arc. Configurable: 8 (short), 16 (medium), 24 (standard), 32+ (epic), or <strong>open-ended</strong> (no fixed count — campaign ends when victory conditions are met; see Open-Ended Campaigns below).</td></tr>
<tr><td><strong>Branching density</strong></td><td>Medium</td><td>How many branch points. Low = mostly linear with occasional forks. High = every mission has 2–3 outcomes leading to different paths.</td></tr>
<tr><td><strong>Tone</strong></td><td>Military thriller</td><td>Narrative style: military thriller, pulp action, dark/gritty, campy Cold War, espionage, or freeform text description.</td></tr>
<tr><td><strong>Story style</strong></td><td>C&amp;C Classic</td><td>Story structure and character voice. See “Story Style Presets” below. Options: C&amp;C Classic (default — over-the-top military drama with memorable personalities), Realistic Military, Political Thriller, Pulp Sci-Fi, Character Drama, or freeform text description. Note: “Military thriller” tone + “C&amp;C Classic” story style is the canonical pairing — they are complementary, not contradictory. C&amp;C IS a military thriller, played at maximum volume with camp and conviction (see 13-PHILOSOPHY.md § Principle 20). The tone governs atmospheric tension; the story style governs character voice and narrative structure.</td></tr>
<tr><td><strong>Difficulty curve</strong></td><td>Adaptive</td><td>Start easy, escalate. Options: flat, escalating, adaptive (adjusts based on player performance), brutal (hard from mission 1).</td></tr>
<tr><td><strong>Roster persistence</strong></td><td>Enabled</td><td>Surviving units carry forward (D021 carryover). Disabled = fresh forces each mission.</td></tr>
<tr><td><strong>Named characters</strong></td><td>3–5</td><td>How many recurring characters the LLM creates. Built using personality-driven construction (see Character Construction Principles below). These can survive, die, betray, return.</td></tr>
<tr><td><strong>Theater</strong></td><td>Random</td><td>European, Arctic, Desert, Pacific, Global (mixed), or a specific setting.</td></tr>
<tr><td><strong>Game module</strong></td><td>(current)</td><td>RA1, TD, or any installed game module.</td></tr>
</tbody>
</table>
</div>
<p><strong>Advanced parameters</strong> (hidden by default):</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Parameter</th><th>Default</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><strong>Mission variety targets</strong></td><td>Balanced</td><td>Distribution of mission types: assault, defense, stealth, escort, naval, combined arms. The LLM aims for this mix but adapts based on narrative flow.</td></tr>
<tr><td><strong>Faction purity</strong></td><td>90%</td><td>Percentage of missions fighting the opposing faction. Remainder = rogue elements of your own faction, third parties, or storyline twists (civil war, betrayal missions).</td></tr>
<tr><td><strong>Resource level</strong></td><td>Standard</td><td>Starting resources per mission. Scarce = more survival-focused. Abundant = more action-focused.</td></tr>
<tr><td><strong>Weather variation</strong></td><td>Enabled</td><td>LLM introduces weather changes across the campaign arc (D022). Arctic campaign starts mild, ends in blizzard.</td></tr>
<tr><td><strong>Workshop resources</strong></td><td>Configured sources</td><td>Which Workshop sources (D030) the LLM can pull assets from (maps, terrain packs, music, voice lines). Only resources with <code>ai_usage: Allow</code> are eligible.</td></tr>
<tr><td><strong>Custom instructions</strong></td><td>(empty)</td><td>Freeform text the player adds to every prompt. “Include lots of naval missions.” “Make Tanya a villain.” “Based on actual WW2 Eastern Front operations.”</td></tr>
<tr><td><strong>Moral complexity</strong></td><td>Low</td><td>How often the LLM generates tactical dilemmas with no clean answer, and how much character personality drives the fallout. Low = straightforward objectives. Medium = occasional trade-offs with character consequences. High = genuine moral weight with long-tail consequences across missions. See “Moral Complexity Parameter” under Extended Generative Campaign Modes.</td></tr>
<tr><td><strong>Victory conditions</strong></td><td>(fixed length only)</td><td>For open-ended campaigns: a set of conditions that define campaign victory. Examples: “Eliminate General Morrison,” “Capture all three Allied capitals,” “Survive 30 missions.” The LLM works toward these conditions narratively — building tension, creating setbacks, escalating stakes — and generates the final mission when conditions are ripe. Ignored when campaign length is fixed.</td></tr>
</tbody>
</table>
</div>
<p>The player clicks “Generate Campaign” — the LLM produces the campaign skeleton before the first mission starts (typically 10–30 seconds depending on provider).</p>
<p><strong>Step 1b — Natural Language Campaign Intent (optional, recommended):</strong></p>
<p>The configuration screen above works. But most players don’t think in parameters — they think in stories. A player’s mental model is “Soviet campaign where I’m a disgraced colonel trying to redeem myself on the Eastern Front,” not “faction=soviet, tone=realistic_military, difficulty_curve=escalating, theater=snow.”</p>
<p>The system supports <strong>two entry paths</strong> to the same pipeline:</p>
<pre><code>Path A (structured — current):
  Configuration screen → fill params → "Generate Campaign"

Path B (natural language — new):
  "Describe your campaign" text box → Intent Interpreter →
  pre-filled configuration screen → user reviews/adjusts → "Generate Campaign"
</code></pre>
<p>Path B feeds into Path A. The user’s natural language description <strong>pre-fills</strong> the same <code>CampaignParameters</code> struct, then shows the structured configuration screen with inferred values highlighted (subtle “inferred” badge). The user can review, override anything, or just click “Generate Campaign” immediately if the inferences look right.</p>
<p><strong>The “Describe Your Campaign” text area</strong> appears at the top of the “New Generative Campaign” screen, above the structured parameters. It’s prominent but never required — a “Skip to manual configuration” link is always visible. Players who prefer clicking dropdowns use Path A directly. Players who prefer storytelling type a description and let the system figure out the details.</p>
<p><strong>The Intent Interpreter</strong> is a dedicated, lightweight LLM call (separate from skeleton generation) that takes the user’s natural language and outputs structured parameter inferences with confidence scores:</p>
<pre><code class="language-yaml"># User input: "Soviet campaign where you're a disgraced colonel
#  trying to redeem yourself on the Eastern Front"
#
# Intent Interpreter output:
inferred_parameters:
  faction: { value: "soviet", confidence: 1.0, source: "explicit" }
  tone: { value: "realistic_military", confidence: 0.8, source: "inferred: 'disgraced colonel' + 'redeem' → serious military drama" }
  story_style: { value: "character_drama", confidence: 0.7, source: "inferred: redemption arc = character-driven narrative" }
  difficulty_curve: { value: "escalating", confidence: 0.8, source: "inferred: redemption = start weak, earn power back" }
  theater: { value: "snow", confidence: 0.7, source: "inferred: 'Eastern Front' → snow/temperate Eastern Europe" }
  campaign_length: { value: 24, confidence: 0.5, source: "default — no signal from input" }
  moral_complexity: { value: "medium", confidence: 0.7, source: "inferred: redemption arc implies moral stakes" }
  roster_persistence: { value: true, confidence: 0.8, source: "inferred: persistent squad builds attachment for character drama" }
  named_character_count: { value: 4, confidence: 0.6, source: "default, nudged up for character-driven style" }
  mission_variety: { value: "defense_heavy", confidence: 0.7, source: "inferred: start desperate → transition to offensive" }
  resource_level: { value: "scarce", confidence: 0.7, source: "inferred: disgraced = under-resourced, proving worth" }

  # Narrative seeds — creative DNA that flows into skeleton generation
  narrative_seeds:
    protagonist_archetype: "disgraced officer seeking redemption through action"
    starting_situation: "stripped of rank/resources, given a suicide mission nobody expects to succeed"
    arc_shape: "fall → proving ground → earning trust → vindication or tragic failure"
    suggested_characters:
      - role: "skeptical superior who assigned the suicide mission"
        personality_hint: "doubts the protagonist but secretly hopes they succeed"
      - role: "loyal NCO who followed the colonel into disgrace"
        personality_hint: "believes in the colonel when no one else does"
      - role: "enemy commander who remembers the protagonist's former reputation"
        personality_hint: "respects the protagonist, which makes the conflict personal"
    thematic_tensions:
      - "redemption vs. revenge — does the colonel fight to be restored, or to prove everyone wrong?"
      - "obedience vs. initiative — following the orders that disgraced you, or doing what's right this time?"
</code></pre>
<p><strong>Why two outputs?</strong> Some of the user’s intent maps to <code>CampaignParameters</code> fields (faction, tone, difficulty) — these pre-fill the structured UI. The rest maps to <strong>narrative seeds</strong> — creative guidance that doesn’t have a dropdown equivalent. Narrative seeds flow directly into the skeleton generation prompt (Step 2), enriching the campaign’s creative DNA beyond what parameters alone can express.</p>
<p><strong>The design principle: great defaults, not hidden magic.</strong> The Intent Interpreter’s inferences are always visible and overridable. The structured configuration screen shows exactly what was inferred and why (tooltips on inferred badges: “Inferred from ‘Eastern Front’ in your description”). Nothing is locked. The user can change “snow” to “desert” if they want an Eastern Front campaign in North Africa. The system’s job is to provide the best starting point so most users just click “Generate.”</p>
<p><strong>Override priority</strong> (when natural language and structured parameters conflict):</p>
<pre><code>1. Explicit structured parameter (user clicked/typed in the config UI)     — ALWAYS wins
2. Explicit natural language instruction ("make it brutal", "lots of naval") — high confidence
3. Inferred from narrative context ("redemption arc" → escalating difficulty) — medium confidence
4. Story style preset defaults (C&amp;C Classic implies military thriller tone)   — low confidence
5. Global defaults (the Default column in the parameter tables above)         — fallback
</code></pre>
<p>When a conflict arises — user says “Eastern Front” (implying land warfare) but also “include naval missions” (explicit override) — explicit instruction (#2) beats inference (#3). The UI can show this: <code>mission_variety: naval_heavy (from "include naval missions")</code> with the original inference struck through.</p>
<p><strong>Single mission mode</strong> uses the same Intent Interpreter. A user types “desperate defense on a frozen river, start with almost nothing, hold out until reinforcements arrive” and the system infers: theater=snow, mission_type=defense/survival, resources=scarce, difficulty=hard, a timed reinforcement trigger, narrative=desperate last stand. Same two-path pattern: natural language → pre-filled mission parameters → review → generate.</p>
<p><strong>Inference heuristic grounding:</strong> The Intent Interpreter’s prompt includes a reference table mapping common natural language signals to parameter adjustments (see <code>research/llm-generation-schemas.md</code> § 13 for the complete table and prompt template). This keeps inferences consistent across LLM providers — the heuristics are documented guidance, not provider-specific emergent behavior.</p>
<p><strong>Rust type definitions:</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// Output of the Intent Interpreter — a lightweight LLM call that converts
/// natural language campaign descriptions into structured parameters.
pub struct IntentInterpretation {
    /// Inferred values for CampaignParameters fields, with confidence scores.
    pub inferred_params: HashMap&lt;String, InferredValue&gt;,
    /// Creative guidance for skeleton generation — doesn't map to CampaignParameters.
    pub narrative_seeds: Vec&lt;NarrativeSeed&gt;,
    /// The original user input, preserved for the skeleton prompt.
    pub raw_description: String,
}

pub struct InferredValue {
    pub value: serde_json::Value,  // the inferred parameter value
    pub confidence: f32,           // 0.0-1.0
    pub source: InferenceSource,   // why this was inferred
    pub explanation: String,       // human-readable: "Inferred from 'Eastern Front'"
}

pub enum InferenceSource {
    Explicit,       // user directly stated it ("Soviet campaign")
    Inferred,       // derived from narrative context ("redemption" → escalating)
    Default,        // no signal — using global default
}

/// Narrative guidance that enriches skeleton generation beyond CampaignParameters.
pub struct NarrativeSeed {
    pub seed_type: NarrativeSeedType,
    pub content: String,
    pub related_characters: Vec&lt;String&gt;,
}

pub enum NarrativeSeedType {
    ProtagonistArchetype,    // "disgraced officer seeking redemption"
    StartingSituation,       // "given a suicide mission nobody expects to succeed"
    ArcShape,                // "fall → proving ground → vindication"
    CharacterSuggestion,     // "loyal NCO who believes in the colonel"
    ThematicTension,         // "redemption vs. revenge"
    NarrativeThread,         // "betrayal from within"
    GeographicContext,       // "Eastern Front, 1943"
    HistoricalInspiration,   // "based on the Battle of Kursk"
    ToneModifier,            // "but with dark humor"
    CustomConstraint,        // anything else the user specified
}
<span class="boring">}</span></code></pre>
<blockquote>
<p><strong>Cross-reference:</strong> The complete Intent Interpreter prompt template, inference heuristic grounding table, and narrative seed YAML schema are specified in <code>research/llm-generation-schemas.md</code> §§ 13–14.</p>
</blockquote>
<p><strong>Step 2 — Campaign Skeleton (generated once, upfront):</strong></p>
<p>Before the first mission, the LLM generates a <strong>campaign skeleton</strong> — the high-level arc that provides coherence across all missions:</p>
<pre><code class="language-yaml"># Generated campaign skeleton (stored in campaign save)
generative_campaign:
  id: gen_soviet_2026-02-14_001
  title: "Operation Iron Tide"           # LLM-generated title
  faction: soviet
  enemy_faction: allied
  theater: european
  length: 24
  
  # Narrative arc — the LLM's plan for the full campaign
  arc:
    act_1: "Establishing foothold in Eastern Europe (missions 1–8)"
    act_2: "Push through Central Europe, betrayal from within (missions 9–16)"
    act_3: "Final assault on Allied HQ, resolution (missions 17–24)"
  
  # Named characters (persistent across the campaign)
  characters:
    - name: "Colonel Petrov"
      role: player_commander
      allegiance: soviet           # current allegiance (can change mid-campaign)
      loyalty: 100                 # 0–100; below threshold triggers defection risk
      personality:
        mbti: ISTJ                 # Personality type — guides dialogue voice, decision patterns, stress reactions
        core_traits: ["pragmatic", "veteran", "distrusts politicians"]
        flaw: "Rigid adherence to doctrine; struggles when improvisation is required"
        desire: "Protect his soldiers and win the war with minimal casualties"
        fear: "Becoming the kind of officer who treats troops as expendable"
        speech_style: "Clipped military brevity. No metaphors. States facts, expects action."
      arc: "Loyal commander who questions orders in Act 2"
      hidden_agenda: null          # no secret agenda
    - name: "Lieutenant Sonya"
      role: intelligence_officer
      allegiance: soviet
      loyalty: 75                  # not fully committed — exploitable
      personality:
        mbti: ENTJ                 # Ambitious leader type — strategic, direct, will challenge authority
        core_traits: ["brilliant", "ambitious", "morally flexible"]
        flaw: "Believes the ends always justify the means; increasingly willing to cross lines"
        desire: "Power and control over the outcome of the war"
        fear: "Being a pawn in someone else's game — which is exactly what she is"
        speech_style: "Precise intelligence language with subtle manipulation. Plants ideas as questions."
      arc: "Provides intel briefings; has a hidden agenda revealed in Act 2"
      hidden_agenda: "secretly working for a rogue faction; will betray if loyalty drops below 40"
    - name: "Sergeant Volkov"
      role: field_hero
      allegiance: soviet
      loyalty: 100
      unit_type: commando
      personality:
        mbti: ESTP                 # Action-oriented operator — lives in the moment, reads the battlefield
        core_traits: ["fearless", "blunt", "fiercely loyal"]
        flaw: "Impulsive; acts first, thinks later; puts himself at unnecessary risk"
        desire: "To be in the fight. Peace terrifies him more than bullets."
        fear: "Being sidelined or deemed unfit for combat"
        speech_style: "Short, punchy, darkly humorous. Gallows humor under fire. Calls everyone by nickname."
      arc: "Accompanies the player; can die permanently"
      hidden_agenda: null
    - name: "General Morrison"
      role: antagonist
      allegiance: allied
      loyalty: 90
      personality:
        mbti: INTJ                 # Strategic mastermind — plans 10 moves ahead, emotionally distant
        core_traits: ["strategic genius", "ruthless", "respects worthy opponents"]
        flaw: "Arrogance — sees the player as a puzzle to solve, not a genuine threat, until it's too late"
        desire: "To prove the intellectual superiority of his approach to warfare"
        fear: "Losing to brute force rather than strategy — it would invalidate his entire philosophy"
        speech_style: "Calm, measured, laced with classical references. Never raises his voice. Compliments the player before threatening them."
      arc: "Allied commander; grows from distant threat to personal rival"
      hidden_agenda: "may offer a secret truce if the player's reputation is high enough"
  
  # Backstory and context (fed to the LLM for every subsequent mission prompt)
  backstory: |
    The year is 1953. The Allied peace treaty has collapsed after the
    assassination of the Soviet delegate at the Vienna Conference.
    Colonel Petrov leads a reformed armored division tasked with...
  
  # Planned branch points (approximate — adjusted as the player plays)
  branch_points:
    - mission: 4
      theme: "betray or protect civilian population"
    - mission: 8
      theme: "follow orders or defy command"
    - mission: 12
      theme: "Sonya's loyalty revealed"
    - mission: 16
      theme: "ally with rogue faction or destroy them"
    - mission: 20
      theme: "mercy or ruthlessness in final push"
</code></pre>
<p>The skeleton is a plan, not a commitment. The LLM adapts it as the player makes choices and encounters different outcomes. Act 2’s betrayal might happen in mission 10 or mission 14 depending on how the player’s story unfolds.</p>
<h4 id="character-construction-principles"><a class="header" href="#character-construction-principles">Character Construction Principles</a></h4>
<p>Generative campaigns live or die on character quality. A procedurally generated mission with a mediocre map is forgettable. A procedurally generated mission where a character you care about betrays you is unforgettable. The LLM’s system prompt includes explicit character construction guidance drawn from proven storytelling principles.</p>
<p><strong>Personality-first construction:</strong></p>
<p>Every named character is built from a personality model, not just a role label. The LLM assigns each character:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Field</th><th>Purpose</th><th>Example (Sonya)</th></tr>
</thead>
<tbody>
<tr><td><strong>MBTI type</strong></td><td>Governs decision-making patterns, stress reactions, communication style, and interpersonal dynamics</td><td>ENTJ — ambitious strategist who leads from the front and challenges authority</td></tr>
<tr><td><strong>Core traits</strong></td><td>3–5 adjectives that define the character’s public-facing personality</td><td>Brilliant, ambitious, morally flexible</td></tr>
<tr><td><strong>Flaw</strong></td><td>A specific weakness that creates dramatic tension and makes the character human</td><td>Believes the ends always justify the means</td></tr>
<tr><td><strong>Desire</strong></td><td>What the character wants — drives their actions and alliances</td><td>Power and control over the outcome of the war</td></tr>
<tr><td><strong>Fear</strong></td><td>What the character dreads — drives their mistakes and vulnerabilities</td><td>Being a pawn in someone else’s game</td></tr>
<tr><td><strong>Speech style</strong></td><td>Concrete voice direction so dialogue sounds like a person, not a bot</td><td>“Precise intelligence language with subtle manipulation”</td></tr>
</tbody>
</table>
</div>
<p>The MBTI type is not a horoscope — it’s a <strong>consistency framework</strong>. When the LLM generates dialogue, decisions, and reactions over 24 missions, the personality type keeps the character’s voice and behavior coherent. An ISTJ commander (Petrov) responds to a crisis differently than an ESTP commando (Volkov): Petrov consults doctrine, Volkov acts immediately. An ENTJ intelligence officer (Sonya) challenges the player’s plan head-on; an INFJ would express doubts obliquely. The LLM’s system prompt maps each type to concrete behavioral patterns:</p>
<ul>
<li><strong>Under stress:</strong> How the character cracks (ISTJ → becomes rigidly procedural; ESTP → reckless improvisation; ENTJ → autocratic overreach; INTJ → cold withdrawal)</li>
<li><strong>In conflict:</strong> How they argue (ST types cite facts; NF types appeal to values; TJ types issue ultimatums; FP types walk away)</li>
<li><strong>Loyalty shifts:</strong> What makes them stay or leave (SJ types value duty and chain of command; NP types value autonomy and moral alignment; NT types follow competence; SF types follow personal bonds)</li>
<li><strong>Dialogue voice:</strong> How they talk (specific sentence structures, vocabulary patterns, verbal tics, and what they never say)</li>
</ul>
<p><strong>The flaw/desire/fear triangle</strong> is the engine of character drama. Every meaningful character moment comes from the collision between what a character wants, what they’re afraid of, and the weakness that undermines them. Sonya <em>wants</em> control, <em>fears</em> being a pawn, and her <em>flaw</em> (ends justify means) is exactly what makes her vulnerable to becoming the thing she fears. The LLM uses this triangle to generate character arcs that feel authored, not random.</p>
<p><strong>Ensemble dynamics:</strong></p>
<p>The LLM doesn’t build characters in isolation — it builds a cast with deliberate personality contrasts. The system prompt instructs:</p>
<ul>
<li><strong>No duplicate MBTI types</strong> in the core cast (3–5 characters). Personality diversity creates natural interpersonal tension.</li>
<li><strong>Complementary and opposing pairs.</strong> Petrov (ISTJ, duty-bound) and Sonya (ENTJ, ambitious) disagree on <em>why</em> they’re fighting. Volkov (ESTP, lives-for-combat) and a hypothetical diplomat character (INFJ, seeks-peace) disagree on <em>whether</em> they should be. These pairings generate conflict without scripting.</li>
<li><strong>Role alignment — or deliberate misalignment.</strong> A character whose MBTI fits their role (ISTJ commander) is reliable. A character whose personality clashes with their role (ENFP intelligence officer — creative but unfocused) creates tension that pays off during crises.</li>
</ul>
<p><strong>Inter-character dynamics (MBTI interaction simulation):</strong></p>
<p>Characters don’t exist in isolation — they interact with each other, and those interactions are where the best drama lives. The LLM uses MBTI compatibility and tension patterns to simulate how characters relate, argue, collaborate, and clash <em>with each other</em> — not just with the player.</p>
<p>The system prompt maps personality pairings to interaction patterns:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Pairing dynamic</th><th>Example</th><th>Interaction pattern</th></tr>
</thead>
<tbody>
<tr><td><strong>NT + NT</strong> (strategist meets strategist)</td><td>Sonya (ENTJ) vs. Morrison (INTJ)</td><td>Intellectual respect masking mutual threat. Each anticipates the other’s moves. Conversations are chess games. If forced to cooperate, they’re devastatingly effective — but neither trusts the other to stay loyal.</td></tr>
<tr><td><strong>ST + NF</strong> (realist meets idealist)</td><td>Petrov (ISTJ) + diplomat (INFJ)</td><td>Petrov dismisses idealism as naïve; the diplomat sees Petrov as a blunt instrument. Under pressure, the diplomat’s moral clarity gives Petrov purpose he didn’t know he lacked.</td></tr>
<tr><td><strong>SP + SJ</strong> (improviser meets rule-follower)</td><td>Volkov (ESTP) + Petrov (ISTJ)</td><td>Volkov breaks protocol; Petrov enforces it. They argue constantly — but Volkov’s improvisation saves the squad when doctrine fails, and Petrov’s discipline saves them when improvisation gets reckless. Grudging mutual respect over time.</td></tr>
<tr><td><strong>TJ + FP</strong> (commander meets rebel)</td><td>Sonya (ENTJ) + a resistance leader (ISFP)</td><td>Sonya issues orders; the ISFP resists on principle. Sonya sees inefficiency; the ISFP sees tyranny. The conflict escalates until one of them is proven right — or both are proven wrong.</td></tr>
</tbody>
</table>
</div>
<p>The LLM generates inter-character dialogue — not just player-facing briefings — by simulating how each character would respond to the other’s personality. When Petrov delivers a mission debrief and Volkov interrupts with a joke, the LLM knows Petrov’s ISTJ response is clipped disapproval (“This isn’t the time, Sergeant”), not laughter. When Sonya proposes a morally questionable plan, the LLM knows which characters push back (NF types, SF types) and which support it (NT types, pragmatic ST types).</p>
<p>Over a 24-mission campaign, these simulated interactions create emergent relationships that the LLM tracks in narrative threads. A Petrov-Volkov friction arc might evolve from mutual irritation (missions 1–5) to grudging respect (missions 6–12) to genuine trust (missions 13–20) to devastating loss if one of them dies. None of this is scripted — it emerges from consistent MBTI-driven behavioral simulation applied to the campaign’s actual events.</p>
<p><strong>Story Style Presets:</strong></p>
<p>The <code>story_style</code> parameter controls how the LLM constructs both characters and narrative. The default — <strong>C&amp;C Classic</strong> — is designed to feel like an actual C&amp;C campaign:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Style</th><th>Character Voice</th><th>Narrative Feel</th><th>Inspired By</th></tr>
</thead>
<tbody>
<tr><td><strong>C&amp;C Classic</strong> (default)</td><td>Over-the-top military personalities. Commanders are larger-than-life. Villains monologue. Heroes quip under fire. Every character is memorable on first briefing.</td><td>Bombastic Cold War drama with genuine tension underneath. Betrayals. Superweapons. Last stands. The war is absurd and deadly serious at the same time.</td><td>RA1/RA2 campaigns, Tanya’s one-liners, Stalin’s theatrics, Yuri’s menace, Carville’s charm</td></tr>
<tr><td><strong>Realistic Military</strong></td><td>Understated professionalism. Characters speak in military shorthand. Emotions are implied, not stated.</td><td>Band of Brothers tone. The horror of war comes from what’s <em>not</em> said. Missions feel like operations, not adventures.</td><td>Generation Kill, Black Hawk Down, early Tom Clancy</td></tr>
<tr><td><strong>Political Thriller</strong></td><td>Everyone has an agenda. Dialogue is subtext-heavy. Trust is currency.</td><td>Slow-burn intrigue with sudden violence. The real enemy is often on your own side.</td><td>The Americans, Tinker Tailor Soldier Spy, Metal Gear Solid</td></tr>
<tr><td><strong>Pulp Sci-Fi</strong></td><td>Characters are archetypes turned to 11. Scientists are mad. Soldiers are grizzled. Villains are theatrical.</td><td>Experimental tech, dimension portals, time travel, alien artifacts. Camp embraced, not apologized for.</td><td>RA2 Yuri’s Revenge, C&amp;C Renegade, Starship Troopers</td></tr>
<tr><td><strong>Character Drama</strong></td><td>Deeply human characters with complex motivations. Relationships shift over the campaign.</td><td>The war is the backdrop; the story is about the people. Victory feels bittersweet. Loss feels personal.</td><td>The Wire, Battlestar Galatica, This War of Mine</td></tr>
</tbody>
</table>
</div>
<p>The default (C&amp;C Classic) exists because generative campaigns should feel like C&amp;C out of the box — not generic military fiction. Kane, Tanya, Yuri, and Carville are memorable because they’re <em>specific</em>: exaggerated personalities with distinctive voices, clear motivations, and dramatic reveals. The LLM’s system prompt for C&amp;C Classic includes explicit guidance: “Characters should be instantly recognizable from their first line of dialogue. A commander who speaks in forgettable military platitudes is a failed character. Every briefing should have a line worth quoting.”</p>
<p>Players who want a different narrative texture pick a different style — or write a freeform description. The <code>custom_instructions</code> field in Advanced parameters stacks with the style preset, so a player can select “C&amp;C Classic” and add “but make the villain sympathetic” for a hybrid tone.</p>
<p><strong>C&amp;C Classic — Narrative DNA (LLM System Prompt Guidelines):</strong></p>
<p>The “C&amp;C Classic” preset isn’t just a label — it’s a set of concrete generation rules derived from Principle #20 (Narrative Identity) in <a href="13-PHILOSOPHY.html">13-PHILOSOPHY.md</a>. When the LLM generates content in this style, its system prompt includes the following directives. These also serve as authoring guidelines for hand-crafted IC campaigns.</p>
<p><em>Tone rules:</em></p>
<ol>
<li><strong>Play everything straight.</strong> Never acknowledge absurdity. A psychic weapon is presented with the same military gravitas as a tank column. A trained attack dolphin gets a unit briefing, not a joke. The audience finds the humor because the world takes itself seriously — the moment the writing winks, the spell breaks.</li>
<li><strong>Escalate constantly.</strong> Every act raises the stakes. If mission 1 is “secure a bridge,” mission 8 should involve a superweapon, and mission 20 should threaten civilization. C&amp;C campaigns climb from tactical skirmish to existential crisis. Never de-escalate the macro arc, even if individual missions provide breathers.</li>
<li><strong>Make it quotable.</strong> Before finalizing any briefing, villain monologue, or unit voice line, apply the quotability test: would a player repeat this line to a friend? Would it work as a forum signature? If a line communicates information but isn’t memorable, rewrite it until it is.</li>
</ol>
<p><em>Character rules:</em></p>
<ol start="4">
<li><strong>First line establishes personality.</strong> A character’s introduction must immediately communicate who they are. Generic: “Commander, I’ll be your intelligence officer.” C&amp;C Classic: “Commander, I’ve read your file. Impressive — if any of it is true.” The personality is the introduction.</li>
<li><strong>Villains believe they’re right.</strong> C&amp;C villains — Kane, Yuri, Stalin — are compelling because they have genuine convictions. Kane isn’t evil for evil’s sake; he has a vision. Generate villains with philosophy, not just malice. The best villain dialogue makes the player pause and think “…he has a point.”</li>
<li><strong>Heroes have attitude, not perfection.</strong> Tanya isn’t a generic soldier — she’s cocky, impatient, and treats war like a playground. Carville isn’t a generic general — he’s folksy, irreverent, and drops Southern metaphors. Generate heroes with specific personality quirks that make them fun, not admirable.</li>
<li><strong>Betrayal is always personal.</strong> C&amp;C campaigns are built on betrayals — and the best ones hurt because you liked the character. If the campaign skeleton includes a betrayal arc, invest missions in making that character genuinely likeable first. A betrayal by a cipher is plot. A betrayal by someone you trusted is drama.</li>
</ol>
<p><em>World-building rules:</em></p>
<ol start="8">
<li><strong>Cold War as mythology, not history.</strong> Real Cold War events are raw material, not constraints. Einstein erasing Hitler, chronosphere technology, psychic amplifiers, orbital ion cannons — these are mythological amplifications of real anxieties. Generate world details that feel like Cold War fever dreams, not Wikipedia entries.</li>
<li><strong>Technology is dramatic, not realistic.</strong> Every weapon and structure should evoke a feeling. “GAP generator” isn’t just radar jamming — it’s shrouding your base in mystery. “Iron Curtain device” isn’t just invulnerability — it’s invoking the most famous metaphor of the Cold War era. Name technologies for dramatic impact, not technical accuracy.</li>
<li><strong>Factions are worldviews.</strong> Allied briefings should feel like Western military confidence: professional, optimistic, technologically superior, with an undercurrent of “we’re the good guys, right?” Soviet briefings should feel like revolutionary conviction: the individual serves the collective, sacrifice is glory, industrial might is beautiful. Generate faction-specific vocabulary, sentence structure, and emotional register — not just different unit names.</li>
</ol>
<p><em>Structural rules:</em></p>
<ol start="11">
<li><strong>Every mission has a “moment.”</strong> A moment is a scripted event that creates an emotional peak — a character’s dramatic entrance, a surprise betrayal, a superweapon firing, an unexpected ally, a desperate last stand. Missions without moments are forgettable. Generate at least one moment per mission, placed at a dramatically appropriate time (not always the climax — a mid-mission gut punch is often stronger).</li>
<li><strong>Briefings sell the mission.</strong> The briefing exists to make the player <em>want</em> to play the next mission. It should end with a question (explicit or implied) that the mission answers. “Can we take the beachhead before Morrison moves his armor south?” The player clicks “Deploy” because they want to find out.</li>
<li><strong>Debriefs acknowledge what happened.</strong> Post-mission debriefs should reference specific battle report outcomes: casualties, key moments, named units that survived or died. A debrief that says “Well done, Commander” regardless of outcome is a failed debrief. React to the player’s actual experience.</li>
</ol>
<blockquote>
<p><strong>Cross-reference:</strong> These rules derive from Principle #20 (Narrative Identity — Earnest Commitment, Never Ironic Distance) in <a href="13-PHILOSOPHY.html">13-PHILOSOPHY.md</a>, which establishes the seven C&amp;C narrative pillars. The rules above are the specific, actionable LLM directives and human authoring guidelines that implement those pillars for content generation. Other story style presets (Realistic Military, Political Thriller, etc.) have their own rule sets — but C&amp;C Classic is the default because it captures the franchise’s actual identity.</p>
</blockquote>
<p><strong>Step 3 — Post-Mission Inspection &amp; Progressive Generation:</strong></p>
<p>After each mission, the system collects a detailed <strong>battle report</strong> — not just “win/lose” but a structured account of what happened during gameplay. This report is the LLM’s primary input for generating the next mission. The LLM inspects what actually occurred and reacts to it against the backstory and campaign arc.</p>
<p><strong>What the battle report captures:</strong></p>
<ul>
<li><strong>Outcome:</strong> which named outcome the player achieved (victory variant, defeat variant)</li>
<li><strong>Casualties:</strong> units lost by type, how they died (combat, friendly fire, sacrificed), named characters killed or wounded</li>
<li><strong>Surviving forces:</strong> exact roster state — what the player has left to carry forward</li>
<li><strong>Buildings:</strong> structures built, destroyed, captured (especially enemy structures)</li>
<li><strong>Economy:</strong> resources gathered, spent, remaining; whether the player was resource-starved or flush</li>
<li><strong>Timeline:</strong> mission duration, how quickly objectives were completed, idle periods</li>
<li><strong>Territory:</strong> areas controlled at mission end, ground gained or lost</li>
<li><strong>Key moments:</strong> scripted triggers that fired (or didn’t), secondary objectives attempted, hidden objectives discovered</li>
<li><strong>Enemy state:</strong> what enemy forces survived, whether the enemy retreated or was annihilated, enemy structures remaining</li>
<li><strong>Player behavior patterns:</strong> aggressive vs. defensive play, tech rush vs. mass production, micromanagement intensity (from D042 event logs)</li>
</ul>
<p>The LLM receives this battle report alongside the campaign context and generates the next mission <strong>as a direct reaction to what happened.</strong> This is not “fill in the next slot in a pre-planned arc” — it’s “inspect the battlefield aftermath and decide what happens next in the story.”</p>
<p><strong>How inspection drives generation:</strong></p>
<ol>
<li><strong>Narrative consequences.</strong> The LLM sees the player barely survived mission 5 with 3 tanks and no base — the next mission isn’t a large-scale assault. It’s a desperate retreat, a scavenging mission, or a resistance operation behind enemy lines. The campaign <em>genre</em> shifts based on the player’s actual situation.</li>
<li><strong>Escalation and de-escalation.</strong> If the player steamrolled mission 3, the LLM escalates: the enemy regroups, brings reinforcements, changes tactics. If the player struggled, the LLM provides a breather mission — resupply, ally arrival, intelligence gathering.</li>
<li><strong>Story continuity.</strong> The LLM references specific events: “Commander, the bridge at Danzig we lost in the last operation — the enemy is using it to move armor south. We need it back.” Because the player actually lost that bridge.</li>
<li><strong>Character reactions.</strong> Named characters react to what happened. Volkov’s briefing changes if the player sacrificed civilians in the last mission. Sonya questions the commander’s judgment after heavy losses. Morrison taunts the player after a defensive victory: “You held the line. Impressive. It won’t save you.”</li>
<li><strong>Campaign arc awareness.</strong> The LLM knows where it is in the story — mission 8 of 24, end of Act 1 — and paces accordingly. Early missions establish, middle missions complicate, late missions resolve. But the <em>specific</em> complications come from the battle reports, not from a pre-written script.</li>
<li><strong>Mission number context.</strong> The LLM knows which mission number it’s generating relative to the total (or relative to victory conditions in open-ended mode). Mission 3/24 gets an establishing tone. Mission 20/24 gets climactic urgency. The story progression scales accordingly — the LLM won’t generate a “final confrontation” at mission 6 unless the campaign is 8 missions long.</li>
</ol>
<p><strong>Generation pipeline per mission:</strong></p>
<pre><code>┌─────────────────────────────────────────────────────────┐
│                 Mission Generation Pipeline              │
│                                                          │
│  Inputs:                                                 │
│  ├── Campaign skeleton (backstory, arc, characters)      │
│  ├── Campaign context (accumulated state — see below)    │
│  ├── Player's campaign state (roster, flags, path taken) │
│  ├── Last mission battle report (detailed telemetry)     │
│  ├── Player profile (D042 — playstyle, preferences)      │
│  ├── Campaign parameters (difficulty, tone, etc.)        │
│  ├── Victory condition progress (open-ended campaigns)   │
│  └── Available Workshop resources (maps, assets)         │
│                                                          │
│  LLM generates:                                          │
│  ├── Mission briefing (text, character dialogue)         │
│  ├── Map layout (YAML terrain definition)                │
│  ├── Objectives (primary + secondary + hidden)           │
│  ├── Enemy composition and AI behavior                   │
│  ├── Triggers and scripted events (Lua)                  │
│  ├── Named outcomes (2–4 per mission)                    │
│  ├── Carryover configuration (roster, equipment, flags)  │
│  ├── Weather schedule (D022)                             │
│  ├── Debrief per outcome (text, story flag effects)      │
│  ├── Cinematic sequences (mid-mission + pre/post)        │
│  ├── Dynamic music playlist + mood tags                  │
│  ├── Radar comm events (in-mission character dialogue)   │
│  ├── In-mission branching dialogues (RPG-style choices)  │
│  ├── EVA notification scripts (custom voice cues)        │
│  └── Intermission dialogue trees (between missions)      │
│                                                          │
│  Validation pass:                                        │
│  ├── All unit types exist in the game module             │
│  ├── All map references resolve                          │
│  ├── Objectives are reachable (pathfinding check)        │
│  ├── Lua scripts parse and sandbox-check                 │
│  ├── Named outcomes have valid transitions               │
│  └── Difficulty budget is within configured range        │
│                                                          │
│  Output: standard D021 mission node (YAML + Lua + map)   │
└─────────────────────────────────────────────────────────┘
</code></pre>
<p><strong>Step 4 — Campaign Context (the LLM’s memory):</strong></p>
<p>The LLM doesn’t have inherent memory between generation calls. The system maintains a <strong>campaign context</strong> document — a structured summary of everything that has happened — and includes it in every generation prompt. This is the bridge between “generate mission N” and “generate mission N+1 that makes sense.”</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// Accumulated campaign context — passed to the LLM with each generation request.
/// Grows over the campaign but is summarized/compressed to fit context windows.
#[derive(Serialize, Deserialize, Clone)]
pub struct GenerativeCampaignContext {
    /// The original campaign skeleton (backstory, arc, characters).
    pub skeleton: CampaignSkeleton,
    
    /// Campaign parameters chosen by the player at setup.
    pub parameters: CampaignParameters,
    
    /// Per-mission summary of what happened (compressed narrative, not raw state).
    pub mission_history: Vec&lt;MissionSummary&gt;,
    
    /// Current state of each named character — tracks everything the LLM needs
    /// to write them consistently and evolve their arc.
    pub character_states: Vec&lt;CharacterState&gt;,
    
    /// Active story flags and campaign variables (D021 persistent state).
    pub flags: HashMap&lt;String, Value&gt;,
    
    /// Current unit roster summary (unit counts by type, veterancy distribution,
    /// named units — not individual unit state, which is too granular for prompts).
    pub roster_summary: RosterSummary,
    
    /// Narrative threads the LLM is tracking (set up in skeleton, updated per mission).
    /// e.g., "Sonya's betrayal — foreshadowed in missions 3, 5; reveal planned for ~mission 12"
    pub active_threads: Vec&lt;NarrativeThread&gt;,
    
    /// Player tendency observations (from D042 profile + mission outcomes).
    /// e.g., "Player favors aggressive strategies, rarely uses naval units,
    /// tends to protect civilians"
    pub player_tendencies: Vec&lt;String&gt;,
    
    /// The planned arc position — where we are in the narrative structure.
    /// e.g., "Act 2, rising action, approaching midpoint crisis"
    pub arc_position: String,
}

pub struct MissionSummary {
    pub mission_number: u32,
    pub title: String,
    pub outcome: String,            // the named outcome the player achieved
    pub narrative_summary: String,  // 2-3 sentence LLM-generated summary
    pub key_events: Vec&lt;String&gt;,    // "Volkov killed", "bridge destroyed", "civilians saved"
    pub performance: MissionPerformance, // time, casualties, rating
}

/// Detailed battle telemetry collected after each mission.
/// This is what the LLM "inspects" to decide what happens next.
pub struct BattleReport {
    pub units_lost: HashMap&lt;String, u32&gt;,        // unit type → count lost
    pub units_surviving: HashMap&lt;String, u32&gt;,   // unit type → count remaining
    pub named_casualties: Vec&lt;String&gt;,           // named characters killed this mission
    pub buildings_destroyed: Vec&lt;String&gt;,        // player structures lost
    pub buildings_captured: Vec&lt;String&gt;,         // enemy structures captured
    pub enemy_forces_remaining: EnemyState,      // annihilated, retreated, regrouping, entrenched
    pub resources_gathered: i64,
    pub resources_spent: i64,
    pub mission_duration_seconds: u32,
    pub territory_control_permille: i32,          // 0–1000, fraction of map controlled (fixed-point, not f32)
    pub objectives_completed: Vec&lt;String&gt;,       // primary + secondary + hidden
    pub objectives_failed: Vec&lt;String&gt;,
    pub player_behavior: PlayerBehaviorSnapshot, // from D042 event classification
}

/// Tracks a named character's evolving state across the campaign.
/// The LLM reads this to write consistent, reactive character behavior.
pub struct CharacterState {
    pub name: String,
    pub status: CharacterStatus,         // Alive, Dead, MIA, Captured, Defected
    pub allegiance: String,              // current faction — can change mid-campaign
    pub loyalty: u8,                     // 0–100; LLM adjusts based on player actions
    pub relationship_to_player: i8,      // -100 to +100 (hostile → loyal)
    pub hidden_agenda: Option&lt;String&gt;,   // secret motivation; revealed when conditions trigger
    pub personality_type: String,        // MBTI code (e.g., "ISTJ") — personality consistency anchor
    pub speech_style: String,            // dialogue voice guidance for the LLM
    pub flaw: String,                    // dramatic weakness — drives character conflict
    pub desire: String,                  // what they want — drives their actions
    pub fear: String,                    // what they dread — drives their mistakes
    pub missions_appeared: Vec&lt;u32&gt;,     // which missions this character appeared in
    pub kills: u32,                      // if a field unit — combat track record
    pub notable_events: Vec&lt;String&gt;,     // "betrayed the player in mission 12", "saved Volkov in mission 7"
    pub current_narrative_role: String,  // "ally", "antagonist", "rival", "prisoner", "rogue"
}

pub enum CharacterStatus {
    Alive,
    Dead { mission: u32, cause: String },     // permanently gone
    MIA { since_mission: u32 },                // may return
    Captured { by_faction: String },           // rescue or prisoner exchange possible
    Defected { to_faction: String, mission: u32 }, // switched sides
    Rogue { since_mission: u32 },              // operating independently
}

// --- Types referenced above but not yet defined ---

/// The high-level campaign arc generated once at campaign start.
/// Mirrors the YAML skeleton shown above, but typed for Rust consumption.
pub struct CampaignSkeleton {
    pub id: String,                    // e.g. "gen_soviet_2026-02-14_001"
    pub title: String,
    pub faction: String,
    pub enemy_faction: String,
    pub theater: String,
    pub length: u32,                   // total missions (0 = open-ended)
    pub arc: CampaignArc,
    pub characters: Vec&lt;CharacterState&gt;,
    pub backstory: String,
    pub branch_points: Vec&lt;PlannedBranchPoint&gt;,
}

pub struct CampaignArc {
    pub act_1: String,                 // e.g. "Establishing foothold (missions 1-8)"
    pub act_2: String,
    pub act_3: String,
}

pub struct PlannedBranchPoint {
    pub mission: u32,                  // approximate mission number
    pub theme: String,                 // e.g. "betray or protect civilian population"
}

/// All player-chosen parameters from the campaign setup screen.
pub struct CampaignParameters {
    pub faction: String,
    pub campaign_length: u32,          // 8, 16, 24, 32, or 0 for open-ended
    pub branching_density: BranchingDensity,
    pub tone: String,                  // "military_thriller", "pulp_action", etc.
    pub story_style: String,           // "cnc_classic", "realistic_military", etc.
    pub difficulty_curve: DifficultyCurve,
    pub roster_persistence: bool,
    pub named_character_count: u8,     // 3-5 typically
    pub theater: String,               // "european", "arctic", "random", etc.
    pub game_module: String,
    // Advanced parameters
    pub mission_variety: String,       // "balanced", "assault_heavy", "defense_heavy"
    pub faction_purity_permille: u16,  // 0-1000, default 900
    pub resource_level: String,        // "scarce", "standard", "abundant"
    pub weather_variation: bool,
    pub custom_instructions: String,   // freeform player text
    pub moral_complexity: MoralComplexity,
    pub victory_conditions: Vec&lt;String&gt;, // for open-ended campaigns
}

pub enum BranchingDensity { Low, Medium, High }
pub enum DifficultyCurve { Flat, Escalating, Adaptive, Brutal }
pub enum MoralComplexity { Low, Medium, High }

/// Compressed roster state for LLM prompts — not individual unit state.
pub struct RosterSummary {
    pub unit_counts: HashMap&lt;String, u32&gt;,   // unit_type → count
    pub veterancy_distribution: [u32; 4],    // count at each vet level (0-3)
    pub named_units: Vec&lt;NamedUnitSummary&gt;,  // hero units, named vehicles, etc.
    pub total_value: i32,                    // approximate resource value of roster
    pub army_composition: String,            // "armor-heavy", "balanced", "infantry-focused"
}

pub struct NamedUnitSummary {
    pub name: String,
    pub unit_type: String,
    pub veterancy: u8,
    pub kills: u32,
    pub missions_survived: u32,
}

/// A story thread the LLM is tracking across the campaign.
pub struct NarrativeThread {
    pub id: String,                         // e.g. "sonya_betrayal"
    pub title: String,                      // "Sonya's hidden agenda"
    pub status: ThreadStatus,
    pub involved_characters: Vec&lt;String&gt;,   // character names
    pub foreshadowed_in: Vec&lt;u32&gt;,          // mission numbers where hints were dropped
    pub expected_resolution_mission: Option&lt;u32&gt;, // approximate planned reveal
    pub resolution_conditions: Vec&lt;String&gt;, // e.g. "loyalty &lt; 40", "player chose ruthless path"
    pub notes: String,                      // LLM's internal notes about this thread
}

pub enum ThreadStatus {
    Foreshadowing,   // hints being dropped
    Rising,          // tension building
    Active,          // thread is the current focus
    Resolved,        // payoff delivered
    Abandoned,       // player's choices made this thread irrelevant
}

/// Snapshot of player behavior from D042 event classification.
/// Informs LLM about how the player actually plays.
pub struct PlayerBehaviorSnapshot {
    pub aggression_score: u16,         // 0-1000, higher = more aggressive
    pub micro_intensity: u16,          // 0-1000, higher = more active micro
    pub tech_rush_tendency: u16,       // 0-1000, higher = prefers tech over mass
    pub expansion_rate: u16,           // 0-1000, higher = expands faster
    pub preferred_unit_mix: Vec&lt;(String, u16)&gt;, // (unit_type, usage_permille)
    pub risk_tolerance: u16,           // 0-1000, higher = takes more risks
    pub economy_focus: u16,            // 0-1000, higher = prioritizes economy
    pub naval_preference: u16,         // 0-1000, usage of naval units
    pub air_preference: u16,           // 0-1000, usage of air units
}

/// State of enemy forces at mission end.
pub enum EnemyState {
    Annihilated,                       // no enemy forces remain
    Retreated { direction: String },   // enemy pulled back
    Regrouping { estimated_strength: u16 }, // reforming for counter-attack
    Entrenched { position: String },   // holding defensive position
    Reinforcing { from: String },      // receiving reinforcements
}

/// Performance metrics for a completed mission.
pub struct MissionPerformance {
    pub time_seconds: u32,             // mission duration
    pub efficiency_score: u16,         // 0-1000, resources_destroyed / resources_spent
    pub units_lost: u32,
    pub units_killed: u32,
    pub structures_destroyed: u32,
    pub objectives_completion_rate: u16, // 0-1000, completed / total objectives
    pub territory_control_permille: u16, // 0-1000, map area controlled at end
    pub economy_rating: u16,           // 0-1000, resource management quality
    pub micro_rating: u16,             // 0-1000, unit preservation efficiency
}
<span class="boring">}</span></code></pre>
<blockquote>
<p><strong>Schema cross-reference:</strong> For the full concrete YAML output schemas (map layout, actor placement, objectives, outcomes, Lua triggers) and prompt templates used by the LLM to generate these structures, see <code>research/llm-generation-schemas.md</code>.</p>
</blockquote>
<p><strong>Context window management:</strong> The context grows with each mission. For long campaigns (24+ missions), the system compresses older mission summaries into shorter recaps (the LLM itself does this compression: “Summarize missions 1–8 in 200 words, retaining key plot points and character developments”). This keeps the prompt within typical context window limits (~8K–32K tokens for the campaign context, leaving room for the generation instructions and output).</p>
<h4 id="generated-output--standard-d021-campaigns"><a class="header" href="#generated-output--standard-d021-campaigns">Generated Output = Standard D021 Campaigns</a></h4>
<p>Everything the LLM generates is standard IC format:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Generated artifact</th><th>Format</th><th>Same as hand-crafted?</th></tr>
</thead>
<tbody>
<tr><td>Campaign graph</td><td>D021 YAML (<code>campaign.yaml</code>)</td><td>Identical</td></tr>
<tr><td>Mission maps</td><td>YAML map definition</td><td>Identical</td></tr>
<tr><td>Triggers / scripts</td><td>Lua (same API as <code>04-MODDING.md</code>)</td><td>Identical</td></tr>
<tr><td>Briefings</td><td>YAML text + character references</td><td>Identical</td></tr>
<tr><td>Named characters</td><td>D038 Named Characters format</td><td>Identical</td></tr>
<tr><td>Carryover config</td><td>D021 carryover modes</td><td>Identical</td></tr>
<tr><td>Story flags</td><td>D021 <code>flags</code></td><td>Identical</td></tr>
<tr><td>Intermissions</td><td>D038 Intermission Screens (briefing, debrief, roster mgmt, dialogue)</td><td>Identical</td></tr>
<tr><td>Cinematic sequences</td><td>D038 Cinematic Sequence module (YAML step list)</td><td>Identical</td></tr>
<tr><td>Dynamic music config</td><td>D038 Music Playlist module (mood-tagged track lists)</td><td>Identical</td></tr>
<tr><td>Radar comm events</td><td>D038 Video Playback / Radar Comm module</td><td>Identical</td></tr>
<tr><td>In-mission dialogues</td><td>D038 Dialogue Editor format (branching tree YAML)</td><td>Identical</td></tr>
<tr><td>EVA notifications</td><td>D038 EVA module (custom event → audio + text)</td><td>Identical</td></tr>
<tr><td>Ambient sound zones</td><td>D038 Ambient Sound Zone module</td><td>Identical</td></tr>
</tbody>
</table>
</div>
<p>This is the key architectural decision: <strong>there is no “generative campaign runtime.”</strong> The LLM is a content creation tool. Once a mission is generated, it’s a normal mission. Once the full campaign is complete (all 24 missions played), it’s a normal D021 campaign — playable by anyone, with or without an LLM.</p>
<h4 id="cinematic--narrative-generation"><a class="header" href="#cinematic--narrative-generation">Cinematic &amp; Narrative Generation</a></h4>
<p>A generated mission that plays well but <em>feels</em> empty — no mid-mission dialogue, no music shifts, no character moments, no dramatic reveals — is a mission that fails the C&amp;C fantasy. The original Red Alert didn’t just have good missions; it had missions where Stavros called you on the radar mid-battle, where the music shifted from ambient to Hell March when the tanks rolled in, where Tanya dropped a one-liner before breaching the base. That’s the standard.</p>
<p>The LLM generates the <strong>full cinematic layer</strong> for each mission — not just objectives and unit placement, but the narrative moments that make a mission feel authored:</p>
<p><strong>Mid-mission radar comm events:</strong></p>
<p>The classic C&amp;C moment: your radar screen flickers, a character’s face appears, they deliver intel or a dramatic line. The LLM generates these as D038 Radar Comm modules, triggered by game events:</p>
<pre><code class="language-yaml"># LLM-generated radar comm event
radar_comms:
  - id: bridge_warning
    trigger:
      type: unit_enters_region
      region: bridge_approach
      faction: player
    speaker: "General Stavros"
    portrait: stavros_concerned
    text: "Commander, our scouts report heavy armor at the bridge. Going in head-on would be suicide. There's a ford upstream — shallow enough for infantry."
    audio: null                        # TTS if available, silent otherwise
    display_mode: radar_comm           # replaces radar panel
    duration: 6.0                      # seconds, then radar returns
    
  - id: betrayal_reveal
    trigger:
      type: objective_complete
      objective: capture_command_post
    speaker: "Colonel Vasquez"
    portrait: vasquez_smug
    text: "Surprised to see me, Commander? Your General Stavros sold you out. These men now answer to me."
    display_mode: radar_comm
    effects:
      - set_flag: vasquez_betrayal
      - convert_units:                 # allied garrison turns hostile
          region: command_post_interior
          from_faction: player
          to_faction: enemy
    cinematic: true                    # brief letterbox + game pause for drama
</code></pre>
<p>The LLM decides <em>when</em> these moments should happen based on the mission’s narrative arc. A routine mission might have 1-2 comms (intel at start, debrief at end). A story-critical mission might have 5-6, including a mid-battle betrayal, a desperate plea for reinforcements, and a climactic confrontation.</p>
<p><strong>In-mission branching dialogues (RPG-style choices):</strong></p>
<p>Not just in intermissions — branching dialogue can happen <em>during</em> a mission. An NPC unit is reached, a dialogue triggers, the player makes a choice that affects the mission in real-time:</p>
<pre><code class="language-yaml">mid_mission_dialogues:
  - id: prisoner_interrogation
    trigger:
      type: unit_enters_region
      unit: tanya
      region: prison_compound
    pause_game: true                   # freezes game during dialogue
    tree:
      - speaker: "Captured Officer"
        portrait: captured_officer
        text: "I'll tell you everything — the mine locations, the patrol routes. Just let me live."
        choices:
          - label: "Talk. Now."
            effects:
              - reveal_shroud: minefield_region
              - set_flag: intel_acquired
            next: officer_cooperates
          - label: "We don't negotiate with the enemy."
            effects:
              - set_flag: officer_executed
              - adjust_character: { name: "Tanya", loyalty: -5 }
            next: tanya_reacts
          - label: "You'll come with us. Command will want to talk to you."
            effects:
              - spawn_unit: { type: prisoner_escort, region: prison_compound }
              - add_objective: { text: "Extract the prisoner to the LZ", type: secondary }
            next: extraction_added
      
      - id: officer_cooperates
        speaker: "Captured Officer"
        text: "The mines are along the ridge — I'll mark them on your map. And Commander... the base commander is planning to retreat at 0400."
        effects:
          - add_objective: { text: "Destroy the base before 0400", type: bonus, timer: 300 }
      
      - id: tanya_reacts
        speaker: "Tanya"
        portrait: tanya_cold
        text: "Your call, Commander. But he might have known something useful."
</code></pre>
<p>These are <strong>full D038 Dialogue Editor trees</strong> — the same format a human designer would create. The LLM generates them with awareness of the mission’s objectives, characters, and narrative context. The choices have <em>mechanical consequences</em> — revealing shroud, adding objectives, changing timers, spawning units, adjusting character loyalty.</p>
<p>The LLM can also generate <strong>consequence chains</strong> — a choice in Mission 5’s dialogue affects Mission 7’s setup (via story flags). “You spared the officer in Mission 5” → in Mission 7, that officer appears as an informant. The LLM tracks these across the campaign context.</p>
<p><strong>Dynamic music generation:</strong></p>
<p>The LLM doesn’t compose music — it curates it. For each mission, the LLM generates a D038 Music Playlist with mood-tagged tracks selected from the game module’s soundtrack and any Workshop music packs the player has installed:</p>
<pre><code class="language-yaml">music:
  mode: dynamic
  tracks:
    ambient:
      - fogger                         # game module default
      - workshop:cold-war-ost/frozen_fields   # from Workshop music pack
    combat:
      - hell_march
      - grinder
    tension:
      - radio_2
      - workshop:cold-war-ost/countdown
    victory:
      - credits
  
  # Scripted music cues (override dynamic system at specific moments)
  scripted_cues:
    - trigger: { type: timer, seconds: 0 }         # mission start
      track: fogger
      fade_in: 3.0
    - trigger: { type: objective_complete, objective: breach_wall }
      track: hell_march
      fade_in: 0.5                                  # hard cut — dramatic
    - trigger: { type: flag_set, flag: vasquez_betrayal }
      track: workshop:cold-war-ost/countdown
      fade_in: 1.0
</code></pre>
<p>The LLM picks tracks that match the mission’s tone. A desperate defense mission gets tense ambient tracks and hard-hitting combat music. A stealth infiltration gets quiet ambient and reserves the intense tracks for when the alarm triggers. The scripted cues tie specific music moments to narrative beats — the betrayal hits differently when the music shifts at exactly the right moment.</p>
<p><strong>Cinematic sequences:</strong></p>
<p>For high-stakes moments, the LLM generates full D038 Cinematic Sequences — multi-step scripted events combining camera movement, dialogue, music, unit spawns, and letterbox:</p>
<pre><code class="language-yaml">cinematic_sequences:
  - id: reinforcement_arrival
    trigger:
      type: objective_complete
      objective: hold_position_2_min
    skippable: true
    steps:
      - type: letterbox
        enable: true
        transition_time: 0.5
      - type: camera_pan
        from: player_base
        to: beach_landing
        duration: 3.0
        easing: ease_in_out
      - type: play_music
        track: hell_march
        fade_in: 0.5
      - type: spawn_units
        units: [medium_tank, medium_tank, medium_tank, apc, apc]
        position: beach_landing
        faction: player
        arrival: landing_craft          # visual: landing craft delivers them
      - type: dialogue
        speaker: "Admiral Kowalski"
        portrait: kowalski_grinning
        text: "The cavalry has arrived, Commander. Where do you want us?"
        duration: 4.0
      - type: camera_pan
        to: player_base
        duration: 2.0
      - type: letterbox
        enable: false
        transition_time: 0.5
</code></pre>
<p>The LLM generates these for <strong>key narrative moments</strong> — not every trigger. Typical placement:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Moment</th><th>Frequency</th><th>Example</th></tr>
</thead>
<tbody>
<tr><td><strong>Mission intro</strong></td><td>Every mission</td><td>Camera pan across the battlefield, briefing dialogue overlay</td></tr>
<tr><td><strong>Reinforcement arrival</strong></td><td>30-50% of missions</td><td>Camera shows troops landing/parachuting in, commander dialogue</td></tr>
<tr><td><strong>Mid-mission plot twist</strong></td><td>20-40% of missions</td><td>Betrayal reveal, surprise enemy, intel discovery</td></tr>
<tr><td><strong>Objective climax</strong></td><td>Key objectives only</td><td>Bridge explosion, base breach, hostage rescue</td></tr>
<tr><td><strong>Mission conclusion</strong></td><td>Every mission</td><td>Victory/defeat sequence, debrief comm</td></tr>
</tbody>
</table>
</div>
<p><strong>Intermission dialogue and narrative scenes:</strong></p>
<p>Between missions, the LLM generates intermission screens that go beyond simple briefings:</p>
<ul>
<li><strong>Branching dialogue with consequences</strong> — “General, do we reinforce the eastern front or push west?” The choice affects the next mission’s setup, available forces, or strategic position.</li>
<li><strong>Character moments</strong> — two named characters argue about strategy. The player’s choice affects their loyalty and relationship. A character whose advice is ignored too many times might defect (Campaign Event Patterns).</li>
<li><strong>Intel briefings</strong> — the player reviews intelligence gathered from the previous mission. What they focus on (or ignore) shapes the next mission’s surprises.</li>
<li><strong>Moral dilemmas</strong> — execute the prisoner or extract intel? Bomb the civilian bridge or let the enemy escape? These set story flags that ripple forward through the campaign.</li>
</ul>
<p>The LLM generates these as D038 Intermission Screens using the Dialogue template with Choice panels. Every choice links to a story flag; every flag feeds back into the LLM’s campaign context for future mission generation.</p>
<p><strong>EVA and ambient audio:</strong></p>
<p>The LLM generates custom EVA notification scripts — mission-specific voice cues beyond the default “Unit lost” / “Construction complete”:</p>
<pre><code class="language-yaml">custom_eva:
  - event: unit_enters_region
    region: minefield_zone
    text: "Warning: mines detected in this area."
    priority: high
    cooldown: 30                       # don't repeat for 30 seconds
    
  - event: building_captured
    building: enemy_radar
    text: "Enemy radar facility captured. Shroud cleared."
    priority: normal
    
  - event: timer_warning
    timer: evacuation_timer
    remaining: 60
    text: "60 seconds until evacuation window closes."
    priority: critical
</code></pre>
<p>The LLM also generates ambient sound zone definitions for narrative atmosphere — a mission in a forest gets wind and bird sounds; a mission in a bombed-out city gets distant gunfire and sirens.</p>
<p><strong>What this means in practice:</strong></p>
<p>A generated mission doesn’t just drop units on a map with objectives. A generated mission:</p>
<ol>
<li>Opens with a <strong>cinematic pan</strong> across the battlefield while the commander briefs you</li>
<li>Plays <strong>ambient music</strong> that matches the terrain and mood</li>
<li>Calls you on the <strong>radar</strong> when something important happens — a new threat, a character moment, a plot development</li>
<li>Presents <strong>RPG-style dialogue choices</strong> when you reach key locations or NPCs</li>
<li><strong>Shifts the music</strong> from ambient to combat when the fighting starts</li>
<li>Triggers a <strong>mid-mission cinematic</strong> when the plot twists — a betrayal, a reinforcement arrival, a bridge explosion</li>
<li>Announces custom <strong>EVA warnings</strong> for mission-specific hazards</li>
<li>Ends with a <strong>conclusion sequence</strong> — victory celebration or desperate evacuation</li>
<li>Transitions to an <strong>intermission</strong> with character dialogue, choices, and consequences</li>
</ol>
<p>All of it is standard D038 format. All of it is editable after generation. All of it works exactly like hand-crafted content. The LLM just writes it faster.</p>
<h4 id="generative-media-pipeline-forward-looking"><a class="header" href="#generative-media-pipeline-forward-looking">Generative Media Pipeline (Forward-Looking)</a></h4>
<p>The sections above describe the LLM generating <em>text</em>: YAML definitions, Lua triggers, briefing scripts, dialogue trees. But the full C&amp;C experience isn’t text — it’s voice-acted briefings, dynamic music, sound effects, and cutscenes. Currently, generative campaigns use existing media assets: game module sound libraries, Workshop music packs, the player’s installed voice collections. A mission briefing is <em>text</em> that the player reads; a radar comm event is a text bubble without voice audio.</p>
<p>AI-generated media — voice synthesis, music generation, sound effect creation, and a deferred optional <code>M11</code> video/cutscene generation layer — is advancing rapidly. By the time IC reaches Phase 7, production-quality AI voice synthesis will be mature (it largely is already in 2025–2026), AI music generation is approaching usable quality, and AI video is on a clear trajectory. The generative media pipeline prepares for this without creating obstacles for a media-free fallback.</p>
<p><strong>Core design principle: every generative media feature is a progressive enhancement.</strong> A generative campaign plays identically with or without media generation. Text briefings work. Music from the existing library works. Silent radar comms with text work. When AI media providers are available, they <em>enhance</em> the experience — voiced briefings, custom music, generated sound effects — but nothing <em>depends</em> on them.</p>
<p><strong>Three tiers of generative media (from most ambitious to most conservative):</strong></p>
<p><strong>Tier 1 — Live generation during generative campaigns:</strong></p>
<p>The most ambitious mode. The player is playing a generative campaign. Between missions, during the loading/intermission screen, the system generates media for the next mission in real-time. The player reads the text briefing while voice synthesis runs in the background; when ready, the briefing replays with voice. If voice generation isn’t finished in time, the text-only version is already playing — no delay.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Media Type</th><th>Generation Window</th><th>Fallback (if not ready or unavailable)</th><th>Provider Class</th></tr>
</thead>
<tbody>
<tr><td><strong>Voice lines</strong></td><td>Loading screen / intermission (~15–30s)</td><td>Text-only briefing, text bubble radar comms</td><td>Voice synthesis (ElevenLabs, local TTS, XTTS, Bark, Piper)</td></tr>
<tr><td><strong>Music tracks</strong></td><td>Pre-generated during campaign setup or between missions</td><td>Existing game module soundtrack, Workshop packs</td><td>Music generation (Suno, Udio, MusicGen, local models)</td></tr>
<tr><td><strong>Sound FX</strong></td><td>Pre-generated during mission generation</td><td>Game module default sound library</td><td>Sound generation (AudioGen, Stable Audio, local models)</td></tr>
<tr><td><strong>Cutscenes</strong></td><td>Pre-generated between missions (longer)</td><td>Text+portrait briefing, radar comm text overlay</td><td>Video generation (deferred optional <code>M11</code> — Sora class, Runway, local models)</td></tr>
</tbody>
</table>
</div>
<p><strong>Architecture:</strong></p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>/// Trait for media generation providers. Same BYOLLM pattern as LlmProvider.
/// Each media type has its own trait — providers are specialized.
pub trait VoiceProvider: Send + Sync {
    /// Generate speech audio from text + voice profile.
    /// Returns audio data in a standard format (WAV/OGG).
    fn synthesize(
        &amp;self,
        text: &amp;str,
        voice_profile: &amp;VoiceProfile,
        options: &amp;VoiceSynthesisOptions,
    ) -&gt; Result&lt;AudioData&gt;;
}

pub trait MusicProvider: Send + Sync {
    /// Generate a music track from mood/style description.
    /// Returns audio data in a standard format.
    fn generate_track(
        &amp;self,
        description: &amp;MusicPrompt,
        duration_secs: f32,
        options: &amp;MusicGenerationOptions,
    ) -&gt; Result&lt;AudioData&gt;;
}

pub trait SoundFxProvider: Send + Sync {
    /// Generate a sound effect from description.
    fn generate_sfx(
        &amp;self,
        description: &amp;str,
        duration_secs: f32,
    ) -&gt; Result&lt;AudioData&gt;;
}

pub trait VideoProvider: Send + Sync {
    /// Generate a video clip from description + character portraits + context.
    fn generate_video(
        &amp;self,
        description: &amp;VideoPrompt,
        options: &amp;VideoGenerationOptions,
    ) -&gt; Result&lt;VideoData&gt;;
}

/// Voice profile for consistent character voices across a campaign.
/// Stored in campaign context alongside CharacterState.
pub struct VoiceProfile {
    /// Character name — links to campaign skeleton character.
    pub character_name: String,
    /// Voice description for the provider (text prompt).
    /// e.g., "Deep male voice, Russian accent, military authority, clipped speech."
    pub voice_description: String,
    /// Provider-specific voice ID (if using a cloned/preset voice).
    pub voice_id: Option&lt;String&gt;,
    /// Reference audio sample (if provider supports voice cloning from sample).
    pub reference_audio: Option&lt;AudioData&gt;,
}
<span class="boring">}</span></code></pre>
<p><strong>Voice consistency model:</strong> The most critical challenge for campaign voice generation is consistency — the same character must sound the same across 24 missions. The <code>VoiceProfile</code> is created during campaign skeleton generation (Step 2) and persisted in <code>GenerativeCampaignContext</code>. The LLM generates the voice description from the character’s personality profile (Principle #20 — a ISTJ commander sounds different from an ESTP commando). If the provider supports voice cloning from a sample, the system generates one calibration line during setup and uses that sample as the reference for all subsequent voice generation. If not, the text description must be consistent enough that the provider produces recognizably similar output.</p>
<p><strong>Music mood integration:</strong> The generation pipeline already produces music playlists with mood tags (combat, tension, ambient, victory). When a <code>MusicProvider</code> is configured, the system can generate mission-specific tracks from these mood tags instead of selecting from existing libraries. The LLM adds mission-specific context to the music prompt: “Tense ambient track for a night infiltration mission in an Arctic setting, building to war drums when combat triggers fire.” Generated tracks are cached in the campaign save — once created, they’re standard audio files.</p>
<p><strong>Tier 2 — Pre-generated campaign (full media creation upfront):</strong></p>
<p>The more conservative mode. The player configures a generative campaign, clicks “Generate Campaign,” and the system creates the entire campaign — all missions, all briefings, all media — before the first mission starts. This takes longer (minutes to hours depending on provider speed and campaign length) but produces a complete, polished campaign package.</p>
<p>This mode is also the <strong>content creator workflow</strong>: a modder or community member generates a campaign, reviews/edits it in the SDK (D038), replaces any weak AI-generated media with hand-crafted alternatives, and publishes the polished result to the Workshop. The AI-generated media is a <em>starting point</em>, not a final product.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Advantage</th><th>Trade-off</th></tr>
</thead>
<tbody>
<tr><td>Complete before play begins</td><td>Long generation time (depends on provider)</td></tr>
<tr><td>All media reviewable in SDK</td><td>Higher API cost (all media generated at once)</td></tr>
<tr><td>Publishable to Workshop as-is</td><td>Less reactive to player choices (media pre-committed, not adaptive)</td></tr>
<tr><td>Can replace weak media by hand</td><td>Requires all providers configured upfront</td></tr>
</tbody>
</table>
</div>
<p><strong>Generation pipeline (extends Step 2 — Campaign Skeleton):</strong></p>
<p>After the campaign skeleton is generated, the media pipeline runs:</p>
<ol>
<li><strong>Voice profiles</strong> — create <code>VoiceProfile</code> for each named character. If voice cloning is supported, generate calibration samples.</li>
<li><strong>All mission briefings</strong> — generate voice audio for every briefing text, every radar comm event, every intermission dialogue line.</li>
<li><strong>Mission music</strong> — generate mood-appropriate tracks for each mission (or select from existing library + generate only gap-filling tracks).</li>
<li><strong>Mission-specific sound FX</strong> — generate any custom sound effects referenced in mission scripts (ambient weather, unique weapon sounds, environmental audio).</li>
<li><strong>Cutscenes</strong> (deferred optional <code>M11</code>) — generate video sequences for mission intros, mid-mission cinematics, campaign intro/outro.</li>
</ol>
<p>Each step is independently skippable — a player might configure voice synthesis but skip music generation, using the game’s built-in soundtrack. The campaign save tracks which media was generated vs. sourced from existing libraries.</p>
<p><strong>Tier 3 — SDK Asset Studio integration:</strong></p>
<p>This tier already exists architecturally (D040 § Layer 3 — Agentic Asset Generation) but currently covers only visual assets (sprites, palettes, terrain, chrome). The generative media pipeline extends the Asset Studio to cover audio and video:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Capability</th><th>Asset Studio Tool</th><th>Provider Trait</th></tr>
</thead>
<tbody>
<tr><td><strong>Voice acting</strong></td><td>Record text → generate voice → preview on timeline → adjust pitch/speed → export .ogg/.wav</td><td><code>VoiceProvider</code></td></tr>
<tr><td><strong>EVA line generation</strong></td><td>Select EVA event type → generate authoritative voice → preview in-game → export to sound library</td><td><code>VoiceProvider</code></td></tr>
<tr><td><strong>Music composition</strong></td><td>Describe mood/style → generate track → preview against gameplay footage → trim/fade → export .ogg</td><td><code>MusicProvider</code></td></tr>
<tr><td><strong>Sound FX design</strong></td><td>Describe effect → generate → preview → layer with existing FX → export .wav</td><td><code>SoundFxProvider</code></td></tr>
<tr><td><strong>Cutscene creation</strong></td><td>Write script → generate video → preview in briefing player → edit → export .mp4/.webm</td><td><code>VideoProvider</code></td></tr>
<tr><td><strong>Voice pack creation</strong></td><td>Define character → generate all voice lines → organize → preview → publish as Workshop voice pack</td><td><code>VoiceProvider</code></td></tr>
</tbody>
</table>
</div>
<p>This is the modder-facing tooling. A modder creating a total conversion can generate an entire voice pack for their custom EVA, unit voice lines for new unit types, ambient music that matches their mod’s theme, and briefing videos — all within the SDK, using the same BYOLLM infrastructure.</p>
<p><strong>Crate boundaries:</strong></p>
<ul>
<li><strong><code>ic-llm</code></strong> — implements all provider traits (<code>VoiceProvider</code>, <code>MusicProvider</code>, <code>SoundFxProvider</code>, <code>VideoProvider</code>). Routes to configured providers via D047 task routing. Handles API communication, format conversion, caching.</li>
<li><strong><code>ic-editor</code></strong> (SDK) — defines the provider traits (same pattern as <code>AssetGenerator</code>). Provides UI for media preview, editing, and export. Tier 3 tools live here.</li>
<li><strong><code>ic-game</code></strong> — wires providers at startup. In generative campaign mode, triggers Tier 1 generation during loading/intermission. Plays generated media through standard <code>ic-audio</code> and video playback systems.</li>
<li><strong><code>ic-audio</code></strong> — plays generated audio identically to pre-existing audio. No awareness of generation source.</li>
</ul>
<p><strong>What the AI does NOT replace:</strong></p>
<ul>
<li><strong>Professional voice acting.</strong> AI voice synthesis is serviceable for procedural content but cannot match a skilled human performance. Hand-crafted campaigns (D021) will always benefit from real voice actors. The AI-generated voice is a first draft, not a final product.</li>
<li><strong>Composed music.</strong> Frank Klepacki’s Hell March was not generated by an algorithm. AI music fills gaps and provides variety; it doesn’t replace composed soundtracks. The game module ships with a human-composed soundtrack; AI supplements it.</li>
<li><strong>Quality judgment.</strong> The modder/player decides if generated media meets their standards. The SDK shows it in context. The Workshop provides a distribution channel for polished results.</li>
</ul>
<p><strong>D047 integration — task routing for media providers:</strong></p>
<p>The LLM Configuration Manager (D047) extends its task routing to include media generation tasks:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Task</th><th>Provider Type</th><th>Typical Routing</th></tr>
</thead>
<tbody>
<tr><td>Mission Generation</td><td><code>LlmProvider</code></td><td>Cloud API (quality)</td></tr>
<tr><td>Campaign Briefings</td><td><code>LlmProvider</code></td><td>Cloud API (quality)</td></tr>
<tr><td>Voice Synthesis</td><td><code>VoiceProvider</code></td><td>ElevenLabs / Local TTS (quality vs. speed trade-off)</td></tr>
<tr><td>Music Generation</td><td><code>MusicProvider</code></td><td>Suno API / Local MusicGen</td></tr>
<tr><td>Sound FX Generation</td><td><code>SoundFxProvider</code></td><td>AudioGen / Stable Audio</td></tr>
<tr><td>Video/Cutscene (deferred optional <code>M11</code>)</td><td><code>VideoProvider</code></td><td>Cloud API (when mature)</td></tr>
<tr><td>Asset Generation (visual)</td><td><code>AssetGenerator</code></td><td>DALL-E / Stable Diffusion / Local</td></tr>
<tr><td>AI Orchestrator</td><td><code>LlmProvider</code></td><td>Local Ollama (fast)</td></tr>
<tr><td>Post-Match Coaching</td><td><code>LlmProvider</code></td><td>Local model (fast)</td></tr>
</tbody>
</table>
</div>
<p>Each media provider type is independently configurable. A player might have voice synthesis (local Piper TTS — free, fast, lower quality) but no music generation. The system adapts: generated missions get voiced briefings but use the existing soundtrack.</p>
<p><strong>Phase:</strong></p>
<ul>
<li><strong>Phase 7:</strong> Voice synthesis integration (<code>VoiceProvider</code> trait, ElevenLabs/Piper/XTTS providers, voice profile system, Tier 1 live generation, Tier 2 pre-generation, Tier 3 SDK voice tools). Voice is the highest-impact media type and the most mature AI capability.</li>
<li><strong>Phase 7:</strong> Music generation integration (<code>MusicProvider</code> trait, Suno/MusicGen providers, mood-to-prompt translation). Lower priority than voice — existing soundtrack provides good coverage.</li>
<li><strong>Phase 7+:</strong> Sound FX generation (<code>SoundFxProvider</code>). Useful but niche — game module sound libraries cover most needs.</li>
<li><strong>Future:</strong> Video/cutscene generation (<code>VideoProvider</code>). Depends on AI video technology maturity. The trait is defined now so the architecture is ready; implementation waits until quality meets the bar. The Asset Studio video pipeline (D040 — .mp4/.webm/.vqa conversion) provides the playback infrastructure.</li>
</ul>
<blockquote>
<p><strong>Architectural note:</strong> The design deliberately separates provider traits by media type rather than using a single unified <code>MediaProvider</code>. Voice, music, sound, and video providers have fundamentally different inputs, outputs, quality curves, and maturity timelines. A player may have excellent voice synthesis available but no music generation at all. Per-type traits and per-type D047 task routing enable this mix-and-match reality. The progressive enhancement principle ensures every combination works — from “no media providers” (text-only, existing assets) to “all providers configured” (fully generated multimedia campaigns).</p>
</blockquote>
<h4 id="saving-replaying-and-sharing"><a class="header" href="#saving-replaying-and-sharing">Saving, Replaying, and Sharing</a></h4>
<p><strong>Campaign library:</strong></p>
<p>Every generative campaign is saved to the player’s local campaign list:</p>
<pre><code>┌──────────────────────────────────────────────────────┐
│  My Campaigns                                         │
│                                                       │
│  📖 Operation Iron Tide          Soviet  24/24  ★★★★  │
│     Generated 2026-02-14  |  Completed  |  18h 42m   │
│  📖 Arctic Vengeance             Allied  12/16  ▶︎    │
│     Generated 2026-02-10  |  In Progress              │
│  📖 Desert Crossroads            Soviet   8/8   ★★★   │
│     Generated 2026-02-08  |  Completed  |  6h 15m    │
│  📕 Red Alert (Hand-crafted)     Soviet  14/14  ★★★★★ │
│     Built-in campaign                                 │
│                                                       │
│  [+ New Generative Campaign]  [Import...]             │
└──────────────────────────────────────────────────────┘
</code></pre>
<ul>
<li><strong>Auto-naming:</strong> The LLM names each campaign at skeleton generation. The player can rename.</li>
<li><strong>Progress tracking:</strong> Shows mission count (played / total), completion status, play time.</li>
<li><strong>Rating:</strong> Player can rate their own campaign (personal quality bookmark).</li>
<li><strong>Resume:</strong> In-progress campaigns resume from the last completed mission. The next mission generates on resume if not already cached.</li>
</ul>
<p><strong>Replayability:</strong></p>
<p>A completed generative campaign is a complete D021 campaign — all 24 missions exist as YAML + Lua + maps. The player (or anyone they share it with) can replay it from the start without an LLM. The campaign graph, all branching paths, and all mission content are materialized. A replayer can take different branches than the original player did, experiencing the missions the original player never saw.</p>
<p><strong>Sharing:</strong></p>
<p>Campaigns are shareable as standard IC campaign packages:</p>
<ul>
<li><strong>Export:</strong> <code>ic campaign export "Operation Iron Tide"</code> → produces a <code>.icpkg</code> campaign package (ZIP with <code>campaign.yaml</code>, mission files, maps, Lua scripts, assets). Same format as any hand-crafted campaign.</li>
<li><strong>Workshop publish:</strong> One-click publish to Workshop (D030). The campaign appears alongside hand-crafted campaigns — there’s no second-class status. Tags indicate “LLM-generated” for discoverability, not segregation.</li>
<li><strong>Import:</strong> Other players install the campaign like any Workshop content. No LLM needed to play.</li>
</ul>
<p><strong>Community refinement:</strong></p>
<p>Shared campaigns are standard IC content — fully editable. Community members can:</p>
<ul>
<li><strong>Open in the Campaign Editor (D038):</strong> See the full mission graph, edit transitions, adjust difficulty, fix LLM-generated rough spots.</li>
<li><strong>Modify missions in the Scenario Editor:</strong> Adjust unit placement, triggers, objectives, terrain. Polish LLM output into hand-crafted quality.</li>
<li><strong>Edit campaign parameters:</strong> The campaign package includes the original <code>CampaignParameters</code> and <code>CampaignSkeleton</code> YAML. A modder can adjust these and re-generate specific missions (if they have an LLM configured), or directly edit the generated output.</li>
<li><strong>Edit inner prompts:</strong> The campaign package preserves the generation prompts used for each mission. A modder can modify these prompts — adjusting tone, adding constraints, changing character behavior — and re-generate specific missions to see different results. This is the “prompt as mod parameter” principle: the LLM instructions are part of the campaign’s editable content, not hidden internals.</li>
<li><strong>Fork and republish:</strong> Take someone’s campaign, improve it, publish as a new version. Standard Workshop versioning applies. Credit the original via Workshop dependency metadata.</li>
</ul>
<p>This creates a <strong>generation → curation → refinement pipeline</strong>: the LLM generates raw material, the community curates the best campaigns (Workshop ratings, downloads), and skilled modders refine them into polished experiences. The LLM is a starting gun, not the finish line.</p>
<h4 id="branching-in-generative-campaigns"><a class="header" href="#branching-in-generative-campaigns">Branching in Generative Campaigns</a></h4>
<p>Branching is central to generative campaigns, not optional. The LLM generates missions with multiple named outcomes (D021), and the player’s choice of outcome drives the next generation.</p>
<p><strong>Within-mission branching:</strong></p>
<p>Each generated mission has 2–4 named outcomes. These aren’t just win/lose — they’re narrative forks:</p>
<ul>
<li>“Victory — civilians evacuated” vs. “Victory — civilians sacrificed for tactical advantage”</li>
<li>“Victory — Volkov survived” vs. “Victory — Volkov killed covering the retreat”</li>
<li>“Defeat — orderly retreat” vs. “Defeat — routed, heavy losses”</li>
</ul>
<p>The LLM generates different outcome descriptions and assigns different story flag effects to each. The next mission is generated based on which outcome the player achieved.</p>
<p><strong>Between-mission branching:</strong></p>
<p>The campaign skeleton includes planned branch points (approximately every 4–6 missions). At these points, the LLM generates 2–3 possible next missions and lets the campaign graph branch. The player’s outcome determines which branch they take — but since missions are generated progressively, the LLM only generates the branch the player actually enters (plus one mission lookahead on the most likely alternate path, for pacing).</p>
<p><strong>Branch convergence:</strong></p>
<p>Not every branch diverges permanently. The LLM’s skeleton includes convergence points — moments where different paths lead to the same narrative beat (e.g., “regardless of which route you took, the final assault on Berlin begins”). This prevents the campaign from sprawling into an unmanageable tree. The skeleton’s act structure naturally creates convergence: all Act 1 paths converge at the Act 2 opening, all Act 2 paths converge at the climax.</p>
<p><strong>Why branching matters even with LLM generation:</strong></p>
<p>One might argue that since the LLM generates each mission dynamically, branching is unnecessary — just generate whatever comes next. But branching serves a critical purpose: <strong>the generated campaign must be replayable without an LLM.</strong> Once materialized, the campaign graph must contain the branches the player <em>didn’t</em> take too, so a replayer (or the same player on a second playthrough) can explore alternate paths. The LLM generates branches ahead of time. Progressive generation generates the branches as they become relevant — not all 24 missions on day one, but also not waiting until the player finishes mission 7 to generate mission 8’s alternatives.</p>
<h4 id="campaign-event-patterns"><a class="header" href="#campaign-event-patterns">Campaign Event Patterns</a></h4>
<p>The LLM doesn’t just generate “attack this base” missions in sequence. It draws from a vocabulary of <strong>dramatic event patterns</strong> — narrative structures inspired by the C&amp;C franchise’s most memorable campaign moments and classic military fiction. These patterns are documented in the system prompt so the LLM has a rich palette to paint from.</p>
<p>The LLM chooses when and how to deploy these patterns based on the campaign context, battle reports, character states, and narrative pacing. None are scripted in advance — they emerge from the interplay of the player’s actions and the LLM’s storytelling.</p>
<p><strong>Betrayal &amp; defection patterns:</strong></p>
<ul>
<li><strong>The backstab.</strong> A trusted ally — an intelligence officer, a fellow commander, a political advisor — switches sides mid-campaign. The turn is foreshadowed in briefings (the LLM plants hints over 2–3 missions: contradictory intel, suspicious absences, intercepted communications), then triggered by a story flag or a player decision. Inspired by: Nadia poisoning Stalin (RA1), Yuri’s betrayal (RA2).</li>
<li><strong>Defection offer.</strong> An enemy commander, impressed by the player’s performance or disillusioned with their own side, secretly offers to defect. The player must decide: accept (gaining intelligence + units but risking a double agent) or refuse. The LLM uses the <code>relationship_to_player</code> score from battle reports — if the player spared enemy forces in previous missions, defection becomes plausible.</li>
<li><strong>Loyalty erosion.</strong> A character’s <code>loyalty</code> score drops based on player actions: sacrificing troops carelessly, ignoring a character’s advice repeatedly, making morally questionable choices. When loyalty drops below a threshold, the LLM generates a confrontation mission — the character either leaves, turns hostile, or issues an ultimatum.</li>
<li><strong>The double agent.</strong> A rescued prisoner, a defector from the enemy, a “helpful” neutral — someone the player trusted turns out to be feeding intelligence to the other side. The reveal comes when the player notices the enemy is always prepared for their strategies (the LLM has been describing suspiciously well-prepared enemies for several missions).</li>
</ul>
<p><strong>Rogue faction patterns:</strong></p>
<ul>
<li><strong>Splinter group.</strong> Part of the player’s own faction breaks away — a rogue general forms a splinter army, or a political faction seizes a province and declares independence. The player must fight former allies with the same unit types and tactics. Inspired by: Yuri’s army splitting from the Soviets (RA2), rogue Soviet generals in RA1.</li>
<li><strong>Third-party emergence.</strong> A faction that didn’t exist at campaign start appears mid-campaign: a resistance movement, a mercenary army, a scientific cult with experimental weapons. The LLM introduces them as a complication — sometimes an optional ally, sometimes an enemy, sometimes both at different times.</li>
<li><strong>Warlord territory.</strong> In open-ended campaigns, regions not controlled by either main faction become warlord territories — autonomous zones with their own mini-armies and demands. The LLM generates negotiation or conquest missions for these zones.</li>
</ul>
<p><strong>Plot twist patterns:</strong></p>
<ul>
<li><strong>Secret weapon reveal.</strong> The enemy unveils a devastating new technology: a superweapon, an experimental unit, a weaponized chronosphere. The LLM builds toward the reveal (intelligence fragments over 2–3 missions), then the player faces it in a desperate defense mission. Follow-up missions involve stealing or destroying it.</li>
<li><strong>True enemy reveal.</strong> The faction the player has been fighting isn’t the real threat. A larger power has been manipulating both sides. The campaign pivots to a temporary alliance with the former enemy against the true threat. Inspired by: RA2 Yuri’s Revenge (Allies and Soviets team up against Yuri).</li>
<li><strong>The war was a lie.</strong> The player’s own command has been giving false intelligence. The “enemy base” the player destroyed in mission 5 was a civilian research facility. The “war hero” the player is protecting is a war criminal. Moral complexity emerges from the campaign’s own history, not from a pre-written script.</li>
<li><strong>Time pressure crisis.</strong> A countdown starts: nuclear launch, superweapon charging, allied capital about to fall. The next 2–3 missions are a race against time, each one clearing a prerequisite for the final mission (destroy the radar, capture the codes, reach the launch site). The LLM paces this urgently — short missions, high stakes, no breathers.</li>
</ul>
<p><strong>Force dynamics patterns:</strong></p>
<ul>
<li><strong>Army to resistance.</strong> After a catastrophic loss, the player’s conventional army is shattered. The campaign genre shifts: smaller forces, guerrilla objectives (sabotage, assassination, intelligence gathering), no base building. The LLM generates this naturally when the battle report shows heavy losses. Rebuilding over subsequent missions gradually restores conventional operations.</li>
<li><strong>Underdog to superpower.</strong> The inverse: the player starts with a small force and grows mission by mission. The LLM scales enemy composition accordingly, and the tone shifts from desperate survival to strategic dominance. Late-campaign missions are large-scale assaults the player couldn’t have dreamed of in mission 2.</li>
<li><strong>Siege / last stand.</strong> The player must hold a critical position against overwhelming odds. Reinforcement timing is the drama — will they arrive? The LLM generates increasingly desperate defensive waves, with the outcome determining whether the campaign continues as a retreat or a counter-attack.</li>
<li><strong>Behind enemy lines.</strong> A commando mission deep in enemy territory with a small, hand-picked squad. No reinforcements, no base, limited resources. Named characters shine here. Inspired by: virtually every Tanya mission in the RA franchise.</li>
</ul>
<p><strong>Character-driven patterns:</strong></p>
<ul>
<li><strong>Rescue the captured.</strong> A named character is captured during a mission (or between missions, as a narrative event). The player faces a choice: launch a risky rescue operation, negotiate a prisoner exchange (giving up tactical advantage), or abandon them (with loyalty consequences for other characters). A rescued character returns with changed traits — traumatized, radicalized, or more loyal than ever.</li>
<li><strong>Rival commander.</strong> The LLM develops a specific enemy commander as the player’s nemesis. This character appears in briefings, taunts the player after defeats, acts surprised after losses. The rivalry develops over 5–10 missions before the final confrontation. The enemy commander reacts to the player’s tactics: if the player favors air power, the rival starts deploying heavy AA and mocking the strategy.</li>
<li><strong>Mentor’s fall.</strong> An experienced commander who guided the player in early missions is killed, goes MIA, or turns traitor. The player must continue without their guidance — the tone shifts from “following orders” to “making hard calls alone.”</li>
<li><strong>Character return.</strong> A character thought dead or MIA resurfaces — changed. An MIA character returns with intelligence gained during capture. A “dead” character survived and is now leading a resistance cell. A defected character has second thoughts. The LLM tracks <code>CharacterStatus::MIA</code> and <code>CharacterStatus::Dead</code> and can reverse them with narrative justification.</li>
</ul>
<p><strong>Diplomatic &amp; political patterns:</strong></p>
<ul>
<li><strong>Temporary alliance.</strong> The player’s faction and the enemy faction must cooperate against a common threat (rogue faction, third-party invasion, natural disaster). Missions feature mixed unit control — the player commands some enemy units. Trust is fragile; the alliance may end in betrayal.</li>
<li><strong>Ceasefire and cold war.</strong> Fighting pauses for 2–3 missions while the LLM generates espionage, infiltration, and political maneuvering missions. The player builds up forces during the ceasefire, knowing combat will resume. When and how it resumes depends on the player’s actions during the ceasefire.</li>
<li><strong>Civilian dynamics.</strong> Missions where civilians matter: evacuate a city before a bombing, protect a refugee convoy, decide whether to commandeer civilian infrastructure. The player’s treatment of civilians affects the campaign’s politics — a player who protects civilians gains partisan support; one who sacrifices them faces insurgencies on their own territory.</li>
</ul>
<p>These patterns are examples, not an exhaustive list. The LLM’s system prompt includes them as inspiration. The LLM can also invent novel patterns that don’t fit these categories — the constraint is that every event must produce standard D021 missions and respect the campaign’s current state, not that every event must match a template.</p>
<h4 id="open-ended-campaigns"><a class="header" href="#open-ended-campaigns">Open-Ended Campaigns</a></h4>
<p>Fixed-length campaigns (8, 16, 24 missions) suit players who want a structured experience. But the most interesting generative campaigns may be <strong>open-ended</strong> — where the campaign continues until victory conditions are met, and the LLM determines the pacing.</p>
<p><strong>How open-ended campaigns work:</strong></p>
<p>Instead of “generate 24 missions,” the player defines <strong>victory conditions</strong> — a set of goals that, when achieved, trigger the campaign finale:</p>
<pre><code class="language-yaml">victory_conditions:
  # Any ONE of these triggers the final mission sequence
  - type: eliminate_character
    target: "General Morrison"
    description: "Hunt down and eliminate the Allied Supreme Commander"
  - type: capture_locations
    targets: ["London", "Paris", "Washington"]
    description: "Capture all three Allied capitals"
  - type: survival
    missions: 30
    description: "Survive 30 missions against escalating odds"

# Optional: defeat conditions that end the campaign in failure
defeat_conditions:
  - type: roster_depleted
    threshold: 0       # lose all named characters
    description: "All commanders killed — the war is lost"
  - type: lose_streak
    count: 3
    description: "Three consecutive mission failures — command is relieved"
</code></pre>
<p>The LLM sees these conditions and works toward them narratively. It doesn’t just generate missions until the player happens to kill Morrison — it builds a story arc where Morrison is an escalating threat, intelligence about his location is gathered over missions, near-misses create tension, and the final confrontation feels earned.</p>
<p><strong>Dynamic narrative shifts:</strong></p>
<p>Open-ended campaigns enable dramatic genre shifts that fixed-length campaigns can’t. The LLM inspects the battle report and can pivot the entire campaign direction:</p>
<ul>
<li><strong>Army → Resistance.</strong> The player starts with a full division. After a devastating defeat in mission 8, they lose most forces. The LLM generates mission 9 as a guerrilla operation — small squad, no base building, ambush tactics, sabotage objectives. The campaign has organically shifted from conventional warfare to an insurgency. If the player rebuilds over the next few missions, it shifts back.</li>
<li><strong>Hunter → Hunted.</strong> The player is pursuing a VIP target. The VIP escapes repeatedly. The LLM decides the VIP has learned the player’s tactics and launches a counter-offensive. Now the player is defending against an enemy who knows their weaknesses.</li>
<li><strong>Rising power → Civil war.</strong> The player’s faction is winning the war. Political factions within their own side start competing for control. The LLM introduces betrayal missions where the player fights former allies.</li>
<li><strong>Conventional → Desperate.</strong> Resources dry up. Supply lines are cut. The LLM generates missions with scarce starting resources, forcing the player to capture enemy supplies or scavenge the battlefield.</li>
</ul>
<p>These shifts emerge naturally from the battle reports. The LLM doesn’t follow a script — it reads the game state and decides what makes a good story.</p>
<p><strong>Escalation mechanics:</strong></p>
<p>In open-ended campaigns, the enemy isn’t static. The LLM uses a concept of <strong>enemy adaptation</strong> — the longer the campaign runs, the more the enemy evolves:</p>
<ul>
<li><strong>VIP escalation.</strong> A fleeing VIP gains experience and resources the longer they survive. Early missions to catch them are straightforward pursuits. By mission 15, the VIP has fortified a stronghold, recruited allies, and developed counter-strategies. The difficulty curve is driven by the narrative, not a slider.</li>
<li><strong>Enemy learning.</strong> The LLM tracks what strategies the player uses (from battle reports) and has the enemy adapt. Player loves tank rushes? The enemy starts mining approaches and building anti-armor defenses. Player relies on air power? The enemy invests in AA.</li>
<li><strong>Resource escalation.</strong> Both sides grow over the campaign. Early missions are skirmishes. Late missions are full-scale battles. The LLM scales force composition to match the campaign’s progression.</li>
<li><strong>Alliance shifts.</strong> Neutral factions that appeared in early missions may become allies or enemies based on the player’s choices. The political landscape evolves.</li>
</ul>
<p><strong>How the LLM decides “it’s time for the finale”:</strong></p>
<p>The LLM doesn’t just check <code>if conditions_met { generate_finale(); }</code>. It builds toward the conclusion:</p>
<ol>
<li><strong>Sensing readiness.</strong> The LLM evaluates whether the player’s current roster, position, and narrative momentum make a finale satisfying. If the player barely survived the last mission, the finale waits — a recovery mission first.</li>
<li><strong>Creating the opportunity.</strong> When conditions are approaching (the player has captured 2/3 capitals, Morrison’s location is almost known), the LLM generates missions that create the <em>opportunity</em> for the final push — intelligence missions, staging operations, securing supply lines.</li>
<li><strong>The finale sequence.</strong> The final mission (or final 2–3 missions) are generated as a climactic arc, not a single mission. The LLM knows these are the last ones and gives them appropriate weight — cutscene-worthy briefings, all surviving named characters present, callbacks to early campaign events.</li>
<li><strong>Earning the ending.</strong> The campaign length is indeterminate but not infinite. The LLM aims for a satisfying arc — typically 15–40 missions depending on the victory conditions. If the campaign has gone on “too long” without progress toward victory (the player keeps failing to advance), the LLM introduces narrative catalysts: an unexpected ally, a turning point event, or a vulnerability in the enemy’s position.</li>
</ol>
<p><strong>Open-ended campaign identity:</strong></p>
<p>What makes open-ended campaigns distinct from fixed-length ones:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Aspect</th><th>Fixed-length (24 missions)</th><th>Open-ended</th></tr>
</thead>
<tbody>
<tr><td><strong>End condition</strong></td><td>Mission count reached</td><td>Victory conditions met</td></tr>
<tr><td><strong>Skeleton</strong></td><td>Full arc planned upfront</td><td>Backstory + conditions + characters; arc emerges</td></tr>
<tr><td><strong>Pacing</strong></td><td>LLM knows position in arc (mission 8/24)</td><td>LLM estimates narrative momentum</td></tr>
<tr><td><strong>Narrative shifts</strong></td><td>Planned at branch points</td><td>Emerge from battle reports</td></tr>
<tr><td><strong>Difficulty</strong></td><td>Follows configured curve</td><td>Driven by enemy adaptation + player state</td></tr>
<tr><td><strong>Replayability</strong></td><td>Take different branches</td><td>Entirely different campaign length and arc</td></tr>
<tr><td><strong>Typical length</strong></td><td>Exactly as configured</td><td>15–40 missions (emergent)</td></tr>
</tbody>
</table>
</div>
<p>Both modes produce standard D021 campaigns. Both are saveable, shareable, and replayable without an LLM. The difference is in how much creative control the LLM exercises during generation.</p>
<h4 id="world-domination-campaign"><a class="header" href="#world-domination-campaign">World Domination Campaign</a></h4>
<p>A third generative campaign mode — distinct from both fixed-length narrative campaigns and open-ended condition-based campaigns. <strong>World Domination</strong> is an LLM-driven narrative campaign where the story plays out across a world map. The LLM is the narrative director — it generates missions, drives the story, and decides what happens next based on the player’s real-time battle results. The world map is the visualization: territory expands when you win, contracts when you lose, and shifts when the narrative demands it.</p>
<p>This is the mode where the campaign <em>is</em> the map.</p>
<p><strong>How it works:</strong></p>
<p>The player starts in a region — say, Greece — and fights toward a goal: conquer Europe, defend the homeland, push west to the Atlantic. The LLM generates each mission based on where the player stands on the map, what happened in previous battles, and where the narrative is heading. The player doesn’t pick targets from a strategy menu — the LLM presents the next mission (or a choice between missions) based on the story it’s building.</p>
<p>After each RTS battle, the results feed back to the LLM. Won decisively? Territory advances. Lost badly? The enemy pushes into your territory. But it’s not purely mechanical — the LLM controls the narrative arc. Maybe you lose three missions in a row, your territory shrinks, things look dire — and then the LLM introduces a turning point: your engineers develop a new weapon, a neutral faction joins your side, a storm destroys the enemy’s supply lines. Or maybe there’s no rescue — you simply lose. The LLM decides based on accumulated battle results, the story it’s been building, and the dramatic pacing.</p>
<pre><code class="language-yaml"># World Domination campaign setup (extends standard CampaignParameters)
world_domination:
  map: "europe_1953"                  # world map asset (see World Map Assets below)
  starting_region: "athens"           # where the player's campaign begins
  factions:
    - id: soviet
      name: "Soviet Union"
      color: "#CC0000"
      starting_regions: ["moscow", "leningrad", "stalingrad", "kiev", "minsk"]
      ai_personality: null             # player-controlled
    - id: allied
      name: "Allied Forces"
      color: "#0044CC"
      starting_regions: ["london", "paris", "washington", "rome", "berlin"]
      ai_personality: "strategic"      # AI-controlled (D043 preset)
    - id: neutral
      name: "Neutral States"
      color: "#888888"
      starting_regions: ["stockholm", "bern", "ankara", "cairo"]
      ai_personality: "defensive"      # defends territory, doesn't expand
  
  # The LLM decides when and how the campaign ends — these are hints, not hard rules.
  # The LLM may end the campaign with a climactic finale at 60% control, or let 
  # the player push to 90% if the narrative supports it.
  narrative_hints:
    goal_direction: west               # general direction of conquest (flavor for LLM)
    domination_target: "Europe"        # what "winning" means narratively
    tone: military_drama              # narrative tone: military_drama, pulp, dark, heroic
</code></pre>
<p><strong>The campaign loop:</strong></p>
<pre><code>┌────────────────────────────────────────────────────────────────┐
│                    World Domination Loop                        │
│                                                                │
│  1. VIEW WORLD MAP                                             │
│     ├── See your territory, enemy territory, contested zones   │
│     ├── See the frontline — where your campaign stands         │
│     └── See the narrative state (briefing, intel, context)     │
│                                                                │
│  2. LLM PRESENTS NEXT MISSION                                  │
│     ├── Based on current frontline and strategic situation      │
│     ├── Based on accumulated battle results and player actions  │
│     ├── Based on narrative arc (pacing, tension, stakes)        │
│     ├── May offer a choice: "Attack Crete or reinforce Athens?" │
│     └── May force a scenario: "Enemy launches surprise attack!" │
│                                                                │
│  3. PLAY RTS MISSION (standard IC gameplay)                    │
│     └── Full real-time battle — this is the game                │
│                                                                │
│  4. RESULTS FEED BACK TO LLM                                   │
│     ├── Battle outcome (victory, defeat, pyrrhic, decisive)    │
│     ├── Casualties, surviving units, player tactics used        │
│     ├── Objectives completed or failed                         │
│     └── Time taken, resources spent, player style               │
│                                                                │
│  5. LLM UPDATES THE WORLD                                      │
│     ├── Territory changes (advance, retreat, or hold)           │
│     ├── Narrative consequences (new allies, betrayals, tech)    │
│     ├── Story progression (turning points, escalation, arcs)   │
│     └── May introduce recovery or setback events               │
│                                                                │
│  6. GOTO 1                                                     │
└────────────────────────────────────────────────────────────────┘
</code></pre>
<p><strong>Region properties:</strong></p>
<p>Each region on the world map has strategic properties that affect mission generation:</p>
<pre><code class="language-yaml">regions:
  berlin:
    display_name: "Berlin"
    terrain_type: urban              # affects generated map terrain
    climate: temperate               # affects weather (D022)
    resource_value: 3                # economic importance (LLM considers for narrative weight)
    fortification: heavy             # affects defender advantage
    population: civilian_heavy       # affects civilian presence in missions
    adjacent: ["warsaw", "prague", "hamburg", "munich"]
    special_features:
      - type: factory_complex        # bonus: faster unit production
      - type: airfield               # bonus: air support in adjacent battles
    strategic_importance: critical    # LLM emphasizes this in narrative

  arctic_outpost:
    display_name: "Arctic Research Station"
    terrain_type: arctic
    climate: arctic
    resource_value: 1
    fortification: light
    population: minimal
    adjacent: ["murmansk", "arctic_sea"]
    special_features:
      - type: research_lab           # bonus: unlocks special units/tech
    strategic_importance: moderate
</code></pre>
<p><strong>Progress and regression:</strong></p>
<p>The world map is not a one-way march to victory. The LLM drives territory changes based on battle outcomes <em>and</em> narrative arc:</p>
<ul>
<li><strong>Win a mission</strong> → territory typically advances. The LLM decides how much — a minor victory might push one region forward, a decisive rout might cascade into capturing two or three.</li>
<li><strong>Lose a mission</strong> → the enemy pushes in. The LLM decides the severity — a narrow loss might mean holding the line but losing influence, while a collapse means the enemy sweeps through multiple regions.</li>
<li><strong>Pyrrhic victory</strong> → you won, but at what cost? The LLM might advance your territory but weaken your forces so severely that the next mission is a desperate defense.</li>
</ul>
<p>But it’s not a mechanical formula. The LLM is a <strong>narrative director</strong>, not a spreadsheet. It mixes battle results with story:</p>
<ul>
<li><strong>Recovery arcs:</strong> You’ve lost three missions. Your territory has shrunk to a handful of regions. Things look hopeless — and then the LLM introduces a breakthrough. Maybe your engineers develop a new superweapon. Maybe a neutral faction defects to your side. Maybe a brutal winter slows the enemy advance and buys you time. The recovery feels earned because it follows real setbacks.</li>
<li><strong>Deus ex machina:</strong> Rarely, the LLM creates a dramatic reversal — an earthquake destroys the enemy’s main base, a rogue commander switches sides, an intelligence coup reveals the enemy’s plans. These are narratively justified and infrequent enough to feel special.</li>
<li><strong>Escalation:</strong> You’re winning too easily? The LLM introduces complications — a second front opens, the enemy deploys experimental weapons, an ally betrays you. The world map shifts to reflect the new threat.</li>
<li><strong>Inevitable defeat:</strong> Sometimes there’s no rescue. If the player keeps losing badly and the narrative can’t credibly save them, the campaign ends in defeat. The LLM builds to a dramatic conclusion — a last stand, a desperate evacuation, a bitter retreat — rather than just showing “Game Over.”</li>
</ul>
<p>The key insight: <strong>the player’s agency is in the RTS battles.</strong> How well you fight determines the raw material the LLM works with. Win well and consistently, and the narrative carries you forward. Fight poorly, and the LLM builds a story of struggle and potential collapse. But the LLM always has latitude to shape the pacing — it’s telling a war story, not just calculating territory percentages.</p>
<p><strong>Force persistence across the map:</strong></p>
<p>Units aren’t disposable between battles. The world domination mode uses a <strong>per-region force pool</strong>:</p>
<ul>
<li>Each region the player controls has a garrison (force pool). The player deploys from these forces when attacking from or defending that region.</li>
<li>Casualties in battle reduce the garrison. Reinforcements arrive as the narrative progresses (based on controlled factories, resource income, and narrative events).</li>
<li>Veteran units from previous battles remain — a region with battle-hardened veterans is harder to defeat than one with fresh recruits.</li>
<li>Named characters (D038 Named Characters) can be assigned to regions. Moving them to a front gives bonuses but risks their death.</li>
<li>D021’s roster persistence and carryover apply within the campaign — the “roster” is the regional garrison.</li>
</ul>
<p><strong>Mission generation from campaign state:</strong></p>
<p>The LLM generates each mission from the <strong>strategic situation</strong> — it’s not picking from a random pool, it’s reading the state of the world and crafting a battle that makes sense:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Input</th><th>How it affects the mission</th></tr>
</thead>
<tbody>
<tr><td><strong>Region terrain type</strong></td><td>Map terrain (urban streets, arctic tundra, rural farmland, desert, mountain pass)</td></tr>
<tr><td><strong>Attacker’s force pool</strong></td><td>Player’s starting units (drawn from the garrison)</td></tr>
<tr><td><strong>Defender’s force pool</strong></td><td>Enemy’s garrison strength (affects enemy unit count and quality)</td></tr>
<tr><td><strong>Fortification level</strong></td><td>Defender gets pre-built structures, mines, walls</td></tr>
<tr><td><strong>Campaign progression</strong></td><td>Tech level escalation — later in the campaign unlocks higher-tier units</td></tr>
<tr><td><strong>Adjacent region bonuses</strong></td><td>Airfield = air support; factory = reinforcements mid-mission; radar = revealed shroud</td></tr>
<tr><td><strong>Special features</strong></td><td>Research lab = experimental units; port = naval elements</td></tr>
<tr><td><strong>Battle history</strong></td><td>Regions fought over multiple times get war-torn terrain (destroyed buildings, craters)</td></tr>
<tr><td><strong>Narrative arc</strong></td><td>Briefing, character dialogue, story events, turning points, named objectives</td></tr>
<tr><td><strong>Player battle results</strong></td><td>Previous performance shapes difficulty, tone, and stakes of the next mission</td></tr>
</tbody>
</table>
</div>
<p>Without an LLM, missions are generated from <strong>templates</strong> — the system picks a template matching the terrain type and action type (urban assault, rural defense, naval landing, etc.) and populates it with forces from the strategic state. With an LLM, the missions are crafted: the briefing tells a story, characters react to what you did last mission, the objectives reflect the narrative the LLM is building.</p>
<p><strong>The world map between missions:</strong></p>
<p>Between missions, the player sees the world map — the D038 World Map intermission template, elevated into the primary campaign interface. The map shows the story so far: where you’ve been, what you control, and where the narrative is taking you next.</p>
<pre><code>┌────────────────────────────────────────────────────────────────────────┐
│  WORLD DOMINATION — Operation Iron Tide          Mission 14  Soviet   │
│                                                                        │
│  ┌────────────────────────────────────────────────────────────────┐    │
│  │                                                                │    │
│  │           ██ MURMANSK                                          │    │
│  │          ░░░░                                                  │    │
│  │    ██ STOCKHOLM    ██ LENINGRAD                                │    │
│  │      ░░░░░        ████████                                     │    │
│  │  ▓▓ LONDON    ▓▓ BERLIN   ██ MOSCOW    Legend:                 │    │
│  │  ▓▓▓▓▓▓▓▓   ░░░░░░░░   ████████████   ██ Soviet (You)        │    │
│  │  ▓▓ PARIS    ▓▓ PRAGUE   ██ KIEV       ▓▓ Allied (Enemy)      │    │
│  │  ▓▓▓▓▓▓▓▓   ░░ VIENNA   ██ STALINGRAD ░░ Contested           │    │
│  │  ▓▓ ROME     ░░ BUDAPEST ██ MINSK      ▒▒ Neutral             │    │
│  │              ▒▒ ISTANBUL                                       │    │
│  │              ▒▒ CAIRO                                          │    │
│  │                                                                │    │
│  └────────────────────────────────────────────────────────────────┘    │
│                                                                        │
│  Territory: 12/28 regions (43%)                                        │
│                                                                        │
│  ┌─ BRIEFING ────────────────────────────────────────────────────┐    │
│  │  General Volkov has ordered an advance into Central Europe.   │    │
│  │  Berlin is contested — Allied forces are dug in. Our victory  │    │
│  │  at Warsaw has opened the road west, but intelligence reports │    │
│  │  a counterattack forming from Hamburg.                        │    │
│  │                                                                │    │
│  │  "We push now, or we lose the initiative." — Col. Petrov      │    │
│  └───────────────────────────────────────────────────────────────┘    │
│                                                                        │
│  [BEGIN MISSION: Battle for Berlin]                  [Save &amp; Quit]    │
└────────────────────────────────────────────────────────────────────────┘
</code></pre>
<p>The map is the campaign. The player sees their progress and regression at a glance — territory expanding and contracting as the war ebbs and flows. The LLM presents the next mission through narrative briefing, not through a strategy game menu. Sometimes the LLM offers a choice (“Reinforce the eastern front or press the western advance?”) — but the choices are narrative, not board-game actions.</p>
<p><strong>Comparison to narrative campaigns:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Aspect</th><th>Narrative Campaign (fixed/open-ended)</th><th>World Domination</th></tr>
</thead>
<tbody>
<tr><td><strong>Structure</strong></td><td>Linear/branching mission graph</td><td>LLM-driven narrative across a world map</td></tr>
<tr><td><strong>Mission order</strong></td><td>Determined by story arc</td><td>Determined by LLM based on map state + results</td></tr>
<tr><td><strong>Progress model</strong></td><td>Mission completion advances the story</td><td>Territory changes visualize campaign progress</td></tr>
<tr><td><strong>Regression</strong></td><td>Rarely (defeat branches to different path)</td><td>Frequent — battles lost = territory lost</td></tr>
<tr><td><strong>Recovery</strong></td><td>Fixed by story branches</td><td>LLM-driven: new tech, allies, events, or defeat</td></tr>
<tr><td><strong>Player agency</strong></td><td>Choose outcomes within missions</td><td>Fight well in RTS battles; LLM shapes consequences</td></tr>
<tr><td><strong>LLM role</strong></td><td>Story arc, characters, narrative pacing</td><td>Narrative director — drives the entire campaign</td></tr>
<tr><td><strong>Without LLM</strong></td><td>Requires shared/imported campaign</td><td>Playable with templates (loses narrative richness)</td></tr>
<tr><td><strong>Replayability</strong></td><td>Different branches</td><td>Different narrative every time</td></tr>
<tr><td><strong>Inspired by</strong></td><td>C&amp;C campaign structure + Total War</td><td>C&amp;C campaign feel + dynamic world map</td></tr>
</tbody>
</table>
</div>
<p><strong>World domination without LLM:</strong></p>
<p>World Domination is <strong>playable without an LLM</strong>, though it loses its defining feature. Without the LLM, the system falls back to template-generated missions — pick a template matching the terrain and action type, populate it with forces from the strategic state. Territory advances/retreats follow mechanical rules (win = advance, lose = retreat) instead of narrative-driven pacing. There are no recovery arcs, no turning points, no deus ex machina — just a deterministic strategic layer. It still works as a campaign, but it’s closer to a Risk-style conquest game than the narrative experience the LLM provides. The LLM is what makes World Domination feel like a <em>war story</em> rather than a <em>board game</em>.</p>
<p><strong>Strategic AI for non-player factions (no-LLM fallback):</strong></p>
<p>When the LLM drives the campaign, non-player factions behave according to the narrative — the LLM decides when and where the enemy attacks, retreats, or introduces surprises. Without an LLM, a mechanical <strong>strategic AI</strong> controls non-player faction behavior on the world map:</p>
<ul>
<li>Each AI faction has an <code>ai_personality</code> (D043 preset): <code>aggressive</code> (expands toward player), <code>defensive</code> (holds territory, counter-attacks only), <code>opportunistic</code> (attacks weakened regions), <code>strategic</code> (balances expansion and defense).</li>
<li>The AI evaluates regions by adjacency, garrison strength, and strategic importance. It prioritizes attacking weak borders and reinforcing threatened ones.</li>
<li>If the player pushes hard on one front, the AI opens a second front on an undefended border — simple but effective strategic pressure.</li>
<li>The AI’s behavior is deterministic given the campaign state, ensuring consistent replay behavior.</li>
</ul>
<p>This strategic AI is separate from the tactical RTS AI (D043) — it operates on the world map layer, not within individual missions. The tactical AI still controls enemy units during RTS battles.</p>
<h4 id="world-map-assets"><a class="header" href="#world-map-assets">World Map Assets</a></h4>
<p>World maps are <strong>game-module-provided and moddable assets</strong> — not hardcoded. A world map can represent anything: Cold War Europe, the entire globe, a fictional continent, an alien planet, a galactic star map, a subway network — whatever fits the game or mod. The engine doesn’t care what the map <em>is</em>, only that it has regions with connections. Each game module ships with default world maps, and modders can create their own for any setting they imagine.</p>
<p><strong>World map definition:</strong></p>
<pre><code class="language-yaml"># World map asset — shipped with the game module or created by modders
world_map:
  id: "europe_1953"
  display_name: "Europe 1953"
  game_module: red_alert              # which game module this map is for
  
  # Visual asset — the actual map image
  # Supports multiple render modes (D048): sprite, vector, or 3D globe
  visual:
    base_image: "maps/world/europe_1953.png"    # background image
    region_overlays: "maps/world/europe_1953_regions.png"  # color-coded regions
    faction_colors: true                         # color regions by controlling faction
    animation: frontline_glow                    # animated frontlines between factions
  
  # Region definitions (see region YAML above)
  regions:
    # ... region definitions with adjacency, terrain, resources, etc.
  
  # Starting configurations (selectable in setup)
  scenarios:
    - id: "cold_war_heats_up"
      description: "Classical East vs. West. Soviets hold Eastern Europe, Allies hold the West."
      faction_assignments:
        soviet: ["moscow", "leningrad", "stalingrad", "kiev", "minsk", "warsaw"]
        allied: ["london", "paris", "rome", "berlin", "madrid"]
        neutral: ["stockholm", "bern", "ankara", "cairo", "istanbul"]
    - id: "last_stand"
      description: "Soviets control most of Europe. Allies hold only Britain and France."
      faction_assignments:
        soviet: ["moscow", "leningrad", "stalingrad", "kiev", "minsk", "warsaw", "berlin", "prague", "vienna", "budapest", "rome"]
        allied: ["london", "paris"]
        neutral: ["stockholm", "bern", "ankara", "cairo", "istanbul"]
</code></pre>
<p><strong>Game-module world maps:</strong></p>
<p>Each game module provides at least one default world map:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Game module</th><th>Default world map</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>Red Alert</td><td><code>europe_1953</code></td><td>Cold War Europe — Soviets vs. Allies</td></tr>
<tr><td>Tiberian Dawn</td><td><code>gdi_nod_global</code></td><td>Global map — GDI vs. Nod, Tiberium spread zones</td></tr>
<tr><td>(Community)</td><td>Anything</td><td>The map is whatever the modder wants it to be</td></tr>
</tbody>
</table>
</div>
<p>Community world map examples (the kind of thing modders could create):</p>
<ul>
<li><strong>Pacific Theater</strong> — island-hopping across the Pacific; naval-heavy campaigns</li>
<li><strong>Entire globe</strong> — six continents, dozens of regions, full world war</li>
<li><strong>Fictional continent</strong> — Westeros, Middle-earth, or an original fantasy setting</li>
<li><strong>Galactic star map</strong> — planets as regions, fleets as garrisons, a sci-fi total conversion</li>
<li><strong>Single city</strong> — district-by-district urban warfare; each “region” is a city block or neighborhood</li>
<li><strong>Underground network</strong> — cavern systems, bunker complexes, tunnel connections</li>
<li><strong>Alternate history</strong> — what if the Roman Empire never fell? What if the Cold War went hot in 1962?</li>
<li><strong>Abstract/non-geographic</strong> — a network of space stations, a corporate org chart, whatever the mod needs</li>
</ul>
<p>The world map is a YAML + image asset, loadable from any source: game module defaults, Workshop (D030), or local mod folders. The Campaign Editor (D038) includes a world map editor for creating and editing regions, adjacencies, and starting scenarios.</p>
<p><strong>World maps as Workshop resources:</strong></p>
<p>World maps are a first-class Workshop resource category (<code>category: world-map</code>). This makes them discoverable, installable, version-tracked, and composable like any other Workshop content:</p>
<pre><code class="language-yaml"># Workshop manifest for a world map package
package:
  name: "galactic-conquest-map"
  publisher: "scifi-modding-collective"
  version: "2.1.0"
  license: "CC-BY-SA-4.0"
  description: "A 40-region galactic star map for sci-fi total conversions"
  category: world-map
  game_module: any                     # or a specific module
  engine_version: "^0.3.0"
  
  tags: ["sci-fi", "galactic", "space", "large"]
  ai_usage: allow                       # LLM can select this map for generated campaigns
  
  dependencies:
    - id: "scifi-modding-collective/space-faction-pack"
      version: "^1.0"                  # faction definitions this map references

files:
  world_map.yaml: { sha256: "..." }   # region definitions, adjacency, scenarios
  assets/galaxy_background.png: { sha256: "..." }
  assets/region_overlays.png: { sha256: "..." }
  assets/faction_icons/: {}            # per-faction marker icons
  preview.png: { sha256: "..." }       # Workshop listing thumbnail
</code></pre>
<p>Workshop world maps support the full Workshop lifecycle:</p>
<ul>
<li><strong>Discovery</strong> — browse/search by game module, region count, theme tags, rating. Filter by “maps with 20+ regions” or “fantasy setting” or “historical.”</li>
<li><strong>One-click install</strong> — download the <code>.icpkg</code>, world map appears in the campaign setup screen under “Community Maps.”</li>
<li><strong>Dependency resolution</strong> — a world map can depend on faction packs, terrain packs, or sprite sets. Workshop resolves and installs dependencies automatically.</li>
<li><strong>Versioning</strong> — semver; breaking changes (region ID renames, adjacency changes) require major version bumps. Saved campaigns pin the world map version they were started with.</li>
<li><strong>Forking</strong> — any published world map can be forked. “I like that galactic map but I want to add a wormhole network” → fork, edit in Campaign Editor, republish as a derivative (license permitting).</li>
<li><strong>LLM integration</strong> — world maps with <code>ai_usage: allow</code> can be discovered by the LLM during campaign generation. The LLM reads region metadata (terrain types, strategic values, flavor text) to generate contextually appropriate missions. A rich, well-annotated world map gives the LLM more material to work with.</li>
<li><strong>Composition</strong> — a world map can reference other Workshop resources. Faction packs define the factions. Terrain packs provide the visual assets. Music packs set the atmosphere. The world map is the strategic skeleton; other Workshop resources flesh it out.</li>
<li><strong>Rating and reviews</strong> — community rates world maps on balance, visual quality, replayability. High-rated maps surface in “Featured” listings.</li>
</ul>
<p><strong>World map as an engine feature, not a campaign feature:</strong></p>
<p>The world map renderer is in <code>ic-ui</code> — it’s a general-purpose interactive map component. The World Domination campaign mode uses it as its primary interface, but the same component powers:</p>
<ul>
<li>The “World Map” intermission template in D038 (for non-domination campaigns that want a mission-select map)</li>
<li>Strategic overview displays in Game Master mode</li>
<li>Multiplayer lobby map selection (showing region-based game modes)</li>
<li>Mod-defined strategic layers (e.g., a Generals mod with a global war on terror, a Star Wars mod with a galactic conquest, a fantasy mod with a continent map)</li>
</ul>
<p>The engine imposes no assumptions about what the map represents. Regions are abstract nodes with connections, properties, and an image overlay. Whether those nodes are countries, planets, city districts, or dungeon rooms is entirely up to the content creator. The engine provides the map renderer; the game module and mods provide the map data.</p>
<p>Because world maps are Workshop resources, the community can build a library of strategic maps independently of the engine team. A thriving Workshop means a player launching World Domination for the first time can browse dozens of community-created maps — historical, fictional, fantastical — and start a campaign on any of them without the modder needing to ship a full game module.</p>
<h4 id="workshop-resource-integration"><a class="header" href="#workshop-resource-integration">Workshop Resource Integration</a></h4>
<p>The LLM doesn’t generate everything from scratch. It draws on the player’s configured Workshop sources (D030) for maps, terrain packs, music, and other assets — the same pipeline described in § LLM-Driven Resource Discovery above.</p>
<p><strong>How this works in campaign generation:</strong></p>
<ol>
<li>The LLM plans a mission: “Arctic base assault in a fjord.”</li>
<li>The generation system searches Workshop: <code>tags=["arctic", "fjord", "base"], ai_usage=Allow</code>.</li>
<li>If a suitable map exists → use it as the terrain base, generate objectives/triggers/briefing on top.</li>
<li>If no map exists → generate the map from scratch (YAML terrain definition).</li>
<li>Music, ambient audio, and voice packs from Workshop enhance the atmosphere — the LLM selects thematically appropriate resources from those available.</li>
</ol>
<p>This makes generative campaigns richer in communities with active Workshop content creators. A well-stocked Workshop full of diverse maps and assets becomes a palette the LLM paints from. Resource attribution is tracked: the campaign’s <code>mod.yaml</code> lists all Workshop dependencies, crediting the original creators.</p>
<h4 id="no-llm-campaign-still-works"><a class="header" href="#no-llm-campaign-still-works">No LLM? Campaign Still Works</a></h4>
<p>The generative campaign system follows the core D016 principle: <strong>LLM is for creation, not for play.</strong></p>
<ul>
<li>A player with an LLM generates a campaign → plays it → it’s saved as standard D021.</li>
<li>A player without an LLM → imports and plays a shared campaign from Workshop. No different from playing a hand-crafted campaign.</li>
<li>A player starts a generative campaign, generates 12/24 missions, then loses LLM access → the 12 generated missions are fully playable. The campaign is “shorter than planned” but complete up to that point. When LLM access returns, generation resumes from mission 12.</li>
<li>A community member takes a generated 24-mission campaign, opens it in the Campaign Editor, and hand-edits missions 15–24 to improve them. No LLM needed for editing.</li>
</ul>
<p>The LLM is a tool in the content creation pipeline — the same pipeline that includes the Scenario Editor, Campaign Editor, and hand-authored YAML. Generated campaigns are first-class citizens of the same content ecosystem.</p>
<h4 id="multiplayer--co-op-generative-campaigns"><a class="header" href="#multiplayer--co-op-generative-campaigns">Multiplayer &amp; Co-op Generative Campaigns</a></h4>
<p>Everything described above — narrative campaigns, open-ended campaigns, world domination, cinematic generation — works in multiplayer. The generative campaign system builds on D038’s co-op infrastructure (Player Slots, Co-op Mission Modes, Per-Player Objectives) and the D010 snapshottable sim. These are the multiplayer modes the generative system supports:</p>
<p><strong>Co-op generative campaigns:</strong></p>
<p>Two or more players share a generative campaign. They play together, the LLM generates for all of them, and the campaign adapts to their combined performance.</p>
<pre><code class="language-yaml"># Co-op generative campaign setup
campaign_parameters:
  mode: generative
  player_count: 2                      # 2-4 players
  co_op_mode: allied_factions          # each player controls their own faction
  # Alternative modes from D038:
  # shared_command — both control the same army
  # commander_ops — one builds, one fights
  # split_objectives — different goals on the same map
  # asymmetric — one RTS player, one GM/support

  faction_player_1: soviet
  faction_player_2: allied             # co-op doesn't mean same faction
  difficulty: hard
  campaign_type: narrative             # or open_ended, world_domination
  length: 16
  tone: serious
</code></pre>
<p><strong>What the LLM generates differently for co-op:</strong></p>
<p>The LLM knows it’s generating for multiple players. This changes mission design:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Aspect</th><th>Single-player</th><th>Co-op</th></tr>
</thead>
<tbody>
<tr><td><strong>Map layout</strong></td><td>One base, one frontline</td><td>Multiple bases or sectors per player</td></tr>
<tr><td><strong>Objectives</strong></td><td>Unified objective list</td><td>Per-player objectives + shared goals</td></tr>
<tr><td><strong>Briefings</strong></td><td>One briefing</td><td>Per-player briefings (different intel, different roles)</td></tr>
<tr><td><strong>Radar comms</strong></td><td>Addressed to “Commander”</td><td>Addressed to specific players by role/faction</td></tr>
<tr><td><strong>Dialogue choices</strong></td><td>One player decides</td><td>Each player gets their own choices; disagreements create narrative tension</td></tr>
<tr><td><strong>Character assignment</strong></td><td>All characters with the player</td><td>Named characters distributed across players</td></tr>
<tr><td><strong>Mission difficulty</strong></td><td>Scaled for one</td><td>Scaled for combined player power + coordination challenge</td></tr>
<tr><td><strong>Narrative</strong></td><td>One protagonist’s story</td><td>Interweaving storylines that converge at key moments</td></tr>
</tbody>
</table>
</div>
<p><strong>Player disagreements as narrative fuel:</strong></p>
<p>The most interesting co-op feature: <strong>what happens when players disagree.</strong> In a single-player campaign, the player makes all dialogue choices. In co-op, each player makes their own choices in intermissions and mid-mission dialogues. The LLM uses disagreements as narrative material:</p>
<ul>
<li>Player 1 wants to spare the prisoner. Player 2 wants to execute them. The LLM generates a confrontation scene between the players’ commanding officers, then resolves based on a configurable rule: majority wins, mission commander decides (rotating role), or the choice splits into two consequences.</li>
<li>Player 1 wants to attack the eastern front. Player 2 wants to defend the west. In World Domination mode, they can split — each player tackles a different region simultaneously (parallel missions at the same point in the campaign).</li>
<li>Persistent disagreements shift character loyalties — an NPC commander who keeps getting overruled becomes resentful, potentially defecting (Campaign Event Patterns).</li>
</ul>
<p><strong>Saving, pausing, and resuming co-op campaigns:</strong></p>
<p>Co-op campaigns are long. Players can’t always finish in one sitting. The system supports <strong>pause, save, and resume</strong> for multiplayer campaigns:</p>
<pre><code>┌────────────────────────────────────────────────────────────────┐
│                  Co-op Campaign Session Flow                    │
│                                                                │
│  1. Player A creates a co-op generative campaign               │
│     └── Campaign saved to Player A's local storage             │
│                                                                │
│  2. Player A invites Player B (friend list, lobby code, link)  │
│     └── Player B receives campaign metadata + join token       │
│                                                                │
│  3. Both players play missions together                        │
│     └── Campaign state synced: both have a local copy          │
│                                                                │
│  4. Mid-campaign: players want to stop                         │
│     ├── Either player can request pause                        │
│     ├── Current mission: standard multiplayer save (D010)      │
│     │   └── Full sim snapshot + order history + campaign state  │
│     └── Campaign state saved: mission progress, roster, flags  │
│                                                                │
│  5. Resume later (hours, days, weeks)                          │
│     ├── Player A loads campaign from "My Campaigns"            │
│     ├── Player A re-invites Player B                           │
│     ├── Player B's client receives the campaign state delta    │
│     └── Resume from exactly where they left off                │
│                                                                │
│  6. Player B unavailable? Options:                             │
│     ├── Wait for Player B                                      │
│     ├── AI takes Player B's slot (temporary)                   │
│     ├── Invite Player C to take over (with B's consent)        │
│     └── Continue solo (B's faction runs on AI)                 │
└────────────────────────────────────────────────────────────────┘
</code></pre>
<p><strong>How multiplayer save works (technically):</strong></p>
<ul>
<li><strong>Mid-mission save:</strong> Uses D010 — full sim snapshot. Both players receive the snapshot. Either player can host the resume session. The save file is a standard <code>.icsave</code> containing the sim snapshot, order history, and campaign state.</li>
<li><strong>Between-mission save:</strong> The natural pause point. Campaign state (D021) is serialized — roster, flags, mission graph position, world map state (if World Domination). No sim snapshot needed — the next mission hasn’t started yet.</li>
<li><strong>Campaign ownership:</strong> The campaign is “owned” by the creating player but the save state is portable. If Player A disappears, Player B has a full local copy and can resume solo or with a new partner.</li>
</ul>
<p><strong>Co-op World Domination:</strong></p>
<p>World Domination campaigns with multiple human players — each controlling a faction on the world map. The LLM generates missions for all players, weaving their actions into a shared narrative. Two modes:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Mode</th><th>Description</th><th>Example</th></tr>
</thead>
<tbody>
<tr><td><strong>Allied co-op</strong></td><td>Players share a team against AI factions. They coordinate attacks on different fronts simultaneously. One player attacks Berlin while the other defends Moscow.</td><td>2 players (Soviet team) vs. AI (Allied + Neutral)</td></tr>
<tr><td><strong>Competitive co-op</strong></td><td>Players are rival factions on the same map. Each plays their own campaign missions. When players’ territories are adjacent, they fight each other. An AI faction provides a shared threat.</td><td>Player 1 (Soviet) vs. Player 2 (Allied) vs. AI (Rogue faction)</td></tr>
</tbody>
</table>
</div>
<p>Allied co-op World Domination is particularly compelling — two friends on voice chat, splitting their forces across a continent, coordinating strategy: “I’ll push into Scandinavia if you hold the Polish border.” The LLM generates missions for both fronts simultaneously, with narrative crossover: “Intelligence reports your ally has broken through in Norway. Allied forces are retreating south — expect increased resistance on your front.”</p>
<p><strong>Asynchronous campaign play:</strong></p>
<p>Not every multiplayer session needs to be real-time. For players in different time zones or with unpredictable schedules, the system supports <strong>asynchronous play</strong> in competitive World Domination campaigns:</p>
<pre><code class="language-yaml">async_config:
  mode: async_competitive              # players play their campaigns asynchronously
  move_deadline: 48h                   # max time before AI plays your next mission
  notification: true                   # notify when the other player has completed a mission
  ai_fallback_on_deadline: true        # AI plays your mission if you don't show up
</code></pre>
<p>How it works:</p>
<ol>
<li>Player A logs in, sees the world map. The LLM (or template system) presents their next mission — an attack, defense, or narrative event.</li>
<li>Player A plays the RTS mission in real-time. The mission resolves. The campaign state updates. Notification sent to Player B.</li>
<li>Player B logs in hours/days later. They see how the map changed based on Player A’s results. The LLM presents Player B’s next mission based on the updated state.</li>
<li>Player B plays their mission. The map updates again. Notification sent to Player A.</li>
</ol>
<p>The RTS missions are fully real-time (you play a complete battle). The asynchronous part is <em>when</em> each player sits down to play — not what they do when they’re playing. The LLM (or strategic AI fallback) generates narrative that acknowledges the asynchronous pacing — no urgent “the enemy is attacking NOW!” when the other player won’t see it for 12 hours.</p>
<p><strong>Generative challenge campaigns:</strong></p>
<p>The LLM generates short, self-contained challenges that the community can attempt and compete on:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Challenge type</th><th>Description</th><th>Competitive element</th></tr>
</thead>
<tbody>
<tr><td><strong>Weekly challenge</strong></td><td>A generated 3-mission mini-campaign with a leaderboard. Same seed = same campaign for all players.</td><td>Score (time, casualties, objectives)</td></tr>
<tr><td><strong>Ironman run</strong></td><td>A generated campaign with permadeath — no save/reload. Campaign ends when you lose.</td><td>How far you get (mission count)</td></tr>
<tr><td><strong>Speed campaign</strong></td><td>Generated campaign optimized for speed — short missions, tight timers.</td><td>Total completion time</td></tr>
<tr><td><strong>Impossible odds</strong></td><td>Generated campaign where the LLM deliberately creates unfair scenarios.</td><td>Binary: did you survive?</td></tr>
<tr><td><strong>Community vote</strong></td><td>Players vote on campaign parameters. The LLM generates one campaign that everyone plays.</td><td>Score leaderboard</td></tr>
</tbody>
</table>
</div>
<p>Weekly challenges reuse the same seed and LLM output — the campaign is generated once, published to the community, and everyone plays the identical missions. This is fair because the content is deterministic once generated. Leaderboards are per-challenge, stored via the community server (D052) with signed credential records.</p>
<p><strong>Spectator and observer mode:</strong></p>
<p>Live campaigns (especially co-op and competitive World Domination) can be observed:</p>
<ul>
<li><strong>Live spectator</strong> — watch a co-op campaign in progress (delay configurable for competitive fairness). See both players’ perspectives.</li>
<li><strong>Replay spectator</strong> — watch a completed campaign, switching between player perspectives. The replay includes all dialogue choices, intermission decisions, and world map actions.</li>
<li><strong>Commentary mode</strong> — a spectator can record voice commentary over a replay, creating a “let’s play” package sharable on Workshop.</li>
<li><strong>Campaign streaming</strong> — the campaign state can be broadcast to a spectator server. Community members watch the world map update in real-time during community events.</li>
<li><strong>Author-guided camera</strong> — scenario authors place Spectator Bookmark modules (D038) at key map locations and wire them to triggers. Spectators cycle bookmarks with hotkeys; replays auto-cut to bookmarks at dramatic moments. Free camera remains available — bookmarks are hints, not constraints.</li>
<li><strong>Spectator appeal as design input</strong> — Among Us became a cultural phenomenon through streaming because social dynamics are more entertaining to <em>watch</em> than many games are to play. Modes like Mystery (accusation moments), Nemesis (escalating rivalry), and Defection (betrayal) are inherently watchable — LLM-generated dialogue, character reactions, and dramatic pivots create spectator-friendly narrative beats. This is a validation of the existing spectator infrastructure, not a new feature: the commentary mode, War Dispatches, and replay system already capture these moments. When the LLM generates campaign content, it should mark <strong>spectator-highlight moments</strong> (accusations, betrayals, nemesis confrontations, moral dilemmas) in the campaign save so replays can auto-cut to them.</li>
</ul>
<p><strong>Co-op resilience (eliminated player engagement):</strong></p>
<p>In any co-op campaign, a critical question: what happens when one player’s forces are devastated mid-mission? Among Us’s insight is that eliminated players keep playing — dead crewmates complete tasks and observe. IC applies this principle: a player whose army is destroyed doesn’t sit idle. Options compose from existing systems:</p>
<ul>
<li><strong>Intelligence/advisor role</strong> — the eliminated player transitions to managing the intermission-layer intelligence network (Espionage mode) or providing strategic guidance through the shared chat. They see the full battlefield (observer perspective) and can ping locations, mark threats, and coordinate with the surviving player.</li>
<li><strong>Reinforcement controller</strong> — the eliminated player controls reinforcement timing and positioning for the surviving partner. They decide <em>when</em> and <em>where</em> reserve units deploy, adding a cooperative command layer.</li>
<li><strong>Rebuild mission</strong> — the eliminated player receives a smaller side-mission to re-establish from a secondary base or rally point. Success in the side-mission provides reinforcements to the surviving player’s main mission.</li>
<li><strong>Game Master lite</strong> — using the scenario’s reserve pool, the eliminated player places emergency supply drops, triggers scripted reinforcements, or activates defensive structures. A subset of Game Master (D038) powers, scoped to assist rather than control.</li>
</ul>
<p>The specific role available depends on the campaign mode and scenario design. The key principle: <strong>no player should ever watch an empty screen in a co-op campaign</strong>. Even total military defeat is a phase transition, not an ejection.</p>
<p><strong>Generative multiplayer scenarios (non-campaign):</strong></p>
<p>Beyond campaigns, the LLM generates one-off multiplayer scenarios:</p>
<ul>
<li><strong>Generated skirmish maps</strong> — “Generate a 4-player free-for-all map with lots of chokepoints and limited resources.” The LLM creates a balanced multiplayer map.</li>
<li><strong>Generated team scenarios</strong> — “Create a 2v2 co-op defense mission against waves of enemies.” The LLM generates a PvE scenario with scaling difficulty.</li>
<li><strong>Generated party modes</strong> — “Make a king-of-the-hill map where the hill moves every 5 minutes.” Creative game modes generated on demand.</li>
<li><strong>Tournament map packs</strong> — “Generate 7 balanced 1v1 maps for a tournament, varied terrain, no water.” A set of maps with consistent quality and design language.</li>
</ul>
<p>These generate as standard IC content — the same maps and scenarios that human designers create. They can be played immediately, saved, edited, or published to Workshop.</p>
<h4 id="persistent-heroes--named-squads"><a class="header" href="#persistent-heroes--named-squads">Persistent Heroes &amp; Named Squads</a></h4>
<p>The infrastructure for hero-centric, squad-based campaigns with long-term character development is fully supported by existing systems — no new engine features required. Everything described below composes from D021 (persistent rosters), D016 (character construction + CharacterState), D029 (component library), the veterancy system, and YAML/Lua modding.</p>
<p><strong>What the engine already provides:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Capability</th><th>Source</th><th>How it applies</th></tr>
</thead>
<tbody>
<tr><td>Named units persist across missions</td><td>D021 carryover modes</td><td>A hero unit that survives mission 3 is the <em>same entity</em> in mission 15 — same health, same veterancy, same kill count</td></tr>
<tr><td>Veterancy accumulates permanently</td><td>D021 + veterancy system</td><td>A commando who kills 50 enemies across 10 missions earns promotions that change their stats, voice lines, and visual appearance</td></tr>
<tr><td>Permanent death</td><td>D021 + CharacterState</td><td>If Volkov dies in mission 7, <code>CharacterStatus::Dead</code> — he’s gone forever. The campaign adapts around his absence. No reloading in Iron Man mode.</td></tr>
<tr><td>Character personality persists</td><td>D016 CharacterState</td><td>MBTI type, speech style, flaw/desire/fear, loyalty, relationship — all tracked and evolved by the LLM across the full campaign</td></tr>
<tr><td>Characters react to their own history</td><td>D016 battle reports + narrative threads</td><td>A hero who was nearly killed in mission 5 develops caution. One who was betrayed develops trust issues. The LLM reads <code>notable_events</code> and adjusts behavior.</td></tr>
<tr><td>Squad composition matters</td><td>D021 roster + D029 components</td><td>A hand-picked 5-unit squad with complementary abilities (commando + engineer + sniper + medic + demolitions) plays differently than a conventional army. Equipment captured in one mission equips the squad in the next.</td></tr>
<tr><td>Upgrades and equipment persist</td><td>D021 equipment carryover + D029 upgrade system</td><td>A hero’s captured experimental weapon, earned battlefield upgrades, and scavenged equipment carry forward permanently</td></tr>
<tr><td>Customizable unit identity</td><td>YAML unit definitions + Lua</td><td>Named units can have custom names, visual markings (kill tallies, custom insignia via Lua), and unique voice lines</td></tr>
</tbody>
</table>
</div>
<p><strong>Campaign modes this enables:</strong></p>
<p><strong>Commando campaign (“Tanya Mode”):</strong> A series of behind-enemy-lines missions with 1–3 hero units and no base building. Every mission is a commando operation. The heroes accumulate kills, earn abilities, and develop personality through LLM-generated briefing dialogue. Losing your commando ends the campaign (Iron Man) or branches to a rescue mission (standard). The LLM generates increasingly personal rivalry between your commando and an enemy commander who’s hunting them.</p>
<p><strong>Squad campaign (“Band of Brothers”):</strong> A persistent squad of 5–12 named soldiers. Each squad member has an MBTI personality, a role specialization, and a relationship to the others. Between missions, the LLM generates squad interactions — arguments, bonding moments, confessions, humor — driven by MBTI dynamics and recent battle events. A medic (ISFJ) who saved the sniper (INTJ) in mission 4 develops a protective bond. The demolitions expert (ESTP) and the squad leader (ISTJ) clash over tactics. When a squad member dies, the LLM writes the other characters’ grief responses consistent with their personalities and relationships. Replacements arrive — but they’re new personalities who have to earn the squad’s trust.</p>
<p><strong>Hero army campaign (“Generals”):</strong> A conventional campaign where 3–5 hero units lead a full army. Heroes are special units with unique abilities, voice lines, and narrative arcs. They appear in briefings, issue orders to the player, argue with each other about strategy, and can be sent on solo objectives within larger missions. Losing a hero doesn’t end the campaign but permanently changes it — the army loses a capability, the other heroes react, and the enemy adapts.</p>
<p><strong>Cross-campaign hero persistence (“Legacy”):</strong> Heroes from a completed campaign carry over to the next campaign. A veteran commando from “Soviet Campaign” appears as a grizzled mentor in “Soviet Campaign 2” — with their full history, personality evolution, and kill count. <code>CharacterState</code> serializes to campaign save files and can be imported. The LLM reads the imported history and writes the character accordingly — a war hero is treated like a war hero.</p>
<p><strong>Iron Man integration:</strong> All hero modes compose with Iron Man (no save/reload). Death is permanent. The campaign adapts. This is where the character investment pays off most intensely — the player who nursed a hero through 15 missions has real emotional stakes when that hero is sent into a dangerous situation. The LLM knows this and uses it: “Volkov volunteers for the suicide mission. He’s your best commando. But if he goes in alone, he won’t come back.”</p>
<p><strong>Modding support:</strong> All of this is achievable through YAML + Lua (Tier 1-2 modding). A modder defines named hero units in YAML with custom stats, abilities, and visual markings. Lua scripts handle special hero abilities (“Volkov plants the charges — 30-second timer”), squad interaction triggers, and custom carryover rules. The LLM’s character construction system works with any modder-defined units — the MBTI framework and flaw/desire/fear triangle apply regardless of the game module. A Total Conversion mod in a fantasy setting could have a persistent party of heroes with swords instead of guns — the personality simulation works the same way.</p>
<h4 id="extended-generative-campaign-modes"><a class="header" href="#extended-generative-campaign-modes">Extended Generative Campaign Modes</a></h4>
<p>The three core generative modes — <strong>Narrative</strong> (fixed-length), <strong>Open-Ended</strong> (condition-driven), and <strong>World Domination</strong> (world map + LLM narrative director) — are the structural foundations. But the LLM’s expressive range and IC’s compositional architecture enable a much wider vocabulary of campaign experiences. Each mode below composes from existing systems (D021 branching, CharacterState, MBTI dynamics, battle reports, roster persistence, story flags, world map renderer, Workshop resources) — no new engine changes required.</p>
<p>These modes are drawn from the deepest wells of human storytelling: philosophy, cinema, literature, military history, game design, and the universal experiences that make stories resonate across cultures. The test for each: <strong>does it make the toy soldiers come alive in a way no other mode does?</strong></p>
<hr>
<p><strong>The Long March (Survival Exodus)</strong></p>
<p><em>Inspired by: Battlestar Galactica, FTL: Faster Than Light, the Biblical Exodus, Xenophon’s Anabasis, the real Long March, Oregon Trail, refugee crises throughout history.</em></p>
<p>You’re not conquering — you’re surviving. Your army has been shattered, your homeland overrun. You must lead what remains of your people across hostile territory to safety. Every mission is a waypoint on a desperate journey. The world map shows your route — not territory you hold, but ground you must cross.</p>
<p>The LLM generates waypoint encounters: ambushes at river crossings, abandoned supply depots (trap or salvation?), hostile garrisons blocking mountain passes, civilian populations who might shelter you or sell you out. The defining tension is <strong>resource scarcity</strong> — you can’t replace what you lose. A tank destroyed in mission 4 is gone forever. A hero killed at the third river crossing never reaches the promised land. Every engagement forces a calculation: fight (risk losses), sneak (risk detection), or negotiate (risk betrayal).</p>
<p>What makes this profoundly different from conquest modes: the emotional arc is inverted. In a normal campaign, the player grows stronger. Here, the player holds on. Victory isn’t domination — it’s survival. The LLM tracks the convoy’s dwindling strength and generates missions that match: early missions are organized retreats with rear-guard actions; mid-campaign missions are desperate scavenging operations; late missions are harrowing last stands at chokepoints. The finale isn’t assaulting the enemy capital — it’s crossing the final border with whatever you have left.</p>
<p>Every unit that makes it to the end feels earned. A veteran tank that survived 20 missions of running battles, ambushes, and near-misses isn’t just a unit — it’s a story.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Aspect</th><th>Solo</th><th>Multiplayer</th></tr>
</thead>
<tbody>
<tr><td><strong>Structure</strong></td><td>One player leads the exodus</td><td>Co-op: each player commands part of the convoy. Split up to cover more ground (faster but weaker) or stay together (slower but safer).</td></tr>
<tr><td><strong>Tension</strong></td><td>Resource triage — what do you leave behind?</td><td>Social triage — whose forces protect the rear guard? Who gets the last supply drop?</td></tr>
<tr><td><strong>Failure</strong></td><td>Convoy destroyed or starved</td><td>One player’s column is wiped out — the other must continue without their forces. Or go back for them.</td></tr>
</tbody>
</table>
</div>
<hr>
<p><strong>Cold War Espionage (The Intelligence Campaign)</strong></p>
<p><em>Inspired by: John le Carré (The Spy Who Came in from the Cold, Tinker Tailor Soldier Spy), The Americans (TV), Bridge of Spies, Metal Gear Solid, the real Cold War intelligence apparatus.</em></p>
<p>The war is fought with purpose. Every mission is a full RTS engagement — Extract→Build→Amass→Crush — but the <em>objectives</em> are intelligence-driven. You assault a fortified compound to extract a defecting scientist before the enemy can evacuate them. You defend a relay station for 15 minutes while your signals team intercepts a critical transmission. You raid a convoy to capture communications equipment that reveals the next enemy offensive. The LLM generates these intelligence-flavored objectives, but what the player actually <em>does</em> is build bases, train armies, and fight battles.</p>
<p>Between missions, the player manages an intelligence network in the intermission layer. The LLM generates a web of agents, double agents, handlers, and informants, each with MBTI-driven motivations that determine when they cooperate, when they lie, and when they defect. Each recruited agent has a loyalty score, a personality type, and a price. An ISFJ agent spies out of duty but breaks under moral pressure. An ENTP agent spies for the thrill but gets bored with routine operations. The LLM uses these personality models to simulate when an agent provides good intelligence, when they feed disinformation (intentionally or under duress), and when they get burned.</p>
<p>Intelligence gathered between missions shapes the next battle. Good intel reveals enemy base locations, unlocks alternative starting positions, weakens enemy forces through pre-mission sabotage, or provides reinforcement timelines. Bad intel — from burned agents or double agents feeding disinformation — sends the player into missions with false intelligence: the enemy base isn’t where your agent said it was, the “lightly defended” outpost is a trap, the reinforcements that were supposed to arrive don’t exist. The campaign’s strategic metagame is information quality; the moment-to-moment gameplay is commanding armies.</p>
<p>The MBTI interaction system drives the intermission layer: every agent conversation is a negotiation, every character is potentially lying, and reading people’s personalities correctly determines the quality of intel you bring into battle. Petrov (ISTJ) can be trusted because duty-bound types don’t betray without extreme cause. Sonya (ENTJ) is useful but dangerous — her ambition makes her a powerful asset and an unpredictable risk. The LLM simulates these dynamics through dialogue that reveals (or conceals) character intentions based on their personality models.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Aspect</th><th>Solo</th><th>Multiplayer</th></tr>
</thead>
<tbody>
<tr><td><strong>Structure</strong></td><td>RTS missions with intelligence-driven objectives; agent network between</td><td>Adversarial: two players run competing spy networks between missions. Better intel = battlefield advantage in the next engagement.</td></tr>
<tr><td><strong>Tension</strong></td><td>Is your intel good — or did a burned agent just send you into a trap?</td><td>Your best double agent might be feeding your opponent better intel than you. The battlefield reveals who was lied to.</td></tr>
<tr><td><strong>Async multiplayer</strong></td><td>N/A</td><td>Espionage metagame is inherently asynchronous. Plant an operation between missions, see the results on the next battlefield.</td></tr>
</tbody>
</table>
</div>
<hr>
<p><strong>The Defection (Two Wars in One)</strong></p>
<p><em>Inspired by: The Americans, Metal Gear Solid 3: Snake Eater, Bridge of Spies, real Cold War defection stories (Oleg Gordievsky, Aldrich Ames), Star Wars: The Force Awakens (Finn’s defection).</em></p>
<p>Act 1: You fight for one side. You know your commanders. You trust (or distrust) your team. You fight the enemy as defined by your faction. Then something happens — an order you can’t follow, a truth you can’t ignore, an atrocity that changes everything. Act 2: You defect. Everything inverts. Your former allies hunt you with the tactics you taught them. Your new allies don’t trust you. The characters you built relationships with in Act 1 react to your betrayal according to their MBTI types — the ISTJ commander feels personally betrayed, the ESTP commando grudgingly respects your courage, the ENTJ intelligence officer was expecting it and already has a contingency plan.</p>
<p>What makes this structurally unique: the same CharacterState instances exist in both acts, but their <code>allegiance</code> and <code>relationship_to_player</code> values flip. The LLM generates Act 2 dialogue where former friends reference specific events from Act 1 — “I trusted you at the bridge, Commander. I won’t make that mistake again.” The personality system ensures each character’s reaction to the defection is psychologically consistent: some hunt you with rage, some with sorrow, some with professional detachment.</p>
<p>The defection trigger can be player-chosen (a moral crisis) or narrative-driven (you discover your faction’s war crimes). The LLM builds toward it across Act 1 — uncomfortable orders, suspicious intelligence, moral gray areas — so it feels earned, not arbitrary. The <code>hidden_agenda</code> field and <code>loyalty</code> score track the player’s growing doubts through story flags.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Aspect</th><th>Solo</th><th>Multiplayer</th></tr>
</thead>
<tbody>
<tr><td><strong>Structure</strong></td><td>One player, two acts, two factions</td><td>Co-op: both players defect, or one defects and the other doesn’t — the campaign splits. Former co-op partners become enemies.</td></tr>
<tr><td><strong>Tension</strong></td><td>Your knowledge of your old faction is your weapon — and your vulnerability</td><td>The betrayal is social, not just narrative. Your co-op partner didn’t expect you to switch sides.</td></tr>
<tr><td><strong>Emotional core</strong></td><td>“Were we ever fighting for the right side?”</td><td>“Can I trust someone who’s already betrayed one allegiance?”</td></tr>
</tbody>
</table>
</div>
<hr>
<p><strong>Nemesis (The Personal War)</strong></p>
<p><em>Inspired by: Shadow of Mordor’s Nemesis system, Captain Ahab and the white whale (Moby-Dick), Holmes/Moriarty, Batman/Joker, Heat (Mann), the primal human experience of rivalry.</em></p>
<p>The entire campaign is structured around a single, escalating rivalry with an enemy commander who adapts, learns, remembers, and grows. The Nemesis isn’t a scripted boss — they’re a fully realized CharacterState with an MBTI personality, their own flaw/desire/fear triangle, and a relationship to the player that evolves based on actual battle outcomes.</p>
<p>The LLM reads every battle report and updates the Nemesis’s behavior. Player loves tank rushes? The Nemesis develops anti-armor obsession — mines every approach, builds AT walls, taunts the player about predictability. Player won convincingly in mission 5? The Nemesis retreats to rebuild, and the LLM generates 2-3 missions of fragile peace before the Nemesis returns with a new strategy and a grudge. Player barely wins? The Nemesis respects the challenge and begins treating the war as a personal duel rather than a strategic campaign.</p>
<p>What separates this from the existing “Rival commander” pattern: the Nemesis IS the campaign. Not a subplot — the main plot. The arc follows the classical rivalry structure: introduction (missions 1-3), first confrontation (4-5), escalation (6-12), reversal (the Nemesis wins one — 13-14), obsession (15-18), and final reckoning (19-24). Both characters are changed by the end. The LLM generates the Nemesis’s personal narrative — their own setbacks, alliances, and moral evolution — and delivers fragments through intercepted communications, captured intel, and enemy officer interrogations.</p>
<p>The deepest philosophical parallel: the Nemesis is a mirror. Their MBTI type is deliberately chosen as the player’s faction’s shadow — strategically complementary, personally incompatible. An INTJ strategic mastermind opposing the player’s blunt-force army creates a “brains vs. brawn” struggle. An ENFP charismatic rebel opposing the player’s disciplined advance creates “heart vs. machine.” The LLM makes the Nemesis compelling enough that defeating them feels bittersweet.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Aspect</th><th>Solo</th><th>Multiplayer</th></tr>
</thead>
<tbody>
<tr><td><strong>Structure</strong></td><td>Player vs. LLM-driven Nemesis</td><td>Symmetric: each player IS the other’s Nemesis. Your victories write their villain’s story.</td></tr>
<tr><td><strong>Adaptation</strong></td><td>The Nemesis learns from your battle reports</td><td>Both players adapt simultaneously — a genuine arms race with narrative weight.</td></tr>
<tr><td><strong>Climax</strong></td><td>Final confrontation after 20+ missions of escalation</td><td>The players meet in a final battle that their entire campaign has been building toward.</td></tr>
<tr><td><strong>Export</strong></td><td>After finishing, export your Nemesis as a Workshop character — other players face the villain YOUR campaign created</td><td>Post-campaign, challenge a friend: “Can you beat the commander who almost beat me?”</td></tr>
</tbody>
</table>
</div>
<hr>
<p><strong>Moral Complexity Parameter (Tactical Dilemmas)</strong></p>
<p><em>Inspired by: Spec Ops: The Line (tonal caution), Papers Please (systemic moral choices), the trolley problem (Philippa Foot), Walzer’s “Just and Unjust Wars,” the enduring human interest in difficult decisions under pressure.</em></p>
<p>Moral complexity is not a standalone campaign mode — it’s a <strong>parameter available on any generative campaign mode</strong>. It controls how often the LLM generates tactical dilemmas with no clean answer, and how much character personality drives the fallout. Three levels:</p>
<ul>
<li><strong>Low</strong> (default): Straightforward tactical choices. The mission has a clear objective; characters react to victory and defeat but not to moral ambiguity. Standard C&amp;C fare — good guys, bad guys, blow stuff up.</li>
<li><strong>Medium</strong>: Tactical trade-offs with character consequences. Occasional missions present two valid approaches with different costs. Destroy the bridge to cut off enemy reinforcements, or leave it intact so civilians can evacuate? The choice affects the next mission’s conditions AND how your MBTI-typed commanders view your leadership. No wrong answer — but each choice shifts character loyalty.</li>
<li><strong>High</strong>: Genuine moral weight with long-tail consequences. The LLM generates dilemmas where both options have defensible logic and painful costs. Tactical, not gratuitous — these stay within the toy-soldier abstraction of C&amp;C:
<ul>
<li>A fortified enemy position is using a civilian structure as cover. Shelling it ends the siege quickly but your ISFJ field commander loses respect for your methods. Flanking costs time and units but preserves your team’s trust.</li>
<li>You’ve intercepted intelligence that an enemy officer wants to defect — but extracting them requires diverting forces from a critical defensive position. Commit to the extraction (gain a valuable asset, risk the defense) or hold the line (lose the defector, secure the front).</li>
<li>Two allied positions are under simultaneous attack. You can only reinforce one in time. The LLM ensures both positions have named characters the player has built relationships with. Whoever you don’t reinforce takes heavy casualties — and remembers.</li>
</ul>
</li>
</ul>
<p>The LLM tracks choices in campaign story flags and generates <strong>long-tail consequences</strong>. A choice from mission 3 might resurface in mission 15 — the officer you extracted becomes a critical ally, or the position you didn’t reinforce never fully trusts your judgment again. Characters react according to their MBTI type: TJ types evaluate consequences; FP types evaluate intent; SJ types evaluate duty; NP types evaluate principle. Loyalty shifts based on personality-consistent moral frameworks, not a universal morality scale.</p>
<p>At <strong>High</strong> in co-op campaigns, both players must agree on dilemma choices — creating genuine social negotiation. “Do we divert for the extraction or hold the line?” becomes a real conversation between real people with different strategic instincts.</p>
<p>This parameter composes with every mode: a Nemesis campaign at High moral complexity generates dilemmas where the Nemesis exploits the player’s past choices. A Generational Saga at High carries moral consequences across generations — Generation 3 lives with Generation 1’s trade-offs. A Mystery campaign at Medium lets the traitor steer the player toward choices that look reasonable but serve enemy interests.</p>
<hr>
<p><strong>Generational Saga (The Hundred-Year War)</strong></p>
<p><em>Inspired by: Crusader Kings (Paradox), Foundation (Asimov), Dune (Herbert), The Godfather trilogy, Fire Emblem (permadeath + inheritance), the lived experience of generational trauma and inherited conflict.</em></p>
<p>The war spans three generations. Each generation is ~8 missions. Characters age, retire, die of old age or in combat. Young lieutenants from Generation 1 are old generals in Generation 3. The decisions of grandparents shape the world their grandchildren inherit.</p>
<p>Generation 1 establishes the conflict. The player’s commanders are young, idealistic, sometimes reckless. Their victories and failures set the starting conditions for everything that follows. The LLM generates the world state that Generation 2 inherits: borders drawn by Generation 1’s campaigns, alliances forged by their diplomacy, grudges created by their atrocities, technology unlocked by their captured facilities.</p>
<p>Generation 2 lives in their predecessors’ shadow. The LLM generates characters who are the children or proteges of Generation 1’s heroes — with inherited MBTIs modified by upbringing. A legendary commander’s daughter might be an ENTJ like her father… or an INFP who rejects everything he stood for. The Nemesis from Generation 1 might be dead, but their successor inherited their grudge and their tactical files. “Your father destroyed my father’s army at Stalingrad. I’ve spent 20 years studying how.”</p>
<p>Generation 3 brings resolution. The war’s original cause may be forgotten — the LLM tracks how meaning shifts across generations. What started as liberation becomes occupation becomes tradition becomes identity. The final generation must either find peace or perpetuate a war that nobody remembers starting. The LLM generates characters who question why they’re fighting — and the MBTI system determines who accepts “it’s always been this way” (SJ types) and who demands “but why?” (NP types).</p>
<p>Cross-campaign hero persistence (Legacy mode) provides the technical infrastructure. CharacterState serializes between generations. Veterancy, notable events, and relationship history persist in the save. The LLM writes Generation 3’s dialogue with explicit callbacks to Generation 1’s battles — events the <em>player</em> remembers but the <em>characters</em> only know as stories.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Aspect</th><th>Solo</th><th>Multiplayer</th></tr>
</thead>
<tbody>
<tr><td><strong>Structure</strong></td><td>One player, three eras, one evolving war</td><td>Two dynasties: each player leads a family across three generations. Your grandfather’s enemy’s grandson is your rival.</td></tr>
<tr><td><strong>Investment</strong></td><td>Watching characters age and pass the torch</td><td>Shared 20+ year fictional history between two real players</td></tr>
<tr><td><strong>Climax</strong></td><td>Generation 3 resolves (or doesn’t) the conflict that Generation 1 started</td><td>The final generation can negotiate peace — or realize they’ve become exactly what Generation 1 fought against</td></tr>
</tbody>
</table>
</div>
<hr>
<p><strong>Parallel Timelines (The Chronosphere Fracture)</strong></p>
<p><em>Inspired by: Sliding Doors (film), Everything Everywhere All at Once, Bioshock Infinite, the Many-Worlds interpretation of quantum mechanics, the universal human experience of “what if I’d chosen differently?”</em></p>
<p>This mode is uniquely suited to Red Alert’s lore — the Chronosphere is literally a time machine. A Chronosphere malfunction fractures reality into two parallel timelines diverging from a single critical decision. The player alternates missions between Timeline A (where they made one choice) and Timeline B (where they made the opposite).</p>
<p>The LLM generates both timelines from the same campaign skeleton but with diverging consequences. In Timeline A, you destroyed the bridge — the enemy can’t advance, but your reinforcements can’t reach you either. In Timeline B, you saved the bridge — the enemy pours across, but so do your reserves. The same characters exist in both timelines but develop differently based on divergent circumstances. Sonya (ENTJ) in Timeline A seizes power during the chaos; Sonya in Timeline B remains loyal because the bridge gave her the resources she needed. Same personality, different circumstances, different trajectory — the MBTI system ensures both versions are psychologically plausible.</p>
<p>The player experiences both consequences simultaneously. Every 2 missions, the timeline switches. The LLM generates narrative parallels and contrasts — events that rhyme across timelines. Mission 6A is a desperate defense; Mission 6B is an easy victory. But the easy victory in B created a complacency that sets up a devastating ambush in 8B, while the desperate defense in A forged a harder, warier force that handles 8A better. The timelines teach different lessons.</p>
<p>The climax: the timelines threaten to collapse into each other (Chronosphere overload). The player must choose which timeline becomes “real” — with full knowledge of what they’re giving up. Or, in the boldest variant, the two timelines collide and the player must fight their way through a reality-fractured final mission where enemies and allies from both timelines coexist.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Aspect</th><th>Solo</th><th>Multiplayer</th></tr>
</thead>
<tbody>
<tr><td><strong>Structure</strong></td><td>One player alternates between two timelines</td><td>Each player IS a timeline. They can’t communicate directly — but their timelines leak into each other (Chronosphere interference).</td></tr>
<tr><td><strong>Tension</strong></td><td>“Which timeline do I want to keep?”</td><td>“My partner’s timeline is falling apart because of a choice I made in mine”</td></tr>
<tr><td><strong>Lore fit</strong></td><td>The Chronosphere is already RA’s signature technology</td><td>Chronosphere multiplayer events: one player’s Chronosphere experiment affects the other’s battlefield</td></tr>
</tbody>
</table>
</div>
<hr>
<p><strong>The Mystery (Whodunit at War)</strong></p>
<p><em>Inspired by: Agatha Christie, The Thing (Carpenter), Among Us, Clue, Knives Out, the universal human fascination with deduction and betrayal.</em></p>
<p>Someone in your own command structure is sabotaging operations. Missions keep going wrong in ways that can’t be explained by bad luck — the enemy always knows your plans, supply convoys vanish, key systems fail at critical moments. The campaign is simultaneously a military campaign and a murder mystery. The player must figure out which of their named characters is the traitor — while still winning a war.</p>
<p>The LLM randomly selects the traitor at campaign start from the named cast and plays that character’s MBTI type <em>as if they were loyal</em> — because a good traitor acts normal. But the LLM plants clues in mission outcomes and character behavior. An ISFJ traitor might “accidentally” route supplies to the wrong location (duty-driven guilt creates mistakes). An ENTJ traitor might push too hard for a specific strategic decision that happens to benefit the enemy (ambition overrides subtlety). An ESTP traitor makes bold, impulsive moves that look like heroism but create exploitable vulnerabilities.</p>
<p>The player gathers evidence through mission outcomes, character dialogue inconsistencies, and optional investigation objectives (hack a communications relay, interrogate a captured enemy, search a character’s quarters). At various points the campaign offers “accuse” branching — name the traitor and take action. Accuse correctly → the conspiracy unravels and the campaign pivots to hunting the traitor’s handlers. Accuse incorrectly → you’ve just purged a loyal officer, damaged morale, and the real traitor is still operating. The LLM generates the fallout either way.</p>
<p>What makes this work with MBTI: each character type hides guilt differently, leaks information differently, and responds to suspicion differently. The LLM generates behavioral tells that are personality-consistent — learnable but not obvious. Repeat playthroughs with the same characters but a different traitor create genuinely different mystery experiences because the deception patterns change with the traitor’s personality type.</p>
<p><strong>Marination — trust before betrayal:</strong> The LLM follows a deliberate escalation curve inspired by Among Us’s best impostors. The traitor character performs <em>exceptionally well</em> in early missions — perhaps saving the player from a tough situation, providing critical intelligence, or volunteering for dangerous assignments. The first 30–40% of the campaign builds genuine trust. Clues begin appearing only after the player has formed a real attachment to every character (including the traitor). In co-op Traitor mode, divergent objectives start trivially small — capture a minor building that barely affects the mission outcome — and escalate gradually as the campaign progresses. This ensures the eventual reveal feels earned rather than random, and the player’s “I trusted you” reaction has genuine emotional weight.</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Aspect</th><th>Solo</th><th>Multiplayer</th></tr>
</thead>
<tbody>
<tr><td><strong>Structure</strong></td><td>Player deduces the traitor from clues across missions</td><td>Co-op with explicit opt-in “Traitor” party mode: one player receives secret <em>divergent</em> objectives from the LLM (capture instead of destroy, let a specific unit escape, secure a specific building). Not sabotage — different priorities.</td></tr>
<tr><td><strong>Tension</strong></td><td>“Which of my commanders is lying to me?”</td><td>“Is my co-op partner pursuing a different objective, or are we playing the same mission?” Subtle divergence, not griefing.</td></tr>
<tr><td><strong>Climax</strong></td><td>The accusation — right or wrong, the campaign changes</td><td>The reveal — when divergent objectives surface, the campaign’s entire history is recontextualized. Both players were playing their own version of the war.</td></tr>
</tbody>
</table>
</div>
<p><strong>Verifiable actions (trust economy):</strong> In co-op Traitor mode, the system tracks <strong>verifiable actions</strong> — things that both players can confirm through shared battlefield data. “I defended the northern flank solo for 8 minutes” is system-confirmable from the replay. “I captured objective Alpha as requested” appears in the shared mission summary. A player building trust spends time on verifiable actions visible to their partner — but this diverts from optimal play or from pursuing secret divergent objectives. The traitor faces a genuine strategic choice: build trust through verifiable actions (slower divergent progress, safer cover) or pursue secret objectives aggressively (faster but riskier if the partner is watching closely). This creates an Among Us-style “visual tasks” dynamic where proving innocence has a real cost.</p>
<p><strong>Intelligence review (structured suspicion moments):</strong> In co-op Mystery campaigns, each intermission functions as an <strong>intelligence review</strong> — a structured moment where both players see a summary of mission outcomes and the LLM surfaces anomalies. “Objective Alpha was captured instead of destroyed — consistent with enemy priorities.” “Forces were diverted from Sector 7 during the final push — 12% efficiency loss.” The system generates this data automatically from divergent-objective tracking and presents it neutrally. Players discuss before the next mission — creating a natural accusation-or-trust moment without pausing gameplay. This mirrors Among Us’s emergency meeting mechanic: action stops, evidence is reviewed, and players must decide whether to confront suspicion or move on.</p>
<p><strong>Asymmetric briefings (information asymmetry in all co-op modes):</strong> Beyond Mystery, ALL co-op campaign modes benefit from a lesson Among Us teaches about information asymmetry: <strong>each player’s pre-mission briefing should include information the other player doesn’t have</strong>. Player A’s intelligence report mentions an enemy weapons cache in the southeast; Player B’s report warns of reinforcements arriving from the north. Neither briefing is wrong — they’re simply incomplete. This creates natural “wait, what did YOUR briefing say?” conversations that build cooperative engagement. In Mystery co-op, asymmetric briefings also provide cover for the traitor’s divergent objectives — they can claim “my briefing said to capture that building” and the other player can’t immediately verify it. The LLM generates briefing splits based on each player’s assigned intelligence network and agent roster.</p>
<hr>
<h4 id="solomultiplayer-bridges"><a class="header" href="#solomultiplayer-bridges">Solo–Multiplayer Bridges</a></h4>
<p>The modes above work as standalone solo or multiplayer experiences. But the most interesting innovation is allowing <strong>ideas to cross between solo and multiplayer</strong> — things you create alone become part of someone else’s experience, and vice versa. These bridges emerge naturally from IC’s existing architecture (CharacterState serialization, Workshop sharing, D042 player behavioral profiles, campaign save portability):</p>
<p><strong>Nemesis Export:</strong> Complete a Nemesis campaign. Your nemesis — their MBTI personality, their adapted tactics (learned from your battle reports), their grudge, their dialogue patterns — serializes to a Workshop-sharable character file. Another player imports your nemesis into their own campaign. Now they’re fighting a villain that was forged by YOUR gameplay. The nemesis “remembers” their history and references it: “The last commander who tried that tactic… I made them regret it.” Community-curated nemesis libraries let players challenge themselves against the most compelling villain characters the community has generated.</p>
<p><strong>Ghost Operations (Asynchronous Competition):</strong> A solo player completes a campaign. Their campaign save — including every tactical decision, unit composition, timing, and outcome — becomes a “ghost.” Another player plays the same campaign seed but races against the ghost’s performance. Not a replay — a parallel run. The ghost’s per-mission results appear as benchmark data: “The ghost completed this mission in 12 minutes with 3 casualties. Can you do better?” This transforms solo campaigns into asynchronous races. Weekly challenges already use fixed seeds; ghost operations extend this to full campaigns.</p>
<p><strong>War Dispatches (Narrative Fragments):</strong> A solo player’s campaign generates “dispatches” — short, LLM-written narrative summaries of key campaign moments, formatted as fictional news reports, radio intercepts, or intelligence briefings. These dispatches are shareable. Other players can subscribe to a friend’s campaign dispatches — following their war as a serialized story. A dispatch might say: “Reports confirm the destruction of the 3rd Allied Armored Division at the Rhine crossing. Soviet commander [player name] is advancing unchecked.” The reader sees the story; the player lived it.</p>
<p><strong>Community Front Lines (Persistent World):</strong> Every solo player’s World Domination campaign contributes to a shared community war map. Your victories advance your faction’s front lines; your defeats push them back. Weekly aggregation: the community’s collective Solo campaigns determine the global state. Weekly community briefings (LLM-generated from aggregate data) report on the state of the war. “The Allied front in Northern Europe has collapsed after 847 Soviet campaign victories this week. The community’s attention shifts to the Pacific theater.” This doesn’t affect individual campaigns — it’s a metagame visualization. But it creates the feeling that your solo campaign matters to something larger.</p>
<p><strong>Tactical DNA (D042 Profile as Challenge):</strong> Complete a campaign. Your D042 player behavioral profile — which tracks your strategic tendencies, unit preferences, micro patterns — exports as a “tactical DNA” file. An AI opponent can load your tactical DNA and play <em>as you</em>. Another player can challenge your tactical DNA: “Can you beat the AI version of Copilot? They love air rushes, never build naval, and always go for the tech tree.” This creates asymmetric AI opponents that are genuinely personal — not generic difficulty levels, but specific human-like play patterns. Community members share and compete against each other’s tactical DNA in skirmish mode.</p>
<hr>
<p>All extended modes produce standard D021 campaigns. All are playable without an LLM once generated. All are saveable, shareable via Workshop, editable in the Campaign Editor, and replayable. The LLM provides the creative act; the engine provides the infrastructure. Modders can create new modes by combining the same building blocks differently — the modes above are a curated library, not an exhaustive list.</p>
<blockquote>
<p><strong>See also D057 (Skill Library):</strong> Proven mission generation patterns — which scene template combinations, parameter values, and narrative structures produce highly-rated missions — are stored in the skill library and retrieved as few-shot examples for future generation. This makes D016’s template-filling approach more reliable over time without changing the generation architecture.</p>
</blockquote>
<h3 id="llm-generated-custom-factions"><a class="header" href="#llm-generated-custom-factions">LLM-Generated Custom Factions</a></h3>
<p>Beyond missions and campaigns, the LLM can generate <strong>complete custom factions</strong> — a tech tree, unit roster, building roster, unique mechanics, visual identity, and faction personality — from a natural language description. The output is standard YAML (Tier 1), optionally with Lua scripts (Tier 2) for unique abilities. A generated faction is immediately playable in skirmish and custom games, shareable via Workshop, and fully editable by hand.</p>
<p><strong>Why this matters:</strong> Creating a new faction in any RTS is one of the hardest modding tasks. It requires designing 15-30+ units with coherent roles, a tech tree with meaningful progression, counter-relationships against existing factions, visual identity, and balance — all simultaneously. Most aspiring modders give up before finishing. An LLM that can generate a complete, validated faction from a description like “a guerrilla faction that relies on stealth, traps, and hit-and-run tactics” lowers the barrier from months of work to minutes of iteration.</p>
<p><strong>Available resource pool:</strong> The LLM has access to everything the engine knows about:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Source</th><th>What the LLM Can Reference</th><th>How</th></tr>
</thead>
<tbody>
<tr><td><strong>Base game units/weapons/structures</strong></td><td>All YAML definitions from the active game module (RA1, TD, etc.) including stats, counter relationships, prerequisites, and <code>llm:</code> metadata</td><td>Direct YAML read at generation time</td></tr>
<tr><td><strong>Balance presets (D019)</strong></td><td>All preset values — the LLM knows what “Classic” vs “OpenRA” Tanya stats look like and can calibrate accordingly</td><td>Preset YAML loaded alongside base definitions</td></tr>
<tr><td><strong>Workshop resources (D030)</strong></td><td>Published mods, unit packs, sprite sheets, sound packs, weapon definitions — anything the player has installed or that the Workshop index describes</td><td>Workshop metadata queries via <code>LLM</code> Lua global (Phase 7); local installed resources via filesystem; remote resources via Workshop API with <code>ai_usage</code> consent check (D030 § Author Consent)</td></tr>
<tr><td><strong>Skill Library (D057)</strong></td><td>Previously generated factions that were rated highly by players; proven unit archetypes, tech tree patterns, and balance relationships</td><td>Semantic search retrieval as few-shot examples</td></tr>
<tr><td><strong>Player data (D034)</strong></td><td>The player’s gameplay history: preferred playstyles, unit usage patterns, faction win rates</td><td>Local SQLite queries (read-only) for personalization</td></tr>
</tbody>
</table>
</div>
<p><strong>Generation pipeline:</strong></p>
<pre><code>User prompt                    "A faction based on weather control and
                                environmental warfare"
         │
         ▼
┌─────────────────────────────────────────────────────────┐
│  1. CONCEPT GENERATION                                  │
│     LLM generates faction identity:                     │
│     - Name, theme, visual style                         │
│     - Core mechanic ("weather weapons that affect       │
│       terrain and visibility")                          │
│     - Asymmetry axis ("environmental control vs          │
│       direct firepower — strong area denial,            │
│       weak in direct unit-to-unit combat")              │
│     - Design pillars (3-4 one-line principles)          │
└─────────────────────────────────────────────────────────┘
         │
         ▼
┌─────────────────────────────────────────────────────────┐
│  2. TECH TREE GENERATION                                │
│     LLM designs the tech tree:                          │
│     - Building unlock chain (3-4 tiers)                 │
│     - Each tier unlocks 2-5 units/abilities             │
│     - Prerequisites form a DAG (validated)              │
│     - Key decision points ("at Tier 3, choose           │
│       Tornado Generator OR Blizzard Chamber —           │
│       not both")                                        │
│     References: base game tech tree structure,           │
│     D019 balance philosophy Principle 5                  │
│     (shared foundation + unique exceptions)             │
└─────────────────────────────────────────────────────────┘
         │
         ▼
┌─────────────────────────────────────────────────────────┐
│  3. UNIT ROSTER GENERATION                              │
│     For each unit slot in the tech tree:                │
│     - Generate full YAML unit definition                │
│     - Stats calibrated against existing factions        │
│     - Counter relationships defined (Principle 2)       │
│     - `llm:` metadata block filled in                   │
│     - Weapon definitions generated or reused            │
│     Workshop query: "Are there existing sprite packs    │
│     or weapon definitions I can reference?"             │
│     Skill library query: "What unit archetypes work     │
│     well for area-denial factions?"                     │
└─────────────────────────────────────────────────────────┘
         │
         ▼
┌─────────────────────────────────────────────────────────┐
│  4. BALANCE VALIDATION                                  │
│     Automated checks (no LLM needed):                   │
│     - Total faction cost curve vs existing factions     │
│     - DPS-per-cost distribution within normal range     │
│     - Every unit has counters AND is countered by       │
│     - Tech tree is a valid DAG (no cycles,              │
│       every unit reachable)                             │
│     - No unit duplicates another unit's role exactly    │
│     - Name/identifier uniqueness                        │
│     If validation fails → feedback to LLM for          │
│     iteration (up to 3 retries per issue)               │
└─────────────────────────────────────────────────────────┘
         │
         ▼
┌─────────────────────────────────────────────────────────┐
│  5. OUTPUT                                              │
│     Standard mod directory:                             │
│     factions/weather_control/                           │
│       faction.yaml     # faction identity + color       │
│       tech_tree.yaml   # prerequisite graph             │
│       units/           # one .yaml per unit             │
│       weapons/         # weapon definitions             │
│       structures/      # building definitions           │
│       abilities.lua    # unique mechanics (Tier 2)      │
│       preview.png      # generated or placeholder       │
│       README.md        # faction lore + design notes    │
│                                                         │
│     Playable immediately. Editable by hand.             │
│     Publishable to Workshop.                            │
└─────────────────────────────────────────────────────────┘
</code></pre>
<p><strong>Example generation session:</strong></p>
<pre><code>Player: "Create a faction that uses mind control and
         psychic technology. Fragile units but powerful
         area effects. Should be viable against both
         Allies and Soviets in the Classic preset."

LLM generates:
  Faction: Psi Corps
  Theme: Psychic warfare — control, confusion, area denial
  Asymmetry: Weak individual units, powerful area abilities.
             Can turn enemy units into assets. Vulnerable
             to fast rushes before psychic tech is online.

  Tech tree:
    Tier 1: Psi Barracks → Initiate (basic infantry, weak attack,
            can detect cloaked), Psi Trooper (anti-vehicle mind blast)
    Tier 2: Psi Lab → Mentalist (area confusion — enemies attack
            each other for 10s), Mind Reader (reveals fog in radius)
    Tier 3: Amplifier Tower → Dominator (permanently converts one
            enemy unit, long cooldown, expensive)
    Tier 3 alt: Psychic Beacon → mass area slow + damage over time
    ...

  Balance validation:
    ✓ Total faction DPS-per-cost: 0.87x Allied average (intended —
      compensated by mind control economy)
    ✓ Counter relationships complete: Psi units weak to vehicles
      (can't mind-control machines), strong vs infantry
    ✓ Tech tree DAG valid, all units reachable
    ⚠ Dominator ability may be too strong in team games —
      suggest adding "one active Dominator per player" cap
    → LLM adjusts and re-validates
</code></pre>
<p><strong>Workshop asset integration:</strong> The LLM can reference Workshop resources with compatible licenses and <code>ai_usage: allow</code> consent (D030 § Author Consent):</p>
<ul>
<li><strong>Sprite packs:</strong> “Use ‘alice/psychic-infantry-sprites’ for the Initiate’s visual” — the generated YAML references the Workshop package as a dependency</li>
<li><strong>Sound packs:</strong> “Use ‘bob/sci-fi-weapon-sounds’ for the mind blast weapon audio”</li>
<li><strong>Weapon definitions:</strong> “Inherit from ‘carol/energy-weapons/plasma_bolt’ and adjust damage for psychic theme”</li>
<li><strong>Existing unit definitions:</strong> “The Mentalist’s confusion ability works like ‘dave/chaos-mod/confusion_gas’ but with psychic visuals instead of chemical”</li>
</ul>
<p>This means a generated faction can have real art, real sounds, and tested mechanics from day one — not just placeholder stats waiting for assets. The Workshop becomes a <strong>component library</strong> for LLM faction assembly.</p>
<p><strong>What this is NOT:</strong></p>
<ul>
<li><strong>Not allowed in ranked play.</strong> LLM-generated factions are for skirmish, custom lobbies, and single-player. Ranked games use curated balance presets (D019/D055).</li>
<li><strong>Not autonomous.</strong> The LLM proposes; the player reviews, edits, and approves. The generation UI shows every unit definition and lets the player tweak stats, rename units, or regenerate individual components before saving.</li>
<li><strong>Not a substitute for hand-crafted factions.</strong> The built-in Allied and Soviet factions are carefully designed from EA source code values. Generated factions are community content — fun, creative, potentially brilliant, but not curated to the same standard.</li>
<li><strong>Not dependent on specific assets.</strong> If a referenced Workshop sprite pack isn’t installed, the faction still loads with placeholder sprites. Assets are enhancement, not requirements.</li>
</ul>
<p><strong>Iterative refinement:</strong> After generating, the player can:</p>
<ol>
<li><strong>Playtest</strong> the faction in a skirmish against AI</li>
<li><strong>Request adjustments:</strong> “Make the Tier 2 units cheaper but weaker” or “Add a naval unit”</li>
<li>The LLM regenerates affected units with context from the existing faction definition</li>
<li><strong>Manually edit</strong> any YAML file — the generated output is standard IC content</li>
<li><strong>Publish to Workshop</strong> for others to play, rate, and fork</li>
</ol>
<p><strong>Phase:</strong> Phase 7 (alongside other LLM generation features). Requires: YAML unit/faction definition system (Phase 2), Workshop resource API (Phase 6a), <code>ic-llm</code> provider system, skill library (D057).</p>
<h3 id="llm-callable-editor-tool-bindings-phase-7-d038d040-bridge"><a class="header" href="#llm-callable-editor-tool-bindings-phase-7-d038d040-bridge">LLM-Callable Editor Tool Bindings (Phase 7, D038/D040 Bridge)</a></h3>
<p>D016 generates <strong>content</strong> (missions, campaigns, factions as YAML+Lua). D038 and D040 provide <strong>editor operations</strong> (place actor, add trigger, set objective, import sprite, adjust material). There is a natural bridge between them: exposing SDK editor operations as a <strong>structured tool-calling schema</strong> that an LLM can invoke through the same validated paths the GUI uses.</p>
<p><strong>What this enables:</strong></p>
<p>An LLM connected via D047 can act as an <strong>editor assistant</strong> — not just generating YAML files, but performing editor actions in context:</p>
<ul>
<li>“Add a patrol trigger between these two waypoints” → invokes the trigger-placement operation with parameters</li>
<li>“Create a tiberium field in the northwest corner with 3 harvesters” → invokes entity placement + resource field setup</li>
<li>“Set up the standard base defense layout for a Soviet mission” → invokes a sequence of entity placements using the module/composition library</li>
<li>“Run Quick Validate and tell me what’s wrong” → invokes the validation pipeline, reads results</li>
<li>“Export this mission to OpenRA format and show me the fidelity report” → invokes the export planner</li>
</ul>
<p><strong>Architecture:</strong></p>
<p>The editor operations already exist as internal commands (every GUI action has a programmatic equivalent — this is a D038 design principle). The tool-calling layer is a thin schema that:</p>
<ol>
<li><strong>Enumerates available operations</strong> as a tool manifest (name, parameters, return type, description) — similar to how MCP or OpenAI function-calling schemas work</li>
<li><strong>Routes LLM tool calls</strong> through the same validation and undo/redo pipeline as GUI actions — no special path, no privilege escalation</li>
<li><strong>Returns structured results</strong> (success/failure, created entity IDs, validation issues) that the LLM can reason about for multi-step workflows</li>
</ol>
<p><strong>Crate boundary:</strong> The tool manifest lives in <code>ic-editor</code> (it’s editor-specific). <code>ic-llm</code> consumes it via the same provider routing as other LLM features (D047). The manifest is auto-generated from the editor’s command registry — no manual sync needed.</p>
<p><strong>What this is NOT:</strong></p>
<ul>
<li><strong>Not autonomous by default.</strong> The LLM proposes actions; the editor shows a preview; the user confirms or edits. Autonomous mode (accept-all) is an opt-in toggle for experienced users, same as any batch operation.</li>
<li><strong>Not a new editor.</strong> This is a communication layer over the existing editor. If the GUI can’t do it, the LLM can’t do it.</li>
<li><strong>Not required.</strong> The editor works fully without an LLM. This is Layer 3 functionality, same as agentic asset generation in D040.</li>
</ul>
<p><strong>Prior art:</strong> The UnrealAI plugin for Unreal Engine 5 (announced February 2026) demonstrates this pattern with 100+ tool bindings for Blueprint creation, Actor placement, Material building, and scene generation from text. Their approach validates that structured tool-calling over editor operations is practical and that multi-provider support (8 providers, local models via Ollama) matches real demand. Key differences: IC’s tool bindings route through the same validation/undo pipeline as GUI actions (UnrealAI appears to bypass some editor safeguards); IC’s output is always standard YAML+Lua (not engine-specific binary formats); and IC’s BYOLLM architecture means no vendor lock-in.</p>
<p><strong>Phase:</strong> Phase 7. Requires: editor command registry (Phase 6a), <code>ic-llm</code> provider system (Phase 7), tool manifest schema. The manifest schema should be designed during Phase 6a so editor commands are registry-friendly from the start, even though LLM integration ships later.</p>
<hr>
<hr>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../decisions/09f-tools.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="../../decisions/09f/D020-mod-sdk.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../decisions/09f-tools.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="../../decisions/09f/D020-mod-sdk.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr-ef4e11c1.min.js"></script>
        <script src="../../mark-09e88c2c.min.js"></script>
        <script src="../../searcher-c2a407aa.js"></script>

        <script src="../../clipboard-1626706a.min.js"></script>
        <script src="../../highlight-abc7f01d.js"></script>
        <script src="../../book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
